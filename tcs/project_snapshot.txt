<File--- tcs-poc/tcs-api/.env --->
# Trade API Environment Configuration
# Copy this file to .env and modify as needed

# Application settings
TRADE_API_DEBUG=true
TRADE_API_HOST=127.0.0.1
TRADE_API_PORT=8000

# API settings
TRADE_API_API_TITLE="Trade API"
TRADE_API_API_VERSION="0.1.0"

# Trade store settings
TRADE_API_MAX_TRADES_IN_MEMORY=10000

<File--- tcs-poc/tcs-api/poetry.lock --->
# This file is automatically @generated by Poetry 2.2.1 and should not be changed by hand.

[[package]]
name = "annotated-types"
version = "0.7.0"
description = "Reusable constraint types to use with typing.Annotated"
optional = false
python-versions = ">=3.8"
groups = ["main"]
files = [
    {file = "annotated_types-0.7.0-py3-none-any.whl", hash = "sha256:1f02e8b43a8fbbc3f3e0d4f0f4bfc8131bcb4eebe8849b8e5c773f3a1c582a53"},
    {file = "annotated_types-0.7.0.tar.gz", hash = "sha256:aff07c09a53a08bc8cfccb9c85b05f1aa9a2a6f23728d790723543408344ce89"},
]

[[package]]
name = "anyio"
version = "3.7.1"
description = "High level compatibility layer for multiple asynchronous event loop implementations"
optional = false
python-versions = ">=3.7"
groups = ["main", "dev"]
files = [
    {file = "anyio-3.7.1-py3-none-any.whl", hash = "sha256:91dee416e570e92c64041bd18b900d1d6fa78dff7048769ce5ac5ddad004fbb5"},
    {file = "anyio-3.7.1.tar.gz", hash = "sha256:44a3c9aba0f5defa43261a8b3efb97891f2bd7d804e0e1f56419befa1adfc780"},
]

[package.dependencies]
exceptiongroup = {version = "*", markers = "python_version < \"3.11\""}
idna = ">=2.8"
sniffio = ">=1.1"

[package.extras]
doc = ["Sphinx", "packaging", "sphinx-autodoc-typehints (>=1.2.0)", "sphinx-rtd-theme (>=1.2.2)", "sphinxcontrib-jquery"]
test = ["anyio[trio]", "coverage[toml] (>=4.5)", "hypothesis (>=4.0)", "mock (>=4) ; python_version < \"3.8\"", "psutil (>=5.9)", "pytest (>=7.0)", "pytest-mock (>=3.6.1)", "trustme", "uvloop (>=0.17) ; python_version < \"3.12\" and platform_python_implementation == \"CPython\" and platform_system != \"Windows\""]
trio = ["trio (<0.22)"]

[[package]]
name = "attrs"
version = "25.4.0"
description = "Classes Without Boilerplate"
optional = false
python-versions = ">=3.9"
groups = ["main", "dev"]
files = [
    {file = "attrs-25.4.0-py3-none-any.whl", hash = "sha256:adcf7e2a1fb3b36ac48d97835bb6d8ade15b8dcce26aba8bf1d14847b57a3373"},
    {file = "attrs-25.4.0.tar.gz", hash = "sha256:16d5969b87f0859ef33a48b35d55ac1be6e42ae49d5e853b597db70c35c57e11"},
]

[[package]]
name = "boltons"
version = "25.0.0"
description = "When they're not builtins, they're boltons."
optional = false
python-versions = ">=3.7"
groups = ["main"]
files = [
    {file = "boltons-25.0.0-py3-none-any.whl", hash = "sha256:dc9fb38bf28985715497d1b54d00b62ea866eca3938938ea9043e254a3a6ca62"},
    {file = "boltons-25.0.0.tar.gz", hash = "sha256:e110fbdc30b7b9868cb604e3f71d4722dd8f4dcb4a5ddd06028ba8f1ab0b5ace"},
]

[[package]]
name = "certifi"
version = "2026.1.4"
description = "Python package for providing Mozilla's CA Bundle."
optional = false
python-versions = ">=3.7"
groups = ["dev"]
files = [
    {file = "certifi-2026.1.4-py3-none-any.whl", hash = "sha256:9943707519e4add1115f44c2bc244f782c0249876bf51b6599fee1ffbedd685c"},
    {file = "certifi-2026.1.4.tar.gz", hash = "sha256:ac726dd470482006e014ad384921ed6438c457018f4b3d204aea4281258b2120"},
]

[[package]]
name = "charset-normalizer"
version = "3.4.4"
description = "The Real First Universal Charset Detector. Open, modern and actively maintained alternative to Chardet."
optional = false
python-versions = ">=3.7"
groups = ["dev"]
files = [
    {file = "charset_normalizer-3.4.4-cp310-cp310-macosx_10_9_universal2.whl", hash = "sha256:e824f1492727fa856dd6eda4f7cee25f8518a12f3c4a56a74e8095695089cf6d"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:4bd5d4137d500351a30687c2d3971758aac9a19208fc110ccb9d7188fbe709e8"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-manylinux2014_armv7l.manylinux_2_17_armv7l.manylinux_2_31_armv7l.whl", hash = "sha256:027f6de494925c0ab2a55eab46ae5129951638a49a34d87f4c3eda90f696b4ad"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-manylinux2014_ppc64le.manylinux_2_17_ppc64le.manylinux_2_28_ppc64le.whl", hash = "sha256:f820802628d2694cb7e56db99213f930856014862f3fd943d290ea8438d07ca8"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:798d75d81754988d2565bff1b97ba5a44411867c0cf32b77a7e8f8d84796b10d"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:9d1bb833febdff5c8927f922386db610b49db6e0d4f4ee29601d71e7c2694313"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-manylinux_2_31_riscv64.manylinux_2_39_riscv64.whl", hash = "sha256:9cd98cdc06614a2f768d2b7286d66805f94c48cde050acdbbb7db2600ab3197e"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-musllinux_1_2_aarch64.whl", hash = "sha256:077fbb858e903c73f6c9db43374fd213b0b6a778106bc7032446a8e8b5b38b93"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-musllinux_1_2_armv7l.whl", hash = "sha256:244bfb999c71b35de57821b8ea746b24e863398194a4014e4c76adc2bbdfeff0"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-musllinux_1_2_ppc64le.whl", hash = "sha256:64b55f9dce520635f018f907ff1b0df1fdc31f2795a922fb49dd14fbcdf48c84"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-musllinux_1_2_riscv64.whl", hash = "sha256:faa3a41b2b66b6e50f84ae4a68c64fcd0c44355741c6374813a800cd6695db9e"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-musllinux_1_2_s390x.whl", hash = "sha256:6515f3182dbe4ea06ced2d9e8666d97b46ef4c75e326b79bb624110f122551db"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-musllinux_1_2_x86_64.whl", hash = "sha256:cc00f04ed596e9dc0da42ed17ac5e596c6ccba999ba6bd92b0e0aef2f170f2d6"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-win32.whl", hash = "sha256:f34be2938726fc13801220747472850852fe6b1ea75869a048d6f896838c896f"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-win_amd64.whl", hash = "sha256:a61900df84c667873b292c3de315a786dd8dac506704dea57bc957bd31e22c7d"},
    {file = "charset_normalizer-3.4.4-cp310-cp310-win_arm64.whl", hash = "sha256:cead0978fc57397645f12578bfd2d5ea9138ea0fac82b2f63f7f7c6877986a69"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-macosx_10_9_universal2.whl", hash = "sha256:6e1fcf0720908f200cd21aa4e6750a48ff6ce4afe7ff5a79a90d5ed8a08296f8"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:5f819d5fe9234f9f82d75bdfa9aef3a3d72c4d24a6e57aeaebba32a704553aa0"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-manylinux2014_armv7l.manylinux_2_17_armv7l.manylinux_2_31_armv7l.whl", hash = "sha256:a59cb51917aa591b1c4e6a43c132f0cdc3c76dbad6155df4e28ee626cc77a0a3"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-manylinux2014_ppc64le.manylinux_2_17_ppc64le.manylinux_2_28_ppc64le.whl", hash = "sha256:8ef3c867360f88ac904fd3f5e1f902f13307af9052646963ee08ff4f131adafc"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:d9e45d7faa48ee908174d8fe84854479ef838fc6a705c9315372eacbc2f02897"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:840c25fb618a231545cbab0564a799f101b63b9901f2569faecd6b222ac72381"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-manylinux_2_31_riscv64.manylinux_2_39_riscv64.whl", hash = "sha256:ca5862d5b3928c4940729dacc329aa9102900382fea192fc5e52eb69d6093815"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-musllinux_1_2_aarch64.whl", hash = "sha256:d9c7f57c3d666a53421049053eaacdd14bbd0a528e2186fcb2e672effd053bb0"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-musllinux_1_2_armv7l.whl", hash = "sha256:277e970e750505ed74c832b4bf75dac7476262ee2a013f5574dd49075879e161"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-musllinux_1_2_ppc64le.whl", hash = "sha256:31fd66405eaf47bb62e8cd575dc621c56c668f27d46a61d975a249930dd5e2a4"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-musllinux_1_2_riscv64.whl", hash = "sha256:0d3d8f15c07f86e9ff82319b3d9ef6f4bf907608f53fe9d92b28ea9ae3d1fd89"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-musllinux_1_2_s390x.whl", hash = "sha256:9f7fcd74d410a36883701fafa2482a6af2ff5ba96b9a620e9e0721e28ead5569"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-musllinux_1_2_x86_64.whl", hash = "sha256:ebf3e58c7ec8a8bed6d66a75d7fb37b55e5015b03ceae72a8e7c74495551e224"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-win32.whl", hash = "sha256:eecbc200c7fd5ddb9a7f16c7decb07b566c29fa2161a16cf67b8d068bd21690a"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-win_amd64.whl", hash = "sha256:5ae497466c7901d54b639cf42d5b8c1b6a4fead55215500d2f486d34db48d016"},
    {file = "charset_normalizer-3.4.4-cp311-cp311-win_arm64.whl", hash = "sha256:65e2befcd84bc6f37095f5961e68a6f077bf44946771354a28ad434c2cce0ae1"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-macosx_10_13_universal2.whl", hash = "sha256:0a98e6759f854bd25a58a73fa88833fba3b7c491169f86ce1180c948ab3fd394"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:b5b290ccc2a263e8d185130284f8501e3e36c5e02750fc6b6bdeb2e9e96f1e25"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-manylinux2014_armv7l.manylinux_2_17_armv7l.manylinux_2_31_armv7l.whl", hash = "sha256:74bb723680f9f7a6234dcf67aea57e708ec1fbdf5699fb91dfd6f511b0a320ef"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-manylinux2014_ppc64le.manylinux_2_17_ppc64le.manylinux_2_28_ppc64le.whl", hash = "sha256:f1e34719c6ed0b92f418c7c780480b26b5d9c50349e9a9af7d76bf757530350d"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:2437418e20515acec67d86e12bf70056a33abdacb5cb1655042f6538d6b085a8"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:11d694519d7f29d6cd09f6ac70028dba10f92f6cdd059096db198c283794ac86"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-manylinux_2_31_riscv64.manylinux_2_39_riscv64.whl", hash = "sha256:ac1c4a689edcc530fc9d9aa11f5774b9e2f33f9a0c6a57864e90908f5208d30a"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-musllinux_1_2_aarch64.whl", hash = "sha256:21d142cc6c0ec30d2efee5068ca36c128a30b0f2c53c1c07bd78cb6bc1d3be5f"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-musllinux_1_2_armv7l.whl", hash = "sha256:5dbe56a36425d26d6cfb40ce79c314a2e4dd6211d51d6d2191c00bed34f354cc"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-musllinux_1_2_ppc64le.whl", hash = "sha256:5bfbb1b9acf3334612667b61bd3002196fe2a1eb4dd74d247e0f2a4d50ec9bbf"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-musllinux_1_2_riscv64.whl", hash = "sha256:d055ec1e26e441f6187acf818b73564e6e6282709e9bcb5b63f5b23068356a15"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-musllinux_1_2_s390x.whl", hash = "sha256:af2d8c67d8e573d6de5bc30cdb27e9b95e49115cd9baad5ddbd1a6207aaa82a9"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-musllinux_1_2_x86_64.whl", hash = "sha256:780236ac706e66881f3b7f2f32dfe90507a09e67d1d454c762cf642e6e1586e0"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-win32.whl", hash = "sha256:5833d2c39d8896e4e19b689ffc198f08ea58116bee26dea51e362ecc7cd3ed26"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-win_amd64.whl", hash = "sha256:a79cfe37875f822425b89a82333404539ae63dbdddf97f84dcbc3d339aae9525"},
    {file = "charset_normalizer-3.4.4-cp312-cp312-win_arm64.whl", hash = "sha256:376bec83a63b8021bb5c8ea75e21c4ccb86e7e45ca4eb81146091b56599b80c3"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-macosx_10_13_universal2.whl", hash = "sha256:e1f185f86a6f3403aa2420e815904c67b2f9ebc443f045edd0de921108345794"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:6b39f987ae8ccdf0d2642338faf2abb1862340facc796048b604ef14919e55ed"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-manylinux2014_armv7l.manylinux_2_17_armv7l.manylinux_2_31_armv7l.whl", hash = "sha256:3162d5d8ce1bb98dd51af660f2121c55d0fa541b46dff7bb9b9f86ea1d87de72"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-manylinux2014_ppc64le.manylinux_2_17_ppc64le.manylinux_2_28_ppc64le.whl", hash = "sha256:81d5eb2a312700f4ecaa977a8235b634ce853200e828fbadf3a9c50bab278328"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:5bd2293095d766545ec1a8f612559f6b40abc0eb18bb2f5d1171872d34036ede"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:a8a8b89589086a25749f471e6a900d3f662d1d3b6e2e59dcecf787b1cc3a1894"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-manylinux_2_31_riscv64.manylinux_2_39_riscv64.whl", hash = "sha256:bc7637e2f80d8530ee4a78e878bce464f70087ce73cf7c1caf142416923b98f1"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-musllinux_1_2_aarch64.whl", hash = "sha256:f8bf04158c6b607d747e93949aa60618b61312fe647a6369f88ce2ff16043490"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-musllinux_1_2_armv7l.whl", hash = "sha256:554af85e960429cf30784dd47447d5125aaa3b99a6f0683589dbd27e2f45da44"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-musllinux_1_2_ppc64le.whl", hash = "sha256:74018750915ee7ad843a774364e13a3db91682f26142baddf775342c3f5b1133"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-musllinux_1_2_riscv64.whl", hash = "sha256:c0463276121fdee9c49b98908b3a89c39be45d86d1dbaa22957e38f6321d4ce3"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-musllinux_1_2_s390x.whl", hash = "sha256:362d61fd13843997c1c446760ef36f240cf81d3ebf74ac62652aebaf7838561e"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-musllinux_1_2_x86_64.whl", hash = "sha256:9a26f18905b8dd5d685d6d07b0cdf98a79f3c7a918906af7cc143ea2e164c8bc"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-win32.whl", hash = "sha256:9b35f4c90079ff2e2edc5b26c0c77925e5d2d255c42c74fdb70fb49b172726ac"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-win_amd64.whl", hash = "sha256:b435cba5f4f750aa6c0a0d92c541fb79f69a387c91e61f1795227e4ed9cece14"},
    {file = "charset_normalizer-3.4.4-cp313-cp313-win_arm64.whl", hash = "sha256:542d2cee80be6f80247095cc36c418f7bddd14f4a6de45af91dfad36d817bba2"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-macosx_10_13_universal2.whl", hash = "sha256:da3326d9e65ef63a817ecbcc0df6e94463713b754fe293eaa03da99befb9a5bd"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:8af65f14dc14a79b924524b1e7fffe304517b2bff5a58bf64f30b98bbc5079eb"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-manylinux2014_armv7l.manylinux_2_17_armv7l.manylinux_2_31_armv7l.whl", hash = "sha256:74664978bb272435107de04e36db5a9735e78232b85b77d45cfb38f758efd33e"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-manylinux2014_ppc64le.manylinux_2_17_ppc64le.manylinux_2_28_ppc64le.whl", hash = "sha256:752944c7ffbfdd10c074dc58ec2d5a8a4cd9493b314d367c14d24c17684ddd14"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:d1f13550535ad8cff21b8d757a3257963e951d96e20ec82ab44bc64aeb62a191"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:ecaae4149d99b1c9e7b88bb03e3221956f68fd6d50be2ef061b2381b61d20838"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-manylinux_2_31_riscv64.manylinux_2_39_riscv64.whl", hash = "sha256:cb6254dc36b47a990e59e1068afacdcd02958bdcce30bb50cc1700a8b9d624a6"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-musllinux_1_2_aarch64.whl", hash = "sha256:c8ae8a0f02f57a6e61203a31428fa1d677cbe50c93622b4149d5c0f319c1d19e"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-musllinux_1_2_armv7l.whl", hash = "sha256:47cc91b2f4dd2833fddaedd2893006b0106129d4b94fdb6af1f4ce5a9965577c"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-musllinux_1_2_ppc64le.whl", hash = "sha256:82004af6c302b5d3ab2cfc4cc5f29db16123b1a8417f2e25f9066f91d4411090"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-musllinux_1_2_riscv64.whl", hash = "sha256:2b7d8f6c26245217bd2ad053761201e9f9680f8ce52f0fcd8d0755aeae5b2152"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-musllinux_1_2_s390x.whl", hash = "sha256:799a7a5e4fb2d5898c60b640fd4981d6a25f1c11790935a44ce38c54e985f828"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-musllinux_1_2_x86_64.whl", hash = "sha256:99ae2cffebb06e6c22bdc25801d7b30f503cc87dbd283479e7b606f70aff57ec"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-win32.whl", hash = "sha256:f9d332f8c2a2fcbffe1378594431458ddbef721c1769d78e2cbc06280d8155f9"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-win_amd64.whl", hash = "sha256:8a6562c3700cce886c5be75ade4a5db4214fda19fede41d9792d100288d8f94c"},
    {file = "charset_normalizer-3.4.4-cp314-cp314-win_arm64.whl", hash = "sha256:de00632ca48df9daf77a2c65a484531649261ec9f25489917f09e455cb09ddb2"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-macosx_10_9_universal2.whl", hash = "sha256:ce8a0633f41a967713a59c4139d29110c07e826d131a316b50ce11b1d79b4f84"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:eaabd426fe94daf8fd157c32e571c85cb12e66692f15516a83a03264b08d06c3"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-manylinux2014_armv7l.manylinux_2_17_armv7l.manylinux_2_31_armv7l.whl", hash = "sha256:c4ef880e27901b6cc782f1b95f82da9313c0eb95c3af699103088fa0ac3ce9ac"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-manylinux2014_ppc64le.manylinux_2_17_ppc64le.manylinux_2_28_ppc64le.whl", hash = "sha256:2aaba3b0819274cc41757a1da876f810a3e4d7b6eb25699253a4effef9e8e4af"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:778d2e08eda00f4256d7f672ca9fef386071c9202f5e4607920b86d7803387f2"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:f155a433c2ec037d4e8df17d18922c3a0d9b3232a396690f17175d2946f0218d"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-manylinux_2_31_riscv64.manylinux_2_39_riscv64.whl", hash = "sha256:a8bf8d0f749c5757af2142fe7903a9df1d2e8aa3841559b2bad34b08d0e2bcf3"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-musllinux_1_2_aarch64.whl", hash = "sha256:194f08cbb32dc406d6e1aea671a68be0823673db2832b38405deba2fb0d88f63"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-musllinux_1_2_armv7l.whl", hash = "sha256:6aee717dcfead04c6eb1ce3bd29ac1e22663cdea57f943c87d1eab9a025438d7"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-musllinux_1_2_ppc64le.whl", hash = "sha256:cd4b7ca9984e5e7985c12bc60a6f173f3c958eae74f3ef6624bb6b26e2abbae4"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-musllinux_1_2_riscv64.whl", hash = "sha256:b7cf1017d601aa35e6bb650b6ad28652c9cd78ee6caff19f3c28d03e1c80acbf"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-musllinux_1_2_s390x.whl", hash = "sha256:e912091979546adf63357d7e2ccff9b44f026c075aeaf25a52d0e95ad2281074"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-musllinux_1_2_x86_64.whl", hash = "sha256:5cb4d72eea50c8868f5288b7f7f33ed276118325c1dfd3957089f6b519e1382a"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-win32.whl", hash = "sha256:837c2ce8c5a65a2035be9b3569c684358dfbf109fd3b6969630a87535495ceaa"},
    {file = "charset_normalizer-3.4.4-cp38-cp38-win_amd64.whl", hash = "sha256:44c2a8734b333e0578090c4cd6b16f275e07aa6614ca8715e6c038e865e70576"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-macosx_10_9_universal2.whl", hash = "sha256:a9768c477b9d7bd54bc0c86dbaebdec6f03306675526c9927c0e8a04e8f94af9"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:1bee1e43c28aa63cb16e5c14e582580546b08e535299b8b6158a7c9c768a1f3d"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-manylinux2014_armv7l.manylinux_2_17_armv7l.manylinux_2_31_armv7l.whl", hash = "sha256:fd44c878ea55ba351104cb93cc85e74916eb8fa440ca7903e57575e97394f608"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-manylinux2014_ppc64le.manylinux_2_17_ppc64le.manylinux_2_28_ppc64le.whl", hash = "sha256:0f04b14ffe5fdc8c4933862d8306109a2c51e0704acfa35d51598eb45a1e89fc"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:cd09d08005f958f370f539f186d10aec3377d55b9eeb0d796025d4886119d76e"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:4fe7859a4e3e8457458e2ff592f15ccb02f3da787fcd31e0183879c3ad4692a1"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-manylinux_2_31_riscv64.manylinux_2_39_riscv64.whl", hash = "sha256:fa09f53c465e532f4d3db095e0c55b615f010ad81803d383195b6b5ca6cbf5f3"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-musllinux_1_2_aarch64.whl", hash = "sha256:7fa17817dc5625de8a027cb8b26d9fefa3ea28c8253929b8d6649e705d2835b6"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-musllinux_1_2_armv7l.whl", hash = "sha256:5947809c8a2417be3267efc979c47d76a079758166f7d43ef5ae8e9f92751f88"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-musllinux_1_2_ppc64le.whl", hash = "sha256:4902828217069c3c5c71094537a8e623f5d097858ac6ca8252f7b4d10b7560f1"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-musllinux_1_2_riscv64.whl", hash = "sha256:7c308f7e26e4363d79df40ca5b2be1c6ba9f02bdbccfed5abddb7859a6ce72cf"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-musllinux_1_2_s390x.whl", hash = "sha256:2c9d3c380143a1fedbff95a312aa798578371eb29da42106a29019368a475318"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-musllinux_1_2_x86_64.whl", hash = "sha256:cb01158d8b88ee68f15949894ccc6712278243d95f344770fa7593fa2d94410c"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-win32.whl", hash = "sha256:2677acec1a2f8ef614c6888b5b4ae4060cc184174a938ed4e8ef690e15d3e505"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-win_amd64.whl", hash = "sha256:f8e160feb2aed042cd657a72acc0b481212ed28b1b9a95c0cee1621b524e1966"},
    {file = "charset_normalizer-3.4.4-cp39-cp39-win_arm64.whl", hash = "sha256:b5d84d37db046c5ca74ee7bb47dd6cbc13f80665fdde3e8040bdd3fb015ecb50"},
    {file = "charset_normalizer-3.4.4-py3-none-any.whl", hash = "sha256:7a32c560861a02ff789ad905a2fe94e3f840803362c84fecf1851cb4cf3dc37f"},
    {file = "charset_normalizer-3.4.4.tar.gz", hash = "sha256:94537985111c35f28720e43603b8e7b43a6ecfb2ce1d3058bbe955b73404e21a"},
]

[[package]]
name = "click"
version = "8.1.8"
description = "Composable command line interface toolkit"
optional = false
python-versions = ">=3.7"
groups = ["main"]
files = [
    {file = "click-8.1.8-py3-none-any.whl", hash = "sha256:63c132bbbed01578a06712a2d1f497bb62d9c1c0d329b7903a866228027263b2"},
    {file = "click-8.1.8.tar.gz", hash = "sha256:ed53c9d8990d83c2a27deae68e4ee337473f6330c040a31d4225c9574d16096a"},
]

[package.dependencies]
colorama = {version = "*", markers = "platform_system == \"Windows\""}

[[package]]
name = "colorama"
version = "0.4.6"
description = "Cross-platform colored terminal text."
optional = false
python-versions = "!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*,!=3.5.*,!=3.6.*,>=2.7"
groups = ["main", "dev"]
files = [
    {file = "colorama-0.4.6-py2.py3-none-any.whl", hash = "sha256:4f1d9991f5acc0ca119f9d443620b77f9d6b33703e51011c16baf57afb285fc6"},
    {file = "colorama-0.4.6.tar.gz", hash = "sha256:08695f5cb7ed6e0531a20572697297273c47b8cae5a63ffc6d6ed5c201be6e44"},
]
markers = {main = "platform_system == \"Windows\" or sys_platform == \"win32\"", dev = "sys_platform == \"win32\""}

[[package]]
name = "exceptiongroup"
version = "1.3.1"
description = "Backport of PEP 654 (exception groups)"
optional = false
python-versions = ">=3.7"
groups = ["main", "dev"]
markers = "python_version == \"3.10\""
files = [
    {file = "exceptiongroup-1.3.1-py3-none-any.whl", hash = "sha256:a7a39a3bd276781e98394987d3a5701d0c4edffb633bb7a5144577f82c773598"},
    {file = "exceptiongroup-1.3.1.tar.gz", hash = "sha256:8b412432c6055b0b7d14c310000ae93352ed6754f70fa8f7c34141f91c4e3219"},
]

[package.dependencies]
typing-extensions = {version = ">=4.6.0", markers = "python_version < \"3.13\""}

[package.extras]
test = ["pytest (>=6)"]

[[package]]
name = "face"
version = "24.0.0"
description = "A command-line application framework (and CLI parser). Friendly for users, full-featured for developers."
optional = false
python-versions = "*"
groups = ["main"]
files = [
    {file = "face-24.0.0-py3-none-any.whl", hash = "sha256:0e2c17b426fa4639a4e77d1de9580f74a98f4869ba4c7c8c175b810611622cd3"},
    {file = "face-24.0.0.tar.gz", hash = "sha256:611e29a01ac5970f0077f9c577e746d48c082588b411b33a0dd55c4d872949f6"},
]

[package.dependencies]
boltons = ">=20.0.0"

[[package]]
name = "fastapi"
version = "0.104.1"
description = "FastAPI framework, high performance, easy to learn, fast to code, ready for production"
optional = false
python-versions = ">=3.8"
groups = ["main"]
files = [
    {file = "fastapi-0.104.1-py3-none-any.whl", hash = "sha256:752dc31160cdbd0436bb93bad51560b57e525cbb1d4bbf6f4904ceee75548241"},
    {file = "fastapi-0.104.1.tar.gz", hash = "sha256:e5e4540a7c5e1dcfbbcf5b903c234feddcdcd881f191977a1c5dfd917487e7ae"},
]

[package.dependencies]
anyio = ">=3.7.1,<4.0.0"
pydantic = ">=1.7.4,<1.8 || >1.8,<1.8.1 || >1.8.1,<2.0.0 || >2.0.0,<2.0.1 || >2.0.1,<2.1.0 || >2.1.0,<3.0.0"
starlette = ">=0.27.0,<0.28.0"
typing-extensions = ">=4.8.0"

[package.extras]
all = ["email-validator (>=2.0.0)", "httpx (>=0.23.0)", "itsdangerous (>=1.1.0)", "jinja2 (>=2.11.2)", "orjson (>=3.2.1)", "pydantic-extra-types (>=2.0.0)", "pydantic-settings (>=2.0.0)", "python-multipart (>=0.0.5)", "pyyaml (>=5.3.1)", "ujson (>=4.0.1,!=4.0.2,!=4.1.0,!=4.2.0,!=4.3.0,!=5.0.0,!=5.1.0)", "uvicorn[standard] (>=0.12.0)"]

[[package]]
name = "glom"
version = "25.12.0"
description = "A declarative object transformer and formatter, for conglomerating nested data."
optional = false
python-versions = "*"
groups = ["main"]
files = [
    {file = "glom-25.12.0-py3-none-any.whl", hash = "sha256:b9f21e77f71a6576a43864e85066b8cc3f0f778d0d50961563f8981377a6dcb1"},
    {file = "glom-25.12.0.tar.gz", hash = "sha256:1ae7da88be3693df40ad27bdf57a765a55c075c86c971bcddd67927403eb0069"},
]

[package.dependencies]
attrs = "*"
boltons = ">=19.3.0"
face = ">=20.1.1"

[package.extras]
toml = ["tomli ; python_version < \"3.11\""]
yaml = ["PyYAML"]

[[package]]
name = "gunicorn"
version = "21.2.0"
description = "WSGI HTTP Server for UNIX"
optional = false
python-versions = ">=3.5"
groups = ["main"]
files = [
    {file = "gunicorn-21.2.0-py3-none-any.whl", hash = "sha256:3213aa5e8c24949e792bcacfc176fef362e7aac80b76c56f6b5122bf350722f0"},
    {file = "gunicorn-21.2.0.tar.gz", hash = "sha256:88ec8bff1d634f98e61b9f65bc4bf3cd918a90806c6f5c48bc5603849ec81033"},
]

[package.dependencies]
packaging = "*"

[package.extras]
eventlet = ["eventlet (>=0.24.1)"]
gevent = ["gevent (>=1.4.0)"]
setproctitle = ["setproctitle"]
tornado = ["tornado (>=0.2)"]

[[package]]
name = "h11"
version = "0.16.0"
description = "A pure-Python, bring-your-own-I/O implementation of HTTP/1.1"
optional = false
python-versions = ">=3.8"
groups = ["main", "dev"]
files = [
    {file = "h11-0.16.0-py3-none-any.whl", hash = "sha256:63cf8bbe7522de3bf65932fda1d9c2772064ffb3dae62d55932da54b31cb6c86"},
    {file = "h11-0.16.0.tar.gz", hash = "sha256:4e35b956cf45792e4caa5885e69fba00bdbc6ffafbfa020300e549b208ee5ff1"},
]

[[package]]
name = "httpcore"
version = "1.0.9"
description = "A minimal low-level HTTP client."
optional = false
python-versions = ">=3.8"
groups = ["dev"]
files = [
    {file = "httpcore-1.0.9-py3-none-any.whl", hash = "sha256:2d400746a40668fc9dec9810239072b40b4484b640a8c38fd654a024c7a1bf55"},
    {file = "httpcore-1.0.9.tar.gz", hash = "sha256:6e34463af53fd2ab5d807f399a9b45ea31c3dfa2276f15a2c3f00afff6e176e8"},
]

[package.dependencies]
certifi = "*"
h11 = ">=0.16"

[package.extras]
asyncio = ["anyio (>=4.0,<5.0)"]
http2 = ["h2 (>=3,<5)"]
socks = ["socksio (==1.*)"]
trio = ["trio (>=0.22.0,<1.0)"]

[[package]]
name = "httptools"
version = "0.7.1"
description = "A collection of framework independent HTTP protocol utils."
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "httptools-0.7.1-cp310-cp310-macosx_10_9_universal2.whl", hash = "sha256:11d01b0ff1fe02c4c32d60af61a4d613b74fad069e47e06e9067758c01e9ac78"},
    {file = "httptools-0.7.1-cp310-cp310-macosx_11_0_arm64.whl", hash = "sha256:84d86c1e5afdc479a6fdabf570be0d3eb791df0ae727e8dbc0259ed1249998d4"},
    {file = "httptools-0.7.1-cp310-cp310-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl", hash = "sha256:c8c751014e13d88d2be5f5f14fc8b89612fcfa92a9cc480f2bc1598357a23a05"},
    {file = "httptools-0.7.1-cp310-cp310-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:654968cb6b6c77e37b832a9be3d3ecabb243bbe7a0b8f65fbc5b6b04c8fcabed"},
    {file = "httptools-0.7.1-cp310-cp310-musllinux_1_2_aarch64.whl", hash = "sha256:b580968316348b474b020edf3988eecd5d6eec4634ee6561e72ae3a2a0e00a8a"},
    {file = "httptools-0.7.1-cp310-cp310-musllinux_1_2_x86_64.whl", hash = "sha256:d496e2f5245319da9d764296e86c5bb6fcf0cf7a8806d3d000717a889c8c0b7b"},
    {file = "httptools-0.7.1-cp310-cp310-win_amd64.whl", hash = "sha256:cbf8317bfccf0fed3b5680c559d3459cccf1abe9039bfa159e62e391c7270568"},
    {file = "httptools-0.7.1-cp311-cp311-macosx_10_9_universal2.whl", hash = "sha256:474d3b7ab469fefcca3697a10d11a32ee2b9573250206ba1e50d5980910da657"},
    {file = "httptools-0.7.1-cp311-cp311-macosx_11_0_arm64.whl", hash = "sha256:a3c3b7366bb6c7b96bd72d0dbe7f7d5eead261361f013be5f6d9590465ea1c70"},
    {file = "httptools-0.7.1-cp311-cp311-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl", hash = "sha256:379b479408b8747f47f3b253326183d7c009a3936518cdb70db58cffd369d9df"},
    {file = "httptools-0.7.1-cp311-cp311-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:cad6b591a682dcc6cf1397c3900527f9affef1e55a06c4547264796bbd17cf5e"},
    {file = "httptools-0.7.1-cp311-cp311-musllinux_1_2_aarch64.whl", hash = "sha256:eb844698d11433d2139bbeeb56499102143beb582bd6c194e3ba69c22f25c274"},
    {file = "httptools-0.7.1-cp311-cp311-musllinux_1_2_x86_64.whl", hash = "sha256:f65744d7a8bdb4bda5e1fa23e4ba16832860606fcc09d674d56e425e991539ec"},
    {file = "httptools-0.7.1-cp311-cp311-win_amd64.whl", hash = "sha256:135fbe974b3718eada677229312e97f3b31f8a9c8ffa3ae6f565bf808d5b6bcb"},
    {file = "httptools-0.7.1-cp312-cp312-macosx_10_13_universal2.whl", hash = "sha256:38e0c83a2ea9746ebbd643bdfb521b9aa4a91703e2cd705c20443405d2fd16a5"},
    {file = "httptools-0.7.1-cp312-cp312-macosx_11_0_arm64.whl", hash = "sha256:f25bbaf1235e27704f1a7b86cd3304eabc04f569c828101d94a0e605ef7205a5"},
    {file = "httptools-0.7.1-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl", hash = "sha256:2c15f37ef679ab9ecc06bfc4e6e8628c32a8e4b305459de7cf6785acd57e4d03"},
    {file = "httptools-0.7.1-cp312-cp312-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:7fe6e96090df46b36ccfaf746f03034e5ab723162bc51b0a4cf58305324036f2"},
    {file = "httptools-0.7.1-cp312-cp312-musllinux_1_2_aarch64.whl", hash = "sha256:f72fdbae2dbc6e68b8239defb48e6a5937b12218e6ffc2c7846cc37befa84362"},
    {file = "httptools-0.7.1-cp312-cp312-musllinux_1_2_x86_64.whl", hash = "sha256:e99c7b90a29fd82fea9ef57943d501a16f3404d7b9ee81799d41639bdaae412c"},
    {file = "httptools-0.7.1-cp312-cp312-win_amd64.whl", hash = "sha256:3e14f530fefa7499334a79b0cf7e7cd2992870eb893526fb097d51b4f2d0f321"},
    {file = "httptools-0.7.1-cp313-cp313-macosx_10_13_universal2.whl", hash = "sha256:6babce6cfa2a99545c60bfef8bee0cc0545413cb0018f617c8059a30ad985de3"},
    {file = "httptools-0.7.1-cp313-cp313-macosx_11_0_arm64.whl", hash = "sha256:601b7628de7504077dd3dcb3791c6b8694bbd967148a6d1f01806509254fb1ca"},
    {file = "httptools-0.7.1-cp313-cp313-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl", hash = "sha256:04c6c0e6c5fb0739c5b8a9eb046d298650a0ff38cf42537fc372b28dc7e4472c"},
    {file = "httptools-0.7.1-cp313-cp313-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:69d4f9705c405ae3ee83d6a12283dc9feba8cc6aaec671b412917e644ab4fa66"},
    {file = "httptools-0.7.1-cp313-cp313-musllinux_1_2_aarch64.whl", hash = "sha256:44c8f4347d4b31269c8a9205d8a5ee2df5322b09bbbd30f8f862185bb6b05346"},
    {file = "httptools-0.7.1-cp313-cp313-musllinux_1_2_x86_64.whl", hash = "sha256:465275d76db4d554918aba40bf1cbebe324670f3dfc979eaffaa5d108e2ed650"},
    {file = "httptools-0.7.1-cp313-cp313-win_amd64.whl", hash = "sha256:322d00c2068d125bd570f7bf78b2d367dad02b919d8581d7476d8b75b294e3e6"},
    {file = "httptools-0.7.1-cp314-cp314-macosx_10_13_universal2.whl", hash = "sha256:c08fe65728b8d70b6923ce31e3956f859d5e1e8548e6f22ec520a962c6757270"},
    {file = "httptools-0.7.1-cp314-cp314-macosx_11_0_arm64.whl", hash = "sha256:7aea2e3c3953521c3c51106ee11487a910d45586e351202474d45472db7d72d3"},
    {file = "httptools-0.7.1-cp314-cp314-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl", hash = "sha256:0e68b8582f4ea9166be62926077a3334064d422cf08ab87d8b74664f8e9058e1"},
    {file = "httptools-0.7.1-cp314-cp314-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:df091cf961a3be783d6aebae963cc9b71e00d57fa6f149025075217bc6a55a7b"},
    {file = "httptools-0.7.1-cp314-cp314-musllinux_1_2_aarch64.whl", hash = "sha256:f084813239e1eb403ddacd06a30de3d3e09a9b76e7894dcda2b22f8a726e9c60"},
    {file = "httptools-0.7.1-cp314-cp314-musllinux_1_2_x86_64.whl", hash = "sha256:7347714368fb2b335e9063bc2b96f2f87a9ceffcd9758ac295f8bbcd3ffbc0ca"},
    {file = "httptools-0.7.1-cp314-cp314-win_amd64.whl", hash = "sha256:cfabda2a5bb85aa2a904ce06d974a3f30fb36cc63d7feaddec05d2050acede96"},
    {file = "httptools-0.7.1-cp39-cp39-macosx_10_9_universal2.whl", hash = "sha256:ac50afa68945df63ec7a2707c506bd02239272288add34539a2ef527254626a4"},
    {file = "httptools-0.7.1-cp39-cp39-macosx_11_0_arm64.whl", hash = "sha256:de987bb4e7ac95b99b805b99e0aae0ad51ae61df4263459d36e07cf4052d8b3a"},
    {file = "httptools-0.7.1-cp39-cp39-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl", hash = "sha256:d169162803a24425eb5e4d51d79cbf429fd7a491b9e570a55f495ea55b26f0bf"},
    {file = "httptools-0.7.1-cp39-cp39-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:49794f9250188a57fa73c706b46cb21a313edb00d337ca4ce1a011fe3c760b28"},
    {file = "httptools-0.7.1-cp39-cp39-musllinux_1_2_aarch64.whl", hash = "sha256:aeefa0648362bb97a7d6b5ff770bfb774930a327d7f65f8208394856862de517"},
    {file = "httptools-0.7.1-cp39-cp39-musllinux_1_2_x86_64.whl", hash = "sha256:0d92b10dbf0b3da4823cde6a96d18e6ae358a9daa741c71448975f6a2c339cad"},
    {file = "httptools-0.7.1-cp39-cp39-win_amd64.whl", hash = "sha256:5ddbd045cfcb073db2449563dd479057f2c2b681ebc232380e63ef15edc9c023"},
    {file = "httptools-0.7.1.tar.gz", hash = "sha256:abd72556974f8e7c74a259655924a717a2365b236c882c3f6f8a45fe94703ac9"},
]

[[package]]
name = "httpx"
version = "0.25.2"
description = "The next generation HTTP client."
optional = false
python-versions = ">=3.8"
groups = ["dev"]
files = [
    {file = "httpx-0.25.2-py3-none-any.whl", hash = "sha256:a05d3d052d9b2dfce0e3896636467f8a5342fb2b902c819428e1ac65413ca118"},
    {file = "httpx-0.25.2.tar.gz", hash = "sha256:8b8fcaa0c8ea7b05edd69a094e63a2094c4efcb48129fb757361bc423c0ad9e8"},
]

[package.dependencies]
anyio = "*"
certifi = "*"
httpcore = "==1.*"
idna = "*"
sniffio = "*"

[package.extras]
brotli = ["brotli ; platform_python_implementation == \"CPython\"", "brotlicffi ; platform_python_implementation != \"CPython\""]
cli = ["click (==8.*)", "pygments (==2.*)", "rich (>=10,<14)"]
http2 = ["h2 (>=3,<5)"]
socks = ["socksio (==1.*)"]

[[package]]
name = "hypothesis"
version = "6.141.1"
description = "A library for property-based testing"
optional = false
python-versions = ">=3.9"
groups = ["dev"]
files = [
    {file = "hypothesis-6.141.1-py3-none-any.whl", hash = "sha256:a5b3c39c16d98b7b4c3c5c8d4262e511e3b2255e6814ced8023af49087ad60b3"},
    {file = "hypothesis-6.141.1.tar.gz", hash = "sha256:8ef356e1e18fbeaa8015aab3c805303b7fe4b868e5b506e87ad83c0bf951f46f"},
]

[package.dependencies]
attrs = ">=22.2.0"
exceptiongroup = {version = ">=1.0.0", markers = "python_version < \"3.11\""}
sortedcontainers = ">=2.1.0,<3.0.0"

[package.extras]
all = ["black (>=20.8b0)", "click (>=7.0)", "crosshair-tool (>=0.0.97)", "django (>=4.2)", "dpcontracts (>=0.4)", "hypothesis-crosshair (>=0.0.25)", "lark (>=0.10.1)", "libcst (>=0.3.16)", "numpy (>=1.19.3)", "pandas (>=1.1)", "pytest (>=4.6)", "python-dateutil (>=1.4)", "pytz (>=2014.1)", "redis (>=3.0.0)", "rich (>=9.0.0)", "tzdata (>=2025.2) ; sys_platform == \"win32\" or sys_platform == \"emscripten\"", "watchdog (>=4.0.0)"]
cli = ["black (>=20.8b0)", "click (>=7.0)", "rich (>=9.0.0)"]
codemods = ["libcst (>=0.3.16)"]
crosshair = ["crosshair-tool (>=0.0.97)", "hypothesis-crosshair (>=0.0.25)"]
dateutil = ["python-dateutil (>=1.4)"]
django = ["django (>=4.2)"]
dpcontracts = ["dpcontracts (>=0.4)"]
ghostwriter = ["black (>=20.8b0)"]
lark = ["lark (>=0.10.1)"]
numpy = ["numpy (>=1.19.3)"]
pandas = ["pandas (>=1.1)"]
pytest = ["pytest (>=4.6)"]
pytz = ["pytz (>=2014.1)"]
redis = ["redis (>=3.0.0)"]
watchdog = ["watchdog (>=4.0.0)"]
zoneinfo = ["tzdata (>=2025.2) ; sys_platform == \"win32\" or sys_platform == \"emscripten\""]

[[package]]
name = "idna"
version = "3.11"
description = "Internationalized Domain Names in Applications (IDNA)"
optional = false
python-versions = ">=3.8"
groups = ["main", "dev"]
files = [
    {file = "idna-3.11-py3-none-any.whl", hash = "sha256:771a87f49d9defaf64091e6e6fe9c18d4833f140bd19464795bc32d966ca37ea"},
    {file = "idna-3.11.tar.gz", hash = "sha256:795dafcc9c04ed0c1fb032c2aa73654d8e8c5023a7df64a53f39190ada629902"},
]

[package.extras]
all = ["flake8 (>=7.1.1)", "mypy (>=1.11.2)", "pytest (>=8.3.2)", "ruff (>=0.6.2)"]

[[package]]
name = "iniconfig"
version = "2.1.0"
description = "brain-dead simple config-ini parsing"
optional = false
python-versions = ">=3.8"
groups = ["dev"]
files = [
    {file = "iniconfig-2.1.0-py3-none-any.whl", hash = "sha256:9deba5723312380e77435581c6bf4935c94cbfab9b1ed33ef8d238ea168eb760"},
    {file = "iniconfig-2.1.0.tar.gz", hash = "sha256:3abbd2e30b36733fee78f9c7f7308f2d0050e88f0087fd25c2645f63c773e1c7"},
]

[[package]]
name = "jmespath"
version = "1.0.1"
description = "JSON Matching Expressions"
optional = false
python-versions = ">=3.7"
groups = ["main"]
files = [
    {file = "jmespath-1.0.1-py3-none-any.whl", hash = "sha256:02e2e4cc71b5bcab88332eebf907519190dd9e6e82107fa7f83b1003a6252980"},
    {file = "jmespath-1.0.1.tar.gz", hash = "sha256:90261b206d6defd58fdd5e85f478bf633a2901798906be2ad389150c5c60edbe"},
]

[[package]]
name = "orjson"
version = "3.11.5"
description = "Fast, correct Python JSON library supporting dataclasses, datetimes, and numpy"
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "orjson-3.11.5-cp310-cp310-macosx_10_15_x86_64.macosx_11_0_arm64.macosx_10_15_universal2.whl", hash = "sha256:df9eadb2a6386d5ea2bfd81309c505e125cfc9ba2b1b99a97e60985b0b3665d1"},
    {file = "orjson-3.11.5-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:ccc70da619744467d8f1f49a8cadae5ec7bbe054e5232d95f92ed8737f8c5870"},
    {file = "orjson-3.11.5-cp310-cp310-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:073aab025294c2f6fc0807201c76fdaed86f8fc4be52c440fb78fbb759a1ac09"},
    {file = "orjson-3.11.5-cp310-cp310-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:835f26fa24ba0bb8c53ae2a9328d1706135b74ec653ed933869b74b6909e63fd"},
    {file = "orjson-3.11.5-cp310-cp310-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:667c132f1f3651c14522a119e4dd631fad98761fa960c55e8e7430bb2a1ba4ac"},
    {file = "orjson-3.11.5-cp310-cp310-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:42e8961196af655bb5e63ce6c60d25e8798cd4dfbc04f4203457fa3869322c2e"},
    {file = "orjson-3.11.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:75412ca06e20904c19170f8a24486c4e6c7887dea591ba18a1ab572f1300ee9f"},
    {file = "orjson-3.11.5-cp310-cp310-musllinux_1_2_aarch64.whl", hash = "sha256:6af8680328c69e15324b5af3ae38abbfcf9cbec37b5346ebfd52339c3d7e8a18"},
    {file = "orjson-3.11.5-cp310-cp310-musllinux_1_2_armv7l.whl", hash = "sha256:a86fe4ff4ea523eac8f4b57fdac319faf037d3c1be12405e6a7e86b3fbc4756a"},
    {file = "orjson-3.11.5-cp310-cp310-musllinux_1_2_i686.whl", hash = "sha256:e607b49b1a106ee2086633167033afbd63f76f2999e9236f638b06b112b24ea7"},
    {file = "orjson-3.11.5-cp310-cp310-musllinux_1_2_x86_64.whl", hash = "sha256:7339f41c244d0eea251637727f016b3d20050636695bc78345cce9029b189401"},
    {file = "orjson-3.11.5-cp310-cp310-win32.whl", hash = "sha256:8be318da8413cdbbce77b8c5fac8d13f6eb0f0db41b30bb598631412619572e8"},
    {file = "orjson-3.11.5-cp310-cp310-win_amd64.whl", hash = "sha256:b9f86d69ae822cabc2a0f6c099b43e8733dda788405cba2665595b7e8dd8d167"},
    {file = "orjson-3.11.5-cp311-cp311-macosx_10_15_x86_64.macosx_11_0_arm64.macosx_10_15_universal2.whl", hash = "sha256:9c8494625ad60a923af6b2b0bd74107146efe9b55099e20d7740d995f338fcd8"},
    {file = "orjson-3.11.5-cp311-cp311-macosx_15_0_arm64.whl", hash = "sha256:7bb2ce0b82bc9fd1168a513ddae7a857994b780b2945a8c51db4ab1c4b751ebc"},
    {file = "orjson-3.11.5-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:67394d3becd50b954c4ecd24ac90b5051ee7c903d167459f93e77fc6f5b4c968"},
    {file = "orjson-3.11.5-cp311-cp311-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:298d2451f375e5f17b897794bcc3e7b821c0f32b4788b9bcae47ada24d7f3cf7"},
    {file = "orjson-3.11.5-cp311-cp311-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:aa5e4244063db8e1d87e0f54c3f7522f14b2dc937e65d5241ef0076a096409fd"},
    {file = "orjson-3.11.5-cp311-cp311-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:1db2088b490761976c1b2e956d5d4e6409f3732e9d79cfa69f876c5248d1baf9"},
    {file = "orjson-3.11.5-cp311-cp311-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:c2ed66358f32c24e10ceea518e16eb3549e34f33a9d51f99ce23b0251776a1ef"},
    {file = "orjson-3.11.5-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:c2021afda46c1ed64d74b555065dbd4c2558d510d8cec5ea6a53001b3e5e82a9"},
    {file = "orjson-3.11.5-cp311-cp311-musllinux_1_2_aarch64.whl", hash = "sha256:b42ffbed9128e547a1647a3e50bc88ab28ae9daa61713962e0d3dd35e820c125"},
    {file = "orjson-3.11.5-cp311-cp311-musllinux_1_2_armv7l.whl", hash = "sha256:8d5f16195bb671a5dd3d1dbea758918bada8f6cc27de72bd64adfbd748770814"},
    {file = "orjson-3.11.5-cp311-cp311-musllinux_1_2_i686.whl", hash = "sha256:c0e5d9f7a0227df2927d343a6e3859bebf9208b427c79bd31949abcc2fa32fa5"},
    {file = "orjson-3.11.5-cp311-cp311-musllinux_1_2_x86_64.whl", hash = "sha256:23d04c4543e78f724c4dfe656b3791b5f98e4c9253e13b2636f1af5d90e4a880"},
    {file = "orjson-3.11.5-cp311-cp311-win32.whl", hash = "sha256:c404603df4865f8e0afe981aa3c4b62b406e6d06049564d58934860b62b7f91d"},
    {file = "orjson-3.11.5-cp311-cp311-win_amd64.whl", hash = "sha256:9645ef655735a74da4990c24ffbd6894828fbfa117bc97c1edd98c282ecb52e1"},
    {file = "orjson-3.11.5-cp311-cp311-win_arm64.whl", hash = "sha256:1cbf2735722623fcdee8e712cbaaab9e372bbcb0c7924ad711b261c2eccf4a5c"},
    {file = "orjson-3.11.5-cp312-cp312-macosx_10_15_x86_64.macosx_11_0_arm64.macosx_10_15_universal2.whl", hash = "sha256:334e5b4bff9ad101237c2d799d9fd45737752929753bf4faf4b207335a416b7d"},
    {file = "orjson-3.11.5-cp312-cp312-macosx_15_0_arm64.whl", hash = "sha256:ff770589960a86eae279f5d8aa536196ebda8273a2a07db2a54e82b93bc86626"},
    {file = "orjson-3.11.5-cp312-cp312-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:ed24250e55efbcb0b35bed7caaec8cedf858ab2f9f2201f17b8938c618c8ca6f"},
    {file = "orjson-3.11.5-cp312-cp312-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:a66d7769e98a08a12a139049aac2f0ca3adae989817f8c43337455fbc7669b85"},
    {file = "orjson-3.11.5-cp312-cp312-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:86cfc555bfd5794d24c6a1903e558b50644e5e68e6471d66502ce5cb5fdef3f9"},
    {file = "orjson-3.11.5-cp312-cp312-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:a230065027bc2a025e944f9d4714976a81e7ecfa940923283bca7bbc1f10f626"},
    {file = "orjson-3.11.5-cp312-cp312-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:b29d36b60e606df01959c4b982729c8845c69d1963f88686608be9ced96dbfaa"},
    {file = "orjson-3.11.5-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:c74099c6b230d4261fdc3169d50efc09abf38ace1a42ea2f9994b1d79153d477"},
    {file = "orjson-3.11.5-cp312-cp312-musllinux_1_2_aarch64.whl", hash = "sha256:e697d06ad57dd0c7a737771d470eedc18e68dfdefcdd3b7de7f33dfda5b6212e"},
    {file = "orjson-3.11.5-cp312-cp312-musllinux_1_2_armv7l.whl", hash = "sha256:e08ca8a6c851e95aaecc32bc44a5aa75d0ad26af8cdac7c77e4ed93acf3d5b69"},
    {file = "orjson-3.11.5-cp312-cp312-musllinux_1_2_i686.whl", hash = "sha256:e8b5f96c05fce7d0218df3fdfeb962d6b8cfff7e3e20264306b46dd8b217c0f3"},
    {file = "orjson-3.11.5-cp312-cp312-musllinux_1_2_x86_64.whl", hash = "sha256:ddbfdb5099b3e6ba6d6ea818f61997bb66de14b411357d24c4612cf1ebad08ca"},
    {file = "orjson-3.11.5-cp312-cp312-win32.whl", hash = "sha256:9172578c4eb09dbfcf1657d43198de59b6cef4054de385365060ed50c458ac98"},
    {file = "orjson-3.11.5-cp312-cp312-win_amd64.whl", hash = "sha256:2b91126e7b470ff2e75746f6f6ee32b9ab67b7a93c8ba1d15d3a0caaf16ec875"},
    {file = "orjson-3.11.5-cp312-cp312-win_arm64.whl", hash = "sha256:acbc5fac7e06777555b0722b8ad5f574739e99ffe99467ed63da98f97f9ca0fe"},
    {file = "orjson-3.11.5-cp313-cp313-macosx_10_15_x86_64.macosx_11_0_arm64.macosx_10_15_universal2.whl", hash = "sha256:3b01799262081a4c47c035dd77c1301d40f568f77cc7ec1bb7db5d63b0a01629"},
    {file = "orjson-3.11.5-cp313-cp313-macosx_15_0_arm64.whl", hash = "sha256:61de247948108484779f57a9f406e4c84d636fa5a59e411e6352484985e8a7c3"},
    {file = "orjson-3.11.5-cp313-cp313-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:894aea2e63d4f24a7f04a1908307c738d0dce992e9249e744b8f4e8dd9197f39"},
    {file = "orjson-3.11.5-cp313-cp313-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:ddc21521598dbe369d83d4d40338e23d4101dad21dae0e79fa20465dbace019f"},
    {file = "orjson-3.11.5-cp313-cp313-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:7cce16ae2f5fb2c53c3eafdd1706cb7b6530a67cc1c17abe8ec747f5cd7c0c51"},
    {file = "orjson-3.11.5-cp313-cp313-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:e46c762d9f0e1cfb4ccc8515de7f349abbc95b59cb5a2bd68df5973fdef913f8"},
    {file = "orjson-3.11.5-cp313-cp313-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:d7345c759276b798ccd6d77a87136029e71e66a8bbf2d2755cbdde1d82e78706"},
    {file = "orjson-3.11.5-cp313-cp313-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:75bc2e59e6a2ac1dd28901d07115abdebc4563b5b07dd612bf64260a201b1c7f"},
    {file = "orjson-3.11.5-cp313-cp313-musllinux_1_2_aarch64.whl", hash = "sha256:54aae9b654554c3b4edd61896b978568c6daa16af96fa4681c9b5babd469f863"},
    {file = "orjson-3.11.5-cp313-cp313-musllinux_1_2_armv7l.whl", hash = "sha256:4bdd8d164a871c4ec773f9de0f6fe8769c2d6727879c37a9666ba4183b7f8228"},
    {file = "orjson-3.11.5-cp313-cp313-musllinux_1_2_i686.whl", hash = "sha256:a261fef929bcf98a60713bf5e95ad067cea16ae345d9a35034e73c3990e927d2"},
    {file = "orjson-3.11.5-cp313-cp313-musllinux_1_2_x86_64.whl", hash = "sha256:c028a394c766693c5c9909dec76b24f37e6a1b91999e8d0c0d5feecbe93c3e05"},
    {file = "orjson-3.11.5-cp313-cp313-win32.whl", hash = "sha256:2cc79aaad1dfabe1bd2d50ee09814a1253164b3da4c00a78c458d82d04b3bdef"},
    {file = "orjson-3.11.5-cp313-cp313-win_amd64.whl", hash = "sha256:ff7877d376add4e16b274e35a3f58b7f37b362abf4aa31863dadacdd20e3a583"},
    {file = "orjson-3.11.5-cp313-cp313-win_arm64.whl", hash = "sha256:59ac72ea775c88b163ba8d21b0177628bd015c5dd060647bbab6e22da3aad287"},
    {file = "orjson-3.11.5-cp314-cp314-macosx_10_15_x86_64.macosx_11_0_arm64.macosx_10_15_universal2.whl", hash = "sha256:e446a8ea0a4c366ceafc7d97067bfd55292969143b57e3c846d87fc701e797a0"},
    {file = "orjson-3.11.5-cp314-cp314-macosx_15_0_arm64.whl", hash = "sha256:53deb5addae9c22bbe3739298f5f2196afa881ea75944e7720681c7080909a81"},
    {file = "orjson-3.11.5-cp314-cp314-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:82cd00d49d6063d2b8791da5d4f9d20539c5951f965e45ccf4e96d33505ce68f"},
    {file = "orjson-3.11.5-cp314-cp314-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:3fd15f9fc8c203aeceff4fda211157fad114dde66e92e24097b3647a08f4ee9e"},
    {file = "orjson-3.11.5-cp314-cp314-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:9df95000fbe6777bf9820ae82ab7578e8662051bb5f83d71a28992f539d2cda7"},
    {file = "orjson-3.11.5-cp314-cp314-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:92a8d676748fca47ade5bc3da7430ed7767afe51b2f8100e3cd65e151c0eaceb"},
    {file = "orjson-3.11.5-cp314-cp314-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:aa0f513be38b40234c77975e68805506cad5d57b3dfd8fe3baa7f4f4051e15b4"},
    {file = "orjson-3.11.5-cp314-cp314-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:fa1863e75b92891f553b7922ce4ee10ed06db061e104f2b7815de80cdcb135ad"},
    {file = "orjson-3.11.5-cp314-cp314-musllinux_1_2_aarch64.whl", hash = "sha256:d4be86b58e9ea262617b8ca6251a2f0d63cc132a6da4b5fcc8e0a4128782c829"},
    {file = "orjson-3.11.5-cp314-cp314-musllinux_1_2_armv7l.whl", hash = "sha256:b923c1c13fa02084eb38c9c065afd860a5cff58026813319a06949c3af5732ac"},
    {file = "orjson-3.11.5-cp314-cp314-musllinux_1_2_i686.whl", hash = "sha256:1b6bd351202b2cd987f35a13b5e16471cf4d952b42a73c391cc537974c43ef6d"},
    {file = "orjson-3.11.5-cp314-cp314-musllinux_1_2_x86_64.whl", hash = "sha256:bb150d529637d541e6af06bbe3d02f5498d628b7f98267ff87647584293ab439"},
    {file = "orjson-3.11.5-cp314-cp314-win32.whl", hash = "sha256:9cc1e55c884921434a84a0c3dd2699eb9f92e7b441d7f53f3941079ec6ce7499"},
    {file = "orjson-3.11.5-cp314-cp314-win_amd64.whl", hash = "sha256:a4f3cb2d874e03bc7767c8f88adaa1a9a05cecea3712649c3b58589ec7317310"},
    {file = "orjson-3.11.5-cp314-cp314-win_arm64.whl", hash = "sha256:38b22f476c351f9a1c43e5b07d8b5a02eb24a6ab8e75f700f7d479d4568346a5"},
    {file = "orjson-3.11.5-cp39-cp39-macosx_10_15_x86_64.macosx_11_0_arm64.macosx_10_15_universal2.whl", hash = "sha256:1b280e2d2d284a6713b0cfec7b08918ebe57df23e3f76b27586197afca3cb1e9"},
    {file = "orjson-3.11.5-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:3c8d8a112b274fae8c5f0f01954cb0480137072c271f3f4958127b010dfefaec"},
    {file = "orjson-3.11.5-cp39-cp39-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:5f0a2ae6f09ac7bd47d2d5a5305c1d9ed08ac057cda55bb0a49fa506f0d2da00"},
    {file = "orjson-3.11.5-cp39-cp39-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:c0d87bd1896faac0d10b4f849016db81a63e4ec5df38757ffae84d45ab38aa71"},
    {file = "orjson-3.11.5-cp39-cp39-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:801a821e8e6099b8c459ac7540b3c32dba6013437c57fdcaec205b169754f38c"},
    {file = "orjson-3.11.5-cp39-cp39-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:69a0f6ac618c98c74b7fbc8c0172ba86f9e01dbf9f62aa0b1776c2231a7bffe5"},
    {file = "orjson-3.11.5-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:fea7339bdd22e6f1060c55ac31b6a755d86a5b2ad3657f2669ec243f8e3b2bdb"},
    {file = "orjson-3.11.5-cp39-cp39-musllinux_1_2_aarch64.whl", hash = "sha256:4dad582bc93cef8f26513e12771e76385a7e6187fd713157e971c784112aad56"},
    {file = "orjson-3.11.5-cp39-cp39-musllinux_1_2_armv7l.whl", hash = "sha256:0522003e9f7fba91982e83a97fec0708f5a714c96c4209db7104e6b9d132f111"},
    {file = "orjson-3.11.5-cp39-cp39-musllinux_1_2_i686.whl", hash = "sha256:7403851e430a478440ecc1258bcbacbfbd8175f9ac1e39031a7121dd0de05ff8"},
    {file = "orjson-3.11.5-cp39-cp39-musllinux_1_2_x86_64.whl", hash = "sha256:5f691263425d3177977c8d1dd896cde7b98d93cbf390b2544a090675e83a6a0a"},
    {file = "orjson-3.11.5-cp39-cp39-win32.whl", hash = "sha256:61026196a1c4b968e1b1e540563e277843082e9e97d78afa03eb89315af531f1"},
    {file = "orjson-3.11.5-cp39-cp39-win_amd64.whl", hash = "sha256:09b94b947ac08586af635ef922d69dc9bc63321527a3a04647f4986a73f4bd30"},
    {file = "orjson-3.11.5.tar.gz", hash = "sha256:82393ab47b4fe44ffd0a7659fa9cfaacc717eb617c93cde83795f14af5c2e9d5"},
]

[[package]]
name = "packaging"
version = "25.0"
description = "Core utilities for Python packages"
optional = false
python-versions = ">=3.8"
groups = ["main", "dev"]
files = [
    {file = "packaging-25.0-py3-none-any.whl", hash = "sha256:29572ef2b1f17581046b3a2227d5c611fb25ec70ca1ba8554b24b0e69331a484"},
    {file = "packaging-25.0.tar.gz", hash = "sha256:d443872c98d677bf60f6a1f2f8c1cb748e8fe762d2bf9d3148b5599295b0fc4f"},
]

[[package]]
name = "pluggy"
version = "1.6.0"
description = "plugin and hook calling mechanisms for python"
optional = false
python-versions = ">=3.9"
groups = ["dev"]
files = [
    {file = "pluggy-1.6.0-py3-none-any.whl", hash = "sha256:e920276dd6813095e9377c0bc5566d94c932c33b27a3e3945d8389c374dd4746"},
    {file = "pluggy-1.6.0.tar.gz", hash = "sha256:7dcc130b76258d33b90f61b658791dede3486c3e6bfb003ee5c9bfb396dd22f3"},
]

[package.extras]
dev = ["pre-commit", "tox"]
testing = ["coverage", "pytest", "pytest-benchmark"]

[[package]]
name = "pydantic"
version = "2.12.5"
description = "Data validation using Python type hints"
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "pydantic-2.12.5-py3-none-any.whl", hash = "sha256:e561593fccf61e8a20fc46dfc2dfe075b8be7d0188df33f221ad1f0139180f9d"},
    {file = "pydantic-2.12.5.tar.gz", hash = "sha256:4d351024c75c0f085a9febbb665ce8c0c6ec5d30e903bdb6394b7ede26aebb49"},
]

[package.dependencies]
annotated-types = ">=0.6.0"
pydantic-core = "2.41.5"
typing-extensions = ">=4.14.1"
typing-inspection = ">=0.4.2"

[package.extras]
email = ["email-validator (>=2.0.0)"]
timezone = ["tzdata ; python_version >= \"3.9\" and platform_system == \"Windows\""]

[[package]]
name = "pydantic-core"
version = "2.41.5"
description = "Core functionality for Pydantic validation and serialization"
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "pydantic_core-2.41.5-cp310-cp310-macosx_10_12_x86_64.whl", hash = "sha256:77b63866ca88d804225eaa4af3e664c5faf3568cea95360d21f4725ab6e07146"},
    {file = "pydantic_core-2.41.5-cp310-cp310-macosx_11_0_arm64.whl", hash = "sha256:dfa8a0c812ac681395907e71e1274819dec685fec28273a28905df579ef137e2"},
    {file = "pydantic_core-2.41.5-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:5921a4d3ca3aee735d9fd163808f5e8dd6c6972101e4adbda9a4667908849b97"},
    {file = "pydantic_core-2.41.5-cp310-cp310-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:e25c479382d26a2a41b7ebea1043564a937db462816ea07afa8a44c0866d52f9"},
    {file = "pydantic_core-2.41.5-cp310-cp310-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:f547144f2966e1e16ae626d8ce72b4cfa0caedc7fa28052001c94fb2fcaa1c52"},
    {file = "pydantic_core-2.41.5-cp310-cp310-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:6f52298fbd394f9ed112d56f3d11aabd0d5bd27beb3084cc3d8ad069483b8941"},
    {file = "pydantic_core-2.41.5-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:100baa204bb412b74fe285fb0f3a385256dad1d1879f0a5cb1499ed2e83d132a"},
    {file = "pydantic_core-2.41.5-cp310-cp310-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:05a2c8852530ad2812cb7914dc61a1125dc4e06252ee98e5638a12da6cc6fb6c"},
    {file = "pydantic_core-2.41.5-cp310-cp310-musllinux_1_1_aarch64.whl", hash = "sha256:29452c56df2ed968d18d7e21f4ab0ac55e71dc59524872f6fc57dcf4a3249ed2"},
    {file = "pydantic_core-2.41.5-cp310-cp310-musllinux_1_1_armv7l.whl", hash = "sha256:d5160812ea7a8a2ffbe233d8da666880cad0cbaf5d4de74ae15c313213d62556"},
    {file = "pydantic_core-2.41.5-cp310-cp310-musllinux_1_1_x86_64.whl", hash = "sha256:df3959765b553b9440adfd3c795617c352154e497a4eaf3752555cfb5da8fc49"},
    {file = "pydantic_core-2.41.5-cp310-cp310-win32.whl", hash = "sha256:1f8d33a7f4d5a7889e60dc39856d76d09333d8a6ed0f5f1190635cbec70ec4ba"},
    {file = "pydantic_core-2.41.5-cp310-cp310-win_amd64.whl", hash = "sha256:62de39db01b8d593e45871af2af9e497295db8d73b085f6bfd0b18c83c70a8f9"},
    {file = "pydantic_core-2.41.5-cp311-cp311-macosx_10_12_x86_64.whl", hash = "sha256:a3a52f6156e73e7ccb0f8cced536adccb7042be67cb45f9562e12b319c119da6"},
    {file = "pydantic_core-2.41.5-cp311-cp311-macosx_11_0_arm64.whl", hash = "sha256:7f3bf998340c6d4b0c9a2f02d6a400e51f123b59565d74dc60d252ce888c260b"},
    {file = "pydantic_core-2.41.5-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:378bec5c66998815d224c9ca994f1e14c0c21cb95d2f52b6021cc0b2a58f2a5a"},
    {file = "pydantic_core-2.41.5-cp311-cp311-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:e7b576130c69225432866fe2f4a469a85a54ade141d96fd396dffcf607b558f8"},
    {file = "pydantic_core-2.41.5-cp311-cp311-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:6cb58b9c66f7e4179a2d5e0f849c48eff5c1fca560994d6eb6543abf955a149e"},
    {file = "pydantic_core-2.41.5-cp311-cp311-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:88942d3a3dff3afc8288c21e565e476fc278902ae4d6d134f1eeda118cc830b1"},
    {file = "pydantic_core-2.41.5-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:f31d95a179f8d64d90f6831d71fa93290893a33148d890ba15de25642c5d075b"},
    {file = "pydantic_core-2.41.5-cp311-cp311-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:c1df3d34aced70add6f867a8cf413e299177e0c22660cc767218373d0779487b"},
    {file = "pydantic_core-2.41.5-cp311-cp311-musllinux_1_1_aarch64.whl", hash = "sha256:4009935984bd36bd2c774e13f9a09563ce8de4abaa7226f5108262fa3e637284"},
    {file = "pydantic_core-2.41.5-cp311-cp311-musllinux_1_1_armv7l.whl", hash = "sha256:34a64bc3441dc1213096a20fe27e8e128bd3ff89921706e83c0b1ac971276594"},
    {file = "pydantic_core-2.41.5-cp311-cp311-musllinux_1_1_x86_64.whl", hash = "sha256:c9e19dd6e28fdcaa5a1de679aec4141f691023916427ef9bae8584f9c2fb3b0e"},
    {file = "pydantic_core-2.41.5-cp311-cp311-win32.whl", hash = "sha256:2c010c6ded393148374c0f6f0bf89d206bf3217f201faa0635dcd56bd1520f6b"},
    {file = "pydantic_core-2.41.5-cp311-cp311-win_amd64.whl", hash = "sha256:76ee27c6e9c7f16f47db7a94157112a2f3a00e958bc626e2f4ee8bec5c328fbe"},
    {file = "pydantic_core-2.41.5-cp311-cp311-win_arm64.whl", hash = "sha256:4bc36bbc0b7584de96561184ad7f012478987882ebf9f9c389b23f432ea3d90f"},
    {file = "pydantic_core-2.41.5-cp312-cp312-macosx_10_12_x86_64.whl", hash = "sha256:f41a7489d32336dbf2199c8c0a215390a751c5b014c2c1c5366e817202e9cdf7"},
    {file = "pydantic_core-2.41.5-cp312-cp312-macosx_11_0_arm64.whl", hash = "sha256:070259a8818988b9a84a449a2a7337c7f430a22acc0859c6b110aa7212a6d9c0"},
    {file = "pydantic_core-2.41.5-cp312-cp312-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:e96cea19e34778f8d59fe40775a7a574d95816eb150850a85a7a4c8f4b94ac69"},
    {file = "pydantic_core-2.41.5-cp312-cp312-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:ed2e99c456e3fadd05c991f8f437ef902e00eedf34320ba2b0842bd1c3ca3a75"},
    {file = "pydantic_core-2.41.5-cp312-cp312-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:65840751b72fbfd82c3c640cff9284545342a4f1eb1586ad0636955b261b0b05"},
    {file = "pydantic_core-2.41.5-cp312-cp312-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:e536c98a7626a98feb2d3eaf75944ef6f3dbee447e1f841eae16f2f0a72d8ddc"},
    {file = "pydantic_core-2.41.5-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:eceb81a8d74f9267ef4081e246ffd6d129da5d87e37a77c9bde550cb04870c1c"},
    {file = "pydantic_core-2.41.5-cp312-cp312-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:d38548150c39b74aeeb0ce8ee1d8e82696f4a4e16ddc6de7b1d8823f7de4b9b5"},
    {file = "pydantic_core-2.41.5-cp312-cp312-musllinux_1_1_aarch64.whl", hash = "sha256:c23e27686783f60290e36827f9c626e63154b82b116d7fe9adba1fda36da706c"},
    {file = "pydantic_core-2.41.5-cp312-cp312-musllinux_1_1_armv7l.whl", hash = "sha256:482c982f814460eabe1d3bb0adfdc583387bd4691ef00b90575ca0d2b6fe2294"},
    {file = "pydantic_core-2.41.5-cp312-cp312-musllinux_1_1_x86_64.whl", hash = "sha256:bfea2a5f0b4d8d43adf9d7b8bf019fb46fdd10a2e5cde477fbcb9d1fa08c68e1"},
    {file = "pydantic_core-2.41.5-cp312-cp312-win32.whl", hash = "sha256:b74557b16e390ec12dca509bce9264c3bbd128f8a2c376eaa68003d7f327276d"},
    {file = "pydantic_core-2.41.5-cp312-cp312-win_amd64.whl", hash = "sha256:1962293292865bca8e54702b08a4f26da73adc83dd1fcf26fbc875b35d81c815"},
    {file = "pydantic_core-2.41.5-cp312-cp312-win_arm64.whl", hash = "sha256:1746d4a3d9a794cacae06a5eaaccb4b8643a131d45fbc9af23e353dc0a5ba5c3"},
    {file = "pydantic_core-2.41.5-cp313-cp313-macosx_10_12_x86_64.whl", hash = "sha256:941103c9be18ac8daf7b7adca8228f8ed6bb7a1849020f643b3a14d15b1924d9"},
    {file = "pydantic_core-2.41.5-cp313-cp313-macosx_11_0_arm64.whl", hash = "sha256:112e305c3314f40c93998e567879e887a3160bb8689ef3d2c04b6cc62c33ac34"},
    {file = "pydantic_core-2.41.5-cp313-cp313-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:0cbaad15cb0c90aa221d43c00e77bb33c93e8d36e0bf74760cd00e732d10a6a0"},
    {file = "pydantic_core-2.41.5-cp313-cp313-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:03ca43e12fab6023fc79d28ca6b39b05f794ad08ec2feccc59a339b02f2b3d33"},
    {file = "pydantic_core-2.41.5-cp313-cp313-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:dc799088c08fa04e43144b164feb0c13f9a0bc40503f8df3e9fde58a3c0c101e"},
    {file = "pydantic_core-2.41.5-cp313-cp313-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:97aeba56665b4c3235a0e52b2c2f5ae9cd071b8a8310ad27bddb3f7fb30e9aa2"},
    {file = "pydantic_core-2.41.5-cp313-cp313-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:406bf18d345822d6c21366031003612b9c77b3e29ffdb0f612367352aab7d586"},
    {file = "pydantic_core-2.41.5-cp313-cp313-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:b93590ae81f7010dbe380cdeab6f515902ebcbefe0b9327cc4804d74e93ae69d"},
    {file = "pydantic_core-2.41.5-cp313-cp313-musllinux_1_1_aarch64.whl", hash = "sha256:01a3d0ab748ee531f4ea6c3e48ad9dac84ddba4b0d82291f87248f2f9de8d740"},
    {file = "pydantic_core-2.41.5-cp313-cp313-musllinux_1_1_armv7l.whl", hash = "sha256:6561e94ba9dacc9c61bce40e2d6bdc3bfaa0259d3ff36ace3b1e6901936d2e3e"},
    {file = "pydantic_core-2.41.5-cp313-cp313-musllinux_1_1_x86_64.whl", hash = "sha256:915c3d10f81bec3a74fbd4faebe8391013ba61e5a1a8d48c4455b923bdda7858"},
    {file = "pydantic_core-2.41.5-cp313-cp313-win32.whl", hash = "sha256:650ae77860b45cfa6e2cdafc42618ceafab3a2d9a3811fcfbd3bbf8ac3c40d36"},
    {file = "pydantic_core-2.41.5-cp313-cp313-win_amd64.whl", hash = "sha256:79ec52ec461e99e13791ec6508c722742ad745571f234ea6255bed38c6480f11"},
    {file = "pydantic_core-2.41.5-cp313-cp313-win_arm64.whl", hash = "sha256:3f84d5c1b4ab906093bdc1ff10484838aca54ef08de4afa9de0f5f14d69639cd"},
    {file = "pydantic_core-2.41.5-cp314-cp314-macosx_10_12_x86_64.whl", hash = "sha256:3f37a19d7ebcdd20b96485056ba9e8b304e27d9904d233d7b1015db320e51f0a"},
    {file = "pydantic_core-2.41.5-cp314-cp314-macosx_11_0_arm64.whl", hash = "sha256:1d1d9764366c73f996edd17abb6d9d7649a7eb690006ab6adbda117717099b14"},
    {file = "pydantic_core-2.41.5-cp314-cp314-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:25e1c2af0fce638d5f1988b686f3b3ea8cd7de5f244ca147c777769e798a9cd1"},
    {file = "pydantic_core-2.41.5-cp314-cp314-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:506d766a8727beef16b7adaeb8ee6217c64fc813646b424d0804d67c16eddb66"},
    {file = "pydantic_core-2.41.5-cp314-cp314-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:4819fa52133c9aa3c387b3328f25c1facc356491e6135b459f1de698ff64d869"},
    {file = "pydantic_core-2.41.5-cp314-cp314-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:2b761d210c9ea91feda40d25b4efe82a1707da2ef62901466a42492c028553a2"},
    {file = "pydantic_core-2.41.5-cp314-cp314-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:22f0fb8c1c583a3b6f24df2470833b40207e907b90c928cc8d3594b76f874375"},
    {file = "pydantic_core-2.41.5-cp314-cp314-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:2782c870e99878c634505236d81e5443092fba820f0373997ff75f90f68cd553"},
    {file = "pydantic_core-2.41.5-cp314-cp314-musllinux_1_1_aarch64.whl", hash = "sha256:0177272f88ab8312479336e1d777f6b124537d47f2123f89cb37e0accea97f90"},
    {file = "pydantic_core-2.41.5-cp314-cp314-musllinux_1_1_armv7l.whl", hash = "sha256:63510af5e38f8955b8ee5687740d6ebf7c2a0886d15a6d65c32814613681bc07"},
    {file = "pydantic_core-2.41.5-cp314-cp314-musllinux_1_1_x86_64.whl", hash = "sha256:e56ba91f47764cc14f1daacd723e3e82d1a89d783f0f5afe9c364b8bb491ccdb"},
    {file = "pydantic_core-2.41.5-cp314-cp314-win32.whl", hash = "sha256:aec5cf2fd867b4ff45b9959f8b20ea3993fc93e63c7363fe6851424c8a7e7c23"},
    {file = "pydantic_core-2.41.5-cp314-cp314-win_amd64.whl", hash = "sha256:8e7c86f27c585ef37c35e56a96363ab8de4e549a95512445b85c96d3e2f7c1bf"},
    {file = "pydantic_core-2.41.5-cp314-cp314-win_arm64.whl", hash = "sha256:e672ba74fbc2dc8eea59fb6d4aed6845e6905fc2a8afe93175d94a83ba2a01a0"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-macosx_10_12_x86_64.whl", hash = "sha256:8566def80554c3faa0e65ac30ab0932b9e3a5cd7f8323764303d468e5c37595a"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-macosx_11_0_arm64.whl", hash = "sha256:b80aa5095cd3109962a298ce14110ae16b8c1aece8b72f9dafe81cf597ad80b3"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:3006c3dd9ba34b0c094c544c6006cc79e87d8612999f1a5d43b769b89181f23c"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:72f6c8b11857a856bcfa48c86f5368439f74453563f951e473514579d44aa612"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:5cb1b2f9742240e4bb26b652a5aeb840aa4b417c7748b6f8387927bc6e45e40d"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:bd3d54f38609ff308209bd43acea66061494157703364ae40c951f83ba99a1a9"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:2ff4321e56e879ee8d2a879501c8e469414d948f4aba74a2d4593184eb326660"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:d0d2568a8c11bf8225044aa94409e21da0cb09dcdafe9ecd10250b2baad531a9"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-musllinux_1_1_aarch64.whl", hash = "sha256:a39455728aabd58ceabb03c90e12f71fd30fa69615760a075b9fec596456ccc3"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-musllinux_1_1_armv7l.whl", hash = "sha256:239edca560d05757817c13dc17c50766136d21f7cd0fac50295499ae24f90fdf"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-musllinux_1_1_x86_64.whl", hash = "sha256:2a5e06546e19f24c6a96a129142a75cee553cc018ffee48a460059b1185f4470"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-win32.whl", hash = "sha256:b4ececa40ac28afa90871c2cc2b9ffd2ff0bf749380fbdf57d165fd23da353aa"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-win_amd64.whl", hash = "sha256:80aa89cad80b32a912a65332f64a4450ed00966111b6615ca6816153d3585a8c"},
    {file = "pydantic_core-2.41.5-cp314-cp314t-win_arm64.whl", hash = "sha256:35b44f37a3199f771c3eaa53051bc8a70cd7b54f333531c59e29fd4db5d15008"},
    {file = "pydantic_core-2.41.5-cp39-cp39-macosx_10_12_x86_64.whl", hash = "sha256:8bfeaf8735be79f225f3fefab7f941c712aaca36f1128c9d7e2352ee1aa87bdf"},
    {file = "pydantic_core-2.41.5-cp39-cp39-macosx_11_0_arm64.whl", hash = "sha256:346285d28e4c8017da95144c7f3acd42740d637ff41946af5ce6e5e420502dd5"},
    {file = "pydantic_core-2.41.5-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:a75dafbf87d6276ddc5b2bf6fae5254e3d0876b626eb24969a574fff9149ee5d"},
    {file = "pydantic_core-2.41.5-cp39-cp39-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:7b93a4d08587e2b7e7882de461e82b6ed76d9026ce91ca7915e740ecc7855f60"},
    {file = "pydantic_core-2.41.5-cp39-cp39-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:e8465ab91a4bd96d36dde3263f06caa6a8a6019e4113f24dc753d79a8b3a3f82"},
    {file = "pydantic_core-2.41.5-cp39-cp39-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:299e0a22e7ae2b85c1a57f104538b2656e8ab1873511fd718a1c1c6f149b77b5"},
    {file = "pydantic_core-2.41.5-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:707625ef0983fcfb461acfaf14de2067c5942c6bb0f3b4c99158bed6fedd3cf3"},
    {file = "pydantic_core-2.41.5-cp39-cp39-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:f41eb9797986d6ebac5e8edff36d5cef9de40def462311b3eb3eeded1431e425"},
    {file = "pydantic_core-2.41.5-cp39-cp39-musllinux_1_1_aarch64.whl", hash = "sha256:0384e2e1021894b1ff5a786dbf94771e2986ebe2869533874d7e43bc79c6f504"},
    {file = "pydantic_core-2.41.5-cp39-cp39-musllinux_1_1_armv7l.whl", hash = "sha256:f0cd744688278965817fd0839c4a4116add48d23890d468bc436f78beb28abf5"},
    {file = "pydantic_core-2.41.5-cp39-cp39-musllinux_1_1_x86_64.whl", hash = "sha256:753e230374206729bf0a807954bcc6c150d3743928a73faffee51ac6557a03c3"},
    {file = "pydantic_core-2.41.5-cp39-cp39-win32.whl", hash = "sha256:873e0d5b4fb9b89ef7c2d2a963ea7d02879d9da0da8d9d4933dee8ee86a8b460"},
    {file = "pydantic_core-2.41.5-cp39-cp39-win_amd64.whl", hash = "sha256:e4f4a984405e91527a0d62649ee21138f8e3d0ef103be488c1dc11a80d7f184b"},
    {file = "pydantic_core-2.41.5-graalpy311-graalpy242_311_native-macosx_10_12_x86_64.whl", hash = "sha256:b96d5f26b05d03cc60f11a7761a5ded1741da411e7fe0909e27a5e6a0cb7b034"},
    {file = "pydantic_core-2.41.5-graalpy311-graalpy242_311_native-macosx_11_0_arm64.whl", hash = "sha256:634e8609e89ceecea15e2d61bc9ac3718caaaa71963717bf3c8f38bfde64242c"},
    {file = "pydantic_core-2.41.5-graalpy311-graalpy242_311_native-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:93e8740d7503eb008aa2df04d3b9735f845d43ae845e6dcd2be0b55a2da43cd2"},
    {file = "pydantic_core-2.41.5-graalpy311-graalpy242_311_native-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:f15489ba13d61f670dcc96772e733aad1a6f9c429cc27574c6cdaed82d0146ad"},
    {file = "pydantic_core-2.41.5-graalpy312-graalpy250_312_native-macosx_10_12_x86_64.whl", hash = "sha256:7da7087d756b19037bc2c06edc6c170eeef3c3bafcb8f532ff17d64dc427adfd"},
    {file = "pydantic_core-2.41.5-graalpy312-graalpy250_312_native-macosx_11_0_arm64.whl", hash = "sha256:aabf5777b5c8ca26f7824cb4a120a740c9588ed58df9b2d196ce92fba42ff8dc"},
    {file = "pydantic_core-2.41.5-graalpy312-graalpy250_312_native-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:c007fe8a43d43b3969e8469004e9845944f1a80e6acd47c150856bb87f230c56"},
    {file = "pydantic_core-2.41.5-graalpy312-graalpy250_312_native-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:76d0819de158cd855d1cbb8fcafdf6f5cf1eb8e470abe056d5d161106e38062b"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-macosx_10_12_x86_64.whl", hash = "sha256:b5819cd790dbf0c5eb9f82c73c16b39a65dd6dd4d1439dcdea7816ec9adddab8"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-macosx_11_0_arm64.whl", hash = "sha256:5a4e67afbc95fa5c34cf27d9089bca7fcab4e51e57278d710320a70b956d1b9a"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:ece5c59f0ce7d001e017643d8d24da587ea1f74f6993467d85ae8a5ef9d4f42b"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:16f80f7abe3351f8ea6858914ddc8c77e02578544a0ebc15b4c2e1a0e813b0b2"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-musllinux_1_1_aarch64.whl", hash = "sha256:33cb885e759a705b426baada1fe68cbb0a2e68e34c5d0d0289a364cf01709093"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-musllinux_1_1_armv7l.whl", hash = "sha256:c8d8b4eb992936023be7dee581270af5c6e0697a8559895f527f5b7105ecd36a"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-musllinux_1_1_x86_64.whl", hash = "sha256:242a206cd0318f95cd21bdacff3fcc3aab23e79bba5cac3db5a841c9ef9c6963"},
    {file = "pydantic_core-2.41.5-pp310-pypy310_pp73-win_amd64.whl", hash = "sha256:d3a978c4f57a597908b7e697229d996d77a6d3c94901e9edee593adada95ce1a"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-macosx_10_12_x86_64.whl", hash = "sha256:b2379fa7ed44ddecb5bfe4e48577d752db9fc10be00a6b7446e9663ba143de26"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-macosx_11_0_arm64.whl", hash = "sha256:266fb4cbf5e3cbd0b53669a6d1b039c45e3ce651fd5442eff4d07c2cc8d66808"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:58133647260ea01e4d0500089a8c4f07bd7aa6ce109682b1426394988d8aaacc"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-manylinux_2_5_i686.manylinux1_i686.whl", hash = "sha256:287dad91cfb551c363dc62899a80e9e14da1f0e2b6ebde82c806612ca2a13ef1"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-musllinux_1_1_aarch64.whl", hash = "sha256:03b77d184b9eb40240ae9fd676ca364ce1085f203e1b1256f8ab9984dca80a84"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-musllinux_1_1_armv7l.whl", hash = "sha256:a668ce24de96165bb239160b3d854943128f4334822900534f2fe947930e5770"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-musllinux_1_1_x86_64.whl", hash = "sha256:f14f8f046c14563f8eb3f45f499cc658ab8d10072961e07225e507adb700e93f"},
    {file = "pydantic_core-2.41.5-pp311-pypy311_pp73-win_amd64.whl", hash = "sha256:56121965f7a4dc965bff783d70b907ddf3d57f6eba29b6d2e5dabfaf07799c51"},
    {file = "pydantic_core-2.41.5.tar.gz", hash = "sha256:08daa51ea16ad373ffd5e7606252cc32f07bc72b28284b6bc9c6df804816476e"},
]

[package.dependencies]
typing-extensions = ">=4.14.1"

[[package]]
name = "pydantic-settings"
version = "2.12.0"
description = "Settings management using Pydantic"
optional = false
python-versions = ">=3.10"
groups = ["main"]
files = [
    {file = "pydantic_settings-2.12.0-py3-none-any.whl", hash = "sha256:fddb9fd99a5b18da837b29710391e945b1e30c135477f484084ee513adb93809"},
    {file = "pydantic_settings-2.12.0.tar.gz", hash = "sha256:005538ef951e3c2a68e1c08b292b5f2e71490def8589d4221b95dab00dafcfd0"},
]

[package.dependencies]
pydantic = ">=2.7.0"
python-dotenv = ">=0.21.0"
typing-inspection = ">=0.4.0"

[package.extras]
aws-secrets-manager = ["boto3 (>=1.35.0)", "boto3-stubs[secretsmanager]"]
azure-key-vault = ["azure-identity (>=1.16.0)", "azure-keyvault-secrets (>=4.8.0)"]
gcp-secret-manager = ["google-cloud-secret-manager (>=2.23.1)"]
toml = ["tomli (>=2.0.1)"]
yaml = ["pyyaml (>=6.0.1)"]

[[package]]
name = "pytest"
version = "7.4.4"
description = "pytest: simple powerful testing with Python"
optional = false
python-versions = ">=3.7"
groups = ["dev"]
files = [
    {file = "pytest-7.4.4-py3-none-any.whl", hash = "sha256:b090cdf5ed60bf4c45261be03239c2c1c22df034fbffe691abe93cd80cea01d8"},
    {file = "pytest-7.4.4.tar.gz", hash = "sha256:2cf0005922c6ace4a3e2ec8b4080eb0d9753fdc93107415332f50ce9e7994280"},
]

[package.dependencies]
colorama = {version = "*", markers = "sys_platform == \"win32\""}
exceptiongroup = {version = ">=1.0.0rc8", markers = "python_version < \"3.11\""}
iniconfig = "*"
packaging = "*"
pluggy = ">=0.12,<2.0"
tomli = {version = ">=1.0.0", markers = "python_version < \"3.11\""}

[package.extras]
testing = ["argcomplete", "attrs (>=19.2.0)", "hypothesis (>=3.56)", "mock", "nose", "pygments (>=2.7.2)", "requests", "setuptools", "xmlschema"]

[[package]]
name = "pytest-asyncio"
version = "0.21.2"
description = "Pytest support for asyncio"
optional = false
python-versions = ">=3.7"
groups = ["dev"]
files = [
    {file = "pytest_asyncio-0.21.2-py3-none-any.whl", hash = "sha256:ab664c88bb7998f711d8039cacd4884da6430886ae8bbd4eded552ed2004f16b"},
    {file = "pytest_asyncio-0.21.2.tar.gz", hash = "sha256:d67738fc232b94b326b9d060750beb16e0074210b98dd8b58a5239fa2a154f45"},
]

[package.dependencies]
pytest = ">=7.0.0"

[package.extras]
docs = ["sphinx (>=5.3)", "sphinx-rtd-theme (>=1.0)"]
testing = ["coverage (>=6.2)", "flaky (>=3.5.0)", "hypothesis (>=5.7.1)", "mypy (>=0.931)", "pytest-trio (>=0.7.0)"]

[[package]]
name = "python-dotenv"
version = "1.2.1"
description = "Read key-value pairs from a .env file and set them as environment variables"
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "python_dotenv-1.2.1-py3-none-any.whl", hash = "sha256:b81ee9561e9ca4004139c6cbba3a238c32b03e4894671e181b671e8cb8425d61"},
    {file = "python_dotenv-1.2.1.tar.gz", hash = "sha256:42667e897e16ab0d66954af0e60a9caa94f0fd4ecf3aaf6d2d260eec1aa36ad6"},
]

[package.extras]
cli = ["click (>=5.0)"]

[[package]]
name = "pyyaml"
version = "6.0.3"
description = "YAML parser and emitter for Python"
optional = false
python-versions = ">=3.8"
groups = ["main"]
files = [
    {file = "PyYAML-6.0.3-cp38-cp38-macosx_10_13_x86_64.whl", hash = "sha256:c2514fceb77bc5e7a2f7adfaa1feb2fb311607c9cb518dbc378688ec73d8292f"},
    {file = "PyYAML-6.0.3-cp38-cp38-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:9c57bb8c96f6d1808c030b1687b9b5fb476abaa47f0db9c0101f5e9f394e97f4"},
    {file = "PyYAML-6.0.3-cp38-cp38-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:efd7b85f94a6f21e4932043973a7ba2613b059c4a000551892ac9f1d11f5baf3"},
    {file = "PyYAML-6.0.3-cp38-cp38-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:22ba7cfcad58ef3ecddc7ed1db3409af68d023b7f940da23c6c2a1890976eda6"},
    {file = "PyYAML-6.0.3-cp38-cp38-musllinux_1_2_x86_64.whl", hash = "sha256:6344df0d5755a2c9a276d4473ae6b90647e216ab4757f8426893b5dd2ac3f369"},
    {file = "PyYAML-6.0.3-cp38-cp38-win32.whl", hash = "sha256:3ff07ec89bae51176c0549bc4c63aa6202991da2d9a6129d7aef7f1407d3f295"},
    {file = "PyYAML-6.0.3-cp38-cp38-win_amd64.whl", hash = "sha256:5cf4e27da7e3fbed4d6c3d8e797387aaad68102272f8f9752883bc32d61cb87b"},
    {file = "pyyaml-6.0.3-cp310-cp310-macosx_10_13_x86_64.whl", hash = "sha256:214ed4befebe12df36bcc8bc2b64b396ca31be9304b8f59e25c11cf94a4c033b"},
    {file = "pyyaml-6.0.3-cp310-cp310-macosx_11_0_arm64.whl", hash = "sha256:02ea2dfa234451bbb8772601d7b8e426c2bfa197136796224e50e35a78777956"},
    {file = "pyyaml-6.0.3-cp310-cp310-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:b30236e45cf30d2b8e7b3e85881719e98507abed1011bf463a8fa23e9c3e98a8"},
    {file = "pyyaml-6.0.3-cp310-cp310-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:66291b10affd76d76f54fad28e22e51719ef9ba22b29e1d7d03d6777a9174198"},
    {file = "pyyaml-6.0.3-cp310-cp310-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:9c7708761fccb9397fe64bbc0395abcae8c4bf7b0eac081e12b809bf47700d0b"},
    {file = "pyyaml-6.0.3-cp310-cp310-musllinux_1_2_aarch64.whl", hash = "sha256:418cf3f2111bc80e0933b2cd8cd04f286338bb88bdc7bc8e6dd775ebde60b5e0"},
    {file = "pyyaml-6.0.3-cp310-cp310-musllinux_1_2_x86_64.whl", hash = "sha256:5e0b74767e5f8c593e8c9b5912019159ed0533c70051e9cce3e8b6aa699fcd69"},
    {file = "pyyaml-6.0.3-cp310-cp310-win32.whl", hash = "sha256:28c8d926f98f432f88adc23edf2e6d4921ac26fb084b028c733d01868d19007e"},
    {file = "pyyaml-6.0.3-cp310-cp310-win_amd64.whl", hash = "sha256:bdb2c67c6c1390b63c6ff89f210c8fd09d9a1217a465701eac7316313c915e4c"},
    {file = "pyyaml-6.0.3-cp311-cp311-macosx_10_13_x86_64.whl", hash = "sha256:44edc647873928551a01e7a563d7452ccdebee747728c1080d881d68af7b997e"},
    {file = "pyyaml-6.0.3-cp311-cp311-macosx_11_0_arm64.whl", hash = "sha256:652cb6edd41e718550aad172851962662ff2681490a8a711af6a4d288dd96824"},
    {file = "pyyaml-6.0.3-cp311-cp311-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:10892704fc220243f5305762e276552a0395f7beb4dbf9b14ec8fd43b57f126c"},
    {file = "pyyaml-6.0.3-cp311-cp311-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:850774a7879607d3a6f50d36d04f00ee69e7fc816450e5f7e58d7f17f1ae5c00"},
    {file = "pyyaml-6.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:b8bb0864c5a28024fac8a632c443c87c5aa6f215c0b126c449ae1a150412f31d"},
    {file = "pyyaml-6.0.3-cp311-cp311-musllinux_1_2_aarch64.whl", hash = "sha256:1d37d57ad971609cf3c53ba6a7e365e40660e3be0e5175fa9f2365a379d6095a"},
    {file = "pyyaml-6.0.3-cp311-cp311-musllinux_1_2_x86_64.whl", hash = "sha256:37503bfbfc9d2c40b344d06b2199cf0e96e97957ab1c1b546fd4f87e53e5d3e4"},
    {file = "pyyaml-6.0.3-cp311-cp311-win32.whl", hash = "sha256:8098f252adfa6c80ab48096053f512f2321f0b998f98150cea9bd23d83e1467b"},
    {file = "pyyaml-6.0.3-cp311-cp311-win_amd64.whl", hash = "sha256:9f3bfb4965eb874431221a3ff3fdcddc7e74e3b07799e0e84ca4a0f867d449bf"},
    {file = "pyyaml-6.0.3-cp312-cp312-macosx_10_13_x86_64.whl", hash = "sha256:7f047e29dcae44602496db43be01ad42fc6f1cc0d8cd6c83d342306c32270196"},
    {file = "pyyaml-6.0.3-cp312-cp312-macosx_11_0_arm64.whl", hash = "sha256:fc09d0aa354569bc501d4e787133afc08552722d3ab34836a80547331bb5d4a0"},
    {file = "pyyaml-6.0.3-cp312-cp312-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:9149cad251584d5fb4981be1ecde53a1ca46c891a79788c0df828d2f166bda28"},
    {file = "pyyaml-6.0.3-cp312-cp312-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:5fdec68f91a0c6739b380c83b951e2c72ac0197ace422360e6d5a959d8d97b2c"},
    {file = "pyyaml-6.0.3-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:ba1cc08a7ccde2d2ec775841541641e4548226580ab850948cbfda66a1befcdc"},
    {file = "pyyaml-6.0.3-cp312-cp312-musllinux_1_2_aarch64.whl", hash = "sha256:8dc52c23056b9ddd46818a57b78404882310fb473d63f17b07d5c40421e47f8e"},
    {file = "pyyaml-6.0.3-cp312-cp312-musllinux_1_2_x86_64.whl", hash = "sha256:41715c910c881bc081f1e8872880d3c650acf13dfa8214bad49ed4cede7c34ea"},
    {file = "pyyaml-6.0.3-cp312-cp312-win32.whl", hash = "sha256:96b533f0e99f6579b3d4d4995707cf36df9100d67e0c8303a0c55b27b5f99bc5"},
    {file = "pyyaml-6.0.3-cp312-cp312-win_amd64.whl", hash = "sha256:5fcd34e47f6e0b794d17de1b4ff496c00986e1c83f7ab2fb8fcfe9616ff7477b"},
    {file = "pyyaml-6.0.3-cp312-cp312-win_arm64.whl", hash = "sha256:64386e5e707d03a7e172c0701abfb7e10f0fb753ee1d773128192742712a98fd"},
    {file = "pyyaml-6.0.3-cp313-cp313-macosx_10_13_x86_64.whl", hash = "sha256:8da9669d359f02c0b91ccc01cac4a67f16afec0dac22c2ad09f46bee0697eba8"},
    {file = "pyyaml-6.0.3-cp313-cp313-macosx_11_0_arm64.whl", hash = "sha256:2283a07e2c21a2aa78d9c4442724ec1eb15f5e42a723b99cb3d822d48f5f7ad1"},
    {file = "pyyaml-6.0.3-cp313-cp313-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:ee2922902c45ae8ccada2c5b501ab86c36525b883eff4255313a253a3160861c"},
    {file = "pyyaml-6.0.3-cp313-cp313-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:a33284e20b78bd4a18c8c2282d549d10bc8408a2a7ff57653c0cf0b9be0afce5"},
    {file = "pyyaml-6.0.3-cp313-cp313-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:0f29edc409a6392443abf94b9cf89ce99889a1dd5376d94316ae5145dfedd5d6"},
    {file = "pyyaml-6.0.3-cp313-cp313-musllinux_1_2_aarch64.whl", hash = "sha256:f7057c9a337546edc7973c0d3ba84ddcdf0daa14533c2065749c9075001090e6"},
    {file = "pyyaml-6.0.3-cp313-cp313-musllinux_1_2_x86_64.whl", hash = "sha256:eda16858a3cab07b80edaf74336ece1f986ba330fdb8ee0d6c0d68fe82bc96be"},
    {file = "pyyaml-6.0.3-cp313-cp313-win32.whl", hash = "sha256:d0eae10f8159e8fdad514efdc92d74fd8d682c933a6dd088030f3834bc8e6b26"},
    {file = "pyyaml-6.0.3-cp313-cp313-win_amd64.whl", hash = "sha256:79005a0d97d5ddabfeeea4cf676af11e647e41d81c9a7722a193022accdb6b7c"},
    {file = "pyyaml-6.0.3-cp313-cp313-win_arm64.whl", hash = "sha256:5498cd1645aa724a7c71c8f378eb29ebe23da2fc0d7a08071d89469bf1d2defb"},
    {file = "pyyaml-6.0.3-cp314-cp314-macosx_10_13_x86_64.whl", hash = "sha256:8d1fab6bb153a416f9aeb4b8763bc0f22a5586065f86f7664fc23339fc1c1fac"},
    {file = "pyyaml-6.0.3-cp314-cp314-macosx_11_0_arm64.whl", hash = "sha256:34d5fcd24b8445fadc33f9cf348c1047101756fd760b4dacb5c3e99755703310"},
    {file = "pyyaml-6.0.3-cp314-cp314-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:501a031947e3a9025ed4405a168e6ef5ae3126c59f90ce0cd6f2bfc477be31b7"},
    {file = "pyyaml-6.0.3-cp314-cp314-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:b3bc83488de33889877a0f2543ade9f70c67d66d9ebb4ac959502e12de895788"},
    {file = "pyyaml-6.0.3-cp314-cp314-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:c458b6d084f9b935061bc36216e8a69a7e293a2f1e68bf956dcd9e6cbcd143f5"},
    {file = "pyyaml-6.0.3-cp314-cp314-musllinux_1_2_aarch64.whl", hash = "sha256:7c6610def4f163542a622a73fb39f534f8c101d690126992300bf3207eab9764"},
    {file = "pyyaml-6.0.3-cp314-cp314-musllinux_1_2_x86_64.whl", hash = "sha256:5190d403f121660ce8d1d2c1bb2ef1bd05b5f68533fc5c2ea899bd15f4399b35"},
    {file = "pyyaml-6.0.3-cp314-cp314-win_amd64.whl", hash = "sha256:4a2e8cebe2ff6ab7d1050ecd59c25d4c8bd7e6f400f5f82b96557ac0abafd0ac"},
    {file = "pyyaml-6.0.3-cp314-cp314-win_arm64.whl", hash = "sha256:93dda82c9c22deb0a405ea4dc5f2d0cda384168e466364dec6255b293923b2f3"},
    {file = "pyyaml-6.0.3-cp314-cp314t-macosx_10_13_x86_64.whl", hash = "sha256:02893d100e99e03eda1c8fd5c441d8c60103fd175728e23e431db1b589cf5ab3"},
    {file = "pyyaml-6.0.3-cp314-cp314t-macosx_11_0_arm64.whl", hash = "sha256:c1ff362665ae507275af2853520967820d9124984e0f7466736aea23d8611fba"},
    {file = "pyyaml-6.0.3-cp314-cp314t-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:6adc77889b628398debc7b65c073bcb99c4a0237b248cacaf3fe8a557563ef6c"},
    {file = "pyyaml-6.0.3-cp314-cp314t-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:a80cb027f6b349846a3bf6d73b5e95e782175e52f22108cfa17876aaeff93702"},
    {file = "pyyaml-6.0.3-cp314-cp314t-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:00c4bdeba853cc34e7dd471f16b4114f4162dc03e6b7afcc2128711f0eca823c"},
    {file = "pyyaml-6.0.3-cp314-cp314t-musllinux_1_2_aarch64.whl", hash = "sha256:66e1674c3ef6f541c35191caae2d429b967b99e02040f5ba928632d9a7f0f065"},
    {file = "pyyaml-6.0.3-cp314-cp314t-musllinux_1_2_x86_64.whl", hash = "sha256:16249ee61e95f858e83976573de0f5b2893b3677ba71c9dd36b9cf8be9ac6d65"},
    {file = "pyyaml-6.0.3-cp314-cp314t-win_amd64.whl", hash = "sha256:4ad1906908f2f5ae4e5a8ddfce73c320c2a1429ec52eafd27138b7f1cbe341c9"},
    {file = "pyyaml-6.0.3-cp314-cp314t-win_arm64.whl", hash = "sha256:ebc55a14a21cb14062aa4162f906cd962b28e2e9ea38f9b4391244cd8de4ae0b"},
    {file = "pyyaml-6.0.3-cp39-cp39-macosx_10_13_x86_64.whl", hash = "sha256:b865addae83924361678b652338317d1bd7e79b1f4596f96b96c77a5a34b34da"},
    {file = "pyyaml-6.0.3-cp39-cp39-macosx_11_0_arm64.whl", hash = "sha256:c3355370a2c156cffb25e876646f149d5d68f5e0a3ce86a5084dd0b64a994917"},
    {file = "pyyaml-6.0.3-cp39-cp39-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:3c5677e12444c15717b902a5798264fa7909e41153cdf9ef7ad571b704a63dd9"},
    {file = "pyyaml-6.0.3-cp39-cp39-manylinux2014_s390x.manylinux_2_17_s390x.manylinux_2_28_s390x.whl", hash = "sha256:5ed875a24292240029e4483f9d4a4b8a1ae08843b9c54f43fcc11e404532a8a5"},
    {file = "pyyaml-6.0.3-cp39-cp39-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:0150219816b6a1fa26fb4699fb7daa9caf09eb1999f3b70fb6e786805e80375a"},
    {file = "pyyaml-6.0.3-cp39-cp39-musllinux_1_2_aarch64.whl", hash = "sha256:fa160448684b4e94d80416c0fa4aac48967a969efe22931448d853ada8baf926"},
    {file = "pyyaml-6.0.3-cp39-cp39-musllinux_1_2_x86_64.whl", hash = "sha256:27c0abcb4a5dac13684a37f76e701e054692a9b2d3064b70f5e4eb54810553d7"},
    {file = "pyyaml-6.0.3-cp39-cp39-win32.whl", hash = "sha256:1ebe39cb5fc479422b83de611d14e2c0d3bb2a18bbcb01f229ab3cfbd8fee7a0"},
    {file = "pyyaml-6.0.3-cp39-cp39-win_amd64.whl", hash = "sha256:2e71d11abed7344e42a8849600193d15b6def118602c4c176f748e4583246007"},
    {file = "pyyaml-6.0.3.tar.gz", hash = "sha256:d76623373421df22fb4cf8817020cbb7ef15c725b9d5e45f17e189bfc384190f"},
]

[[package]]
name = "requests"
version = "2.32.5"
description = "Python HTTP for Humans."
optional = false
python-versions = ">=3.9"
groups = ["dev"]
files = [
    {file = "requests-2.32.5-py3-none-any.whl", hash = "sha256:2462f94637a34fd532264295e186976db0f5d453d1cdd31473c85a6a161affb6"},
    {file = "requests-2.32.5.tar.gz", hash = "sha256:dbba0bac56e100853db0ea71b82b4dfd5fe2bf6d3754a8893c3af500cec7d7cf"},
]

[package.dependencies]
certifi = ">=2017.4.17"
charset_normalizer = ">=2,<4"
idna = ">=2.5,<4"
urllib3 = ">=1.21.1,<3"

[package.extras]
socks = ["PySocks (>=1.5.6,!=1.5.7)"]
use-chardet-on-py3 = ["chardet (>=3.0.2,<6)"]

[[package]]
name = "sniffio"
version = "1.3.1"
description = "Sniff out which async library your code is running under"
optional = false
python-versions = ">=3.7"
groups = ["main", "dev"]
files = [
    {file = "sniffio-1.3.1-py3-none-any.whl", hash = "sha256:2f6da418d1f1e0fddd844478f41680e794e6051915791a034ff65e5f100525a2"},
    {file = "sniffio-1.3.1.tar.gz", hash = "sha256:f4324edc670a0f49750a81b895f35c3adb843cca46f0530f79fc1babb23789dc"},
]

[[package]]
name = "sortedcontainers"
version = "2.4.0"
description = "Sorted Containers -- Sorted List, Sorted Dict, Sorted Set"
optional = false
python-versions = "*"
groups = ["dev"]
files = [
    {file = "sortedcontainers-2.4.0-py2.py3-none-any.whl", hash = "sha256:a163dcaede0f1c021485e957a39245190e74249897e2ae4b2aa38595db237ee0"},
    {file = "sortedcontainers-2.4.0.tar.gz", hash = "sha256:25caa5a06cc30b6b83d11423433f65d1f9d76c4c6a0c90e3379eaa43b9bfdb88"},
]

[[package]]
name = "starlette"
version = "0.27.0"
description = "The little ASGI library that shines."
optional = false
python-versions = ">=3.7"
groups = ["main"]
files = [
    {file = "starlette-0.27.0-py3-none-any.whl", hash = "sha256:918416370e846586541235ccd38a474c08b80443ed31c578a418e2209b3eef91"},
    {file = "starlette-0.27.0.tar.gz", hash = "sha256:6a6b0d042acb8d469a01eba54e9cda6cbd24ac602c4cd016723117d6a7e73b75"},
]

[package.dependencies]
anyio = ">=3.4.0,<5"

[package.extras]
full = ["httpx (>=0.22.0)", "itsdangerous", "jinja2", "python-multipart", "pyyaml"]

[[package]]
name = "tomli"
version = "2.3.0"
description = "A lil' TOML parser"
optional = false
python-versions = ">=3.8"
groups = ["dev"]
markers = "python_version == \"3.10\""
files = [
    {file = "tomli-2.3.0-cp311-cp311-macosx_10_9_x86_64.whl", hash = "sha256:88bd15eb972f3664f5ed4b57c1634a97153b4bac4479dcb6a495f41921eb7f45"},
    {file = "tomli-2.3.0-cp311-cp311-macosx_11_0_arm64.whl", hash = "sha256:883b1c0d6398a6a9d29b508c331fa56adbcdff647f6ace4dfca0f50e90dfd0ba"},
    {file = "tomli-2.3.0-cp311-cp311-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:d1381caf13ab9f300e30dd8feadb3de072aeb86f1d34a8569453ff32a7dea4bf"},
    {file = "tomli-2.3.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:a0e285d2649b78c0d9027570d4da3425bdb49830a6156121360b3f8511ea3441"},
    {file = "tomli-2.3.0-cp311-cp311-musllinux_1_2_aarch64.whl", hash = "sha256:0a154a9ae14bfcf5d8917a59b51ffd5a3ac1fd149b71b47a3a104ca4edcfa845"},
    {file = "tomli-2.3.0-cp311-cp311-musllinux_1_2_x86_64.whl", hash = "sha256:74bf8464ff93e413514fefd2be591c3b0b23231a77f901db1eb30d6f712fc42c"},
    {file = "tomli-2.3.0-cp311-cp311-win32.whl", hash = "sha256:00b5f5d95bbfc7d12f91ad8c593a1659b6387b43f054104cda404be6bda62456"},
    {file = "tomli-2.3.0-cp311-cp311-win_amd64.whl", hash = "sha256:4dc4ce8483a5d429ab602f111a93a6ab1ed425eae3122032db7e9acf449451be"},
    {file = "tomli-2.3.0-cp312-cp312-macosx_10_13_x86_64.whl", hash = "sha256:d7d86942e56ded512a594786a5ba0a5e521d02529b3826e7761a05138341a2ac"},
    {file = "tomli-2.3.0-cp312-cp312-macosx_11_0_arm64.whl", hash = "sha256:73ee0b47d4dad1c5e996e3cd33b8a76a50167ae5f96a2607cbe8cc773506ab22"},
    {file = "tomli-2.3.0-cp312-cp312-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:792262b94d5d0a466afb5bc63c7daa9d75520110971ee269152083270998316f"},
    {file = "tomli-2.3.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:4f195fe57ecceac95a66a75ac24d9d5fbc98ef0962e09b2eddec5d39375aae52"},
    {file = "tomli-2.3.0-cp312-cp312-musllinux_1_2_aarch64.whl", hash = "sha256:e31d432427dcbf4d86958c184b9bfd1e96b5b71f8eb17e6d02531f434fd335b8"},
    {file = "tomli-2.3.0-cp312-cp312-musllinux_1_2_x86_64.whl", hash = "sha256:7b0882799624980785240ab732537fcfc372601015c00f7fc367c55308c186f6"},
    {file = "tomli-2.3.0-cp312-cp312-win32.whl", hash = "sha256:ff72b71b5d10d22ecb084d345fc26f42b5143c5533db5e2eaba7d2d335358876"},
    {file = "tomli-2.3.0-cp312-cp312-win_amd64.whl", hash = "sha256:1cb4ed918939151a03f33d4242ccd0aa5f11b3547d0cf30f7c74a408a5b99878"},
    {file = "tomli-2.3.0-cp313-cp313-macosx_10_13_x86_64.whl", hash = "sha256:5192f562738228945d7b13d4930baffda67b69425a7f0da96d360b0a3888136b"},
    {file = "tomli-2.3.0-cp313-cp313-macosx_11_0_arm64.whl", hash = "sha256:be71c93a63d738597996be9528f4abe628d1adf5e6eb11607bc8fe1a510b5dae"},
    {file = "tomli-2.3.0-cp313-cp313-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:c4665508bcbac83a31ff8ab08f424b665200c0e1e645d2bd9ab3d3e557b6185b"},
    {file = "tomli-2.3.0-cp313-cp313-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:4021923f97266babc6ccab9f5068642a0095faa0a51a246a6a02fccbb3514eaf"},
    {file = "tomli-2.3.0-cp313-cp313-musllinux_1_2_aarch64.whl", hash = "sha256:a4ea38c40145a357d513bffad0ed869f13c1773716cf71ccaa83b0fa0cc4e42f"},
    {file = "tomli-2.3.0-cp313-cp313-musllinux_1_2_x86_64.whl", hash = "sha256:ad805ea85eda330dbad64c7ea7a4556259665bdf9d2672f5dccc740eb9d3ca05"},
    {file = "tomli-2.3.0-cp313-cp313-win32.whl", hash = "sha256:97d5eec30149fd3294270e889b4234023f2c69747e555a27bd708828353ab606"},
    {file = "tomli-2.3.0-cp313-cp313-win_amd64.whl", hash = "sha256:0c95ca56fbe89e065c6ead5b593ee64b84a26fca063b5d71a1122bf26e533999"},
    {file = "tomli-2.3.0-cp314-cp314-macosx_10_13_x86_64.whl", hash = "sha256:cebc6fe843e0733ee827a282aca4999b596241195f43b4cc371d64fc6639da9e"},
    {file = "tomli-2.3.0-cp314-cp314-macosx_11_0_arm64.whl", hash = "sha256:4c2ef0244c75aba9355561272009d934953817c49f47d768070c3c94355c2aa3"},
    {file = "tomli-2.3.0-cp314-cp314-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:c22a8bf253bacc0cf11f35ad9808b6cb75ada2631c2d97c971122583b129afbc"},
    {file = "tomli-2.3.0-cp314-cp314-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:0eea8cc5c5e9f89c9b90c4896a8deefc74f518db5927d0e0e8d4a80953d774d0"},
    {file = "tomli-2.3.0-cp314-cp314-musllinux_1_2_aarch64.whl", hash = "sha256:b74a0e59ec5d15127acdabd75ea17726ac4c5178ae51b85bfe39c4f8a278e879"},
    {file = "tomli-2.3.0-cp314-cp314-musllinux_1_2_x86_64.whl", hash = "sha256:b5870b50c9db823c595983571d1296a6ff3e1b88f734a4c8f6fc6188397de005"},
    {file = "tomli-2.3.0-cp314-cp314-win32.whl", hash = "sha256:feb0dacc61170ed7ab602d3d972a58f14ee3ee60494292d384649a3dc38ef463"},
    {file = "tomli-2.3.0-cp314-cp314-win_amd64.whl", hash = "sha256:b273fcbd7fc64dc3600c098e39136522650c49bca95df2d11cf3b626422392c8"},
    {file = "tomli-2.3.0-cp314-cp314t-macosx_10_13_x86_64.whl", hash = "sha256:940d56ee0410fa17ee1f12b817b37a4d4e4dc4d27340863cc67236c74f582e77"},
    {file = "tomli-2.3.0-cp314-cp314t-macosx_11_0_arm64.whl", hash = "sha256:f85209946d1fe94416debbb88d00eb92ce9cd5266775424ff81bc959e001acaf"},
    {file = "tomli-2.3.0-cp314-cp314t-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:a56212bdcce682e56b0aaf79e869ba5d15a6163f88d5451cbde388d48b13f530"},
    {file = "tomli-2.3.0-cp314-cp314t-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:c5f3ffd1e098dfc032d4d3af5c0ac64f6d286d98bc148698356847b80fa4de1b"},
    {file = "tomli-2.3.0-cp314-cp314t-musllinux_1_2_aarch64.whl", hash = "sha256:5e01decd096b1530d97d5d85cb4dff4af2d8347bd35686654a004f8dea20fc67"},
    {file = "tomli-2.3.0-cp314-cp314t-musllinux_1_2_x86_64.whl", hash = "sha256:8a35dd0e643bb2610f156cca8db95d213a90015c11fee76c946aa62b7ae7e02f"},
    {file = "tomli-2.3.0-cp314-cp314t-win32.whl", hash = "sha256:a1f7f282fe248311650081faafa5f4732bdbfef5d45fe3f2e702fbc6f2d496e0"},
    {file = "tomli-2.3.0-cp314-cp314t-win_amd64.whl", hash = "sha256:70a251f8d4ba2d9ac2542eecf008b3c8a9fc5c3f9f02c56a9d7952612be2fdba"},
    {file = "tomli-2.3.0-py3-none-any.whl", hash = "sha256:e95b1af3c5b07d9e643909b5abbec77cd9f1217e6d0bca72b0234736b9fb1f1b"},
    {file = "tomli-2.3.0.tar.gz", hash = "sha256:64be704a875d2a59753d80ee8a533c3fe183e3f06807ff7dc2232938ccb01549"},
]

[[package]]
name = "typing-extensions"
version = "4.15.0"
description = "Backported and Experimental Type Hints for Python 3.9+"
optional = false
python-versions = ">=3.9"
groups = ["main", "dev"]
files = [
    {file = "typing_extensions-4.15.0-py3-none-any.whl", hash = "sha256:f0fa19c6845758ab08074a0cfa8b7aecb71c999ca73d62883bc25cc018c4e548"},
    {file = "typing_extensions-4.15.0.tar.gz", hash = "sha256:0cea48d173cc12fa28ecabc3b837ea3cf6f38c6d1136f85cbaaf598984861466"},
]
markers = {dev = "python_version == \"3.10\""}

[[package]]
name = "typing-inspection"
version = "0.4.2"
description = "Runtime typing introspection tools"
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "typing_inspection-0.4.2-py3-none-any.whl", hash = "sha256:4ed1cacbdc298c220f1bd249ed5287caa16f34d44ef4e9c3d0cbad5b521545e7"},
    {file = "typing_inspection-0.4.2.tar.gz", hash = "sha256:ba561c48a67c5958007083d386c3295464928b01faa735ab8547c5692e87f464"},
]

[package.dependencies]
typing-extensions = ">=4.12.0"

[[package]]
name = "urllib3"
version = "2.6.3"
description = "HTTP library with thread-safe connection pooling, file post, and more."
optional = false
python-versions = ">=3.9"
groups = ["dev"]
files = [
    {file = "urllib3-2.6.3-py3-none-any.whl", hash = "sha256:bf272323e553dfb2e87d9bfd225ca7b0f467b919d7bbd355436d3fd37cb0acd4"},
    {file = "urllib3-2.6.3.tar.gz", hash = "sha256:1b62b6884944a57dbe321509ab94fd4d3b307075e0c2eae991ac71ee15ad38ed"},
]

[package.extras]
brotli = ["brotli (>=1.2.0) ; platform_python_implementation == \"CPython\"", "brotlicffi (>=1.2.0.0) ; platform_python_implementation != \"CPython\""]
h2 = ["h2 (>=4,<5)"]
socks = ["pysocks (>=1.5.6,!=1.5.7,<2.0)"]
zstd = ["backports-zstd (>=1.0.0) ; python_version < \"3.14\""]

[[package]]
name = "uvicorn"
version = "0.24.0.post1"
description = "The lightning-fast ASGI server."
optional = false
python-versions = ">=3.8"
groups = ["main"]
files = [
    {file = "uvicorn-0.24.0.post1-py3-none-any.whl", hash = "sha256:7c84fea70c619d4a710153482c0d230929af7bcf76c7bfa6de151f0a3a80121e"},
    {file = "uvicorn-0.24.0.post1.tar.gz", hash = "sha256:09c8e5a79dc466bdf28dead50093957db184de356fcdc48697bad3bde4c2588e"},
]

[package.dependencies]
click = ">=7.0"
colorama = {version = ">=0.4", optional = true, markers = "sys_platform == \"win32\" and extra == \"standard\""}
h11 = ">=0.8"
httptools = {version = ">=0.5.0", optional = true, markers = "extra == \"standard\""}
python-dotenv = {version = ">=0.13", optional = true, markers = "extra == \"standard\""}
pyyaml = {version = ">=5.1", optional = true, markers = "extra == \"standard\""}
typing-extensions = {version = ">=4.0", markers = "python_version < \"3.11\""}
uvloop = {version = ">=0.14.0,<0.15.0 || >0.15.0,<0.15.1 || >0.15.1", optional = true, markers = "sys_platform != \"win32\" and sys_platform != \"cygwin\" and platform_python_implementation != \"PyPy\" and extra == \"standard\""}
watchfiles = {version = ">=0.13", optional = true, markers = "extra == \"standard\""}
websockets = {version = ">=10.4", optional = true, markers = "extra == \"standard\""}

[package.extras]
standard = ["colorama (>=0.4) ; sys_platform == \"win32\"", "httptools (>=0.5.0)", "python-dotenv (>=0.13)", "pyyaml (>=5.1)", "uvloop (>=0.14.0,!=0.15.0,!=0.15.1) ; sys_platform != \"win32\" and sys_platform != \"cygwin\" and platform_python_implementation != \"PyPy\"", "watchfiles (>=0.13)", "websockets (>=10.4)"]

[[package]]
name = "uvloop"
version = "0.22.1"
description = "Fast implementation of asyncio event loop on top of libuv"
optional = false
python-versions = ">=3.8.1"
groups = ["main"]
markers = "sys_platform != \"win32\" and sys_platform != \"cygwin\" and platform_python_implementation != \"PyPy\""
files = [
    {file = "uvloop-0.22.1-cp310-cp310-macosx_10_9_universal2.whl", hash = "sha256:ef6f0d4cc8a9fa1f6a910230cd53545d9a14479311e87e3cb225495952eb672c"},
    {file = "uvloop-0.22.1-cp310-cp310-macosx_10_9_x86_64.whl", hash = "sha256:7cd375a12b71d33d46af85a3343b35d98e8116134ba404bd657b3b1d15988792"},
    {file = "uvloop-0.22.1-cp310-cp310-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:ac33ed96229b7790eb729702751c0e93ac5bc3bcf52ae9eccbff30da09194b86"},
    {file = "uvloop-0.22.1-cp310-cp310-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:481c990a7abe2c6f4fc3d98781cc9426ebd7f03a9aaa7eb03d3bfc68ac2a46bd"},
    {file = "uvloop-0.22.1-cp310-cp310-musllinux_1_2_aarch64.whl", hash = "sha256:a592b043a47ad17911add5fbd087c76716d7c9ccc1d64ec9249ceafd735f03c2"},
    {file = "uvloop-0.22.1-cp310-cp310-musllinux_1_2_x86_64.whl", hash = "sha256:1489cf791aa7b6e8c8be1c5a080bae3a672791fcb4e9e12249b05862a2ca9cec"},
    {file = "uvloop-0.22.1-cp311-cp311-macosx_10_9_universal2.whl", hash = "sha256:c60ebcd36f7b240b30788554b6f0782454826a0ed765d8430652621b5de674b9"},
    {file = "uvloop-0.22.1-cp311-cp311-macosx_10_9_x86_64.whl", hash = "sha256:3b7f102bf3cb1995cfeaee9321105e8f5da76fdb104cdad8986f85461a1b7b77"},
    {file = "uvloop-0.22.1-cp311-cp311-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:53c85520781d84a4b8b230e24a5af5b0778efdb39142b424990ff1ef7c48ba21"},
    {file = "uvloop-0.22.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:56a2d1fae65fd82197cb8c53c367310b3eabe1bbb9fb5a04d28e3e3520e4f702"},
    {file = "uvloop-0.22.1-cp311-cp311-musllinux_1_2_aarch64.whl", hash = "sha256:40631b049d5972c6755b06d0bfe8233b1bd9a8a6392d9d1c45c10b6f9e9b2733"},
    {file = "uvloop-0.22.1-cp311-cp311-musllinux_1_2_x86_64.whl", hash = "sha256:535cc37b3a04f6cd2c1ef65fa1d370c9a35b6695df735fcff5427323f2cd5473"},
    {file = "uvloop-0.22.1-cp312-cp312-macosx_10_13_universal2.whl", hash = "sha256:fe94b4564e865d968414598eea1a6de60adba0c040ba4ed05ac1300de402cd42"},
    {file = "uvloop-0.22.1-cp312-cp312-macosx_10_13_x86_64.whl", hash = "sha256:51eb9bd88391483410daad430813d982010f9c9c89512321f5b60e2cddbdddd6"},
    {file = "uvloop-0.22.1-cp312-cp312-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:700e674a166ca5778255e0e1dc4e9d79ab2acc57b9171b79e65feba7184b3370"},
    {file = "uvloop-0.22.1-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:7b5b1ac819a3f946d3b2ee07f09149578ae76066d70b44df3fa990add49a82e4"},
    {file = "uvloop-0.22.1-cp312-cp312-musllinux_1_2_aarch64.whl", hash = "sha256:e047cc068570bac9866237739607d1313b9253c3051ad84738cbb095be0537b2"},
    {file = "uvloop-0.22.1-cp312-cp312-musllinux_1_2_x86_64.whl", hash = "sha256:512fec6815e2dd45161054592441ef76c830eddaad55c8aa30952e6fe1ed07c0"},
    {file = "uvloop-0.22.1-cp313-cp313-macosx_10_13_universal2.whl", hash = "sha256:561577354eb94200d75aca23fbde86ee11be36b00e52a4eaf8f50fb0c86b7705"},
    {file = "uvloop-0.22.1-cp313-cp313-macosx_10_13_x86_64.whl", hash = "sha256:1cdf5192ab3e674ca26da2eada35b288d2fa49fdd0f357a19f0e7c4e7d5077c8"},
    {file = "uvloop-0.22.1-cp313-cp313-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:6e2ea3d6190a2968f4a14a23019d3b16870dd2190cd69c8180f7c632d21de68d"},
    {file = "uvloop-0.22.1-cp313-cp313-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:0530a5fbad9c9e4ee3f2b33b148c6a64d47bbad8000ea63704fa8260f4cf728e"},
    {file = "uvloop-0.22.1-cp313-cp313-musllinux_1_2_aarch64.whl", hash = "sha256:bc5ef13bbc10b5335792360623cc378d52d7e62c2de64660616478c32cd0598e"},
    {file = "uvloop-0.22.1-cp313-cp313-musllinux_1_2_x86_64.whl", hash = "sha256:1f38ec5e3f18c8a10ded09742f7fb8de0108796eb673f30ce7762ce1b8550cad"},
    {file = "uvloop-0.22.1-cp314-cp314-macosx_10_13_universal2.whl", hash = "sha256:3879b88423ec7e97cd4eba2a443aa26ed4e59b45e6b76aabf13fe2f27023a142"},
    {file = "uvloop-0.22.1-cp314-cp314-macosx_10_13_x86_64.whl", hash = "sha256:4baa86acedf1d62115c1dc6ad1e17134476688f08c6efd8a2ab076e815665c74"},
    {file = "uvloop-0.22.1-cp314-cp314-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:297c27d8003520596236bdb2335e6b3f649480bd09e00d1e3a99144b691d2a35"},
    {file = "uvloop-0.22.1-cp314-cp314-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:c1955d5a1dd43198244d47664a5858082a3239766a839b2102a269aaff7a4e25"},
    {file = "uvloop-0.22.1-cp314-cp314-musllinux_1_2_aarch64.whl", hash = "sha256:b31dc2fccbd42adc73bc4e7cdbae4fc5086cf378979e53ca5d0301838c5682c6"},
    {file = "uvloop-0.22.1-cp314-cp314-musllinux_1_2_x86_64.whl", hash = "sha256:93f617675b2d03af4e72a5333ef89450dfaa5321303ede6e67ba9c9d26878079"},
    {file = "uvloop-0.22.1-cp314-cp314t-macosx_10_13_universal2.whl", hash = "sha256:37554f70528f60cad66945b885eb01f1bb514f132d92b6eeed1c90fd54ed6289"},
    {file = "uvloop-0.22.1-cp314-cp314t-macosx_10_13_x86_64.whl", hash = "sha256:b76324e2dc033a0b2f435f33eb88ff9913c156ef78e153fb210e03c13da746b3"},
    {file = "uvloop-0.22.1-cp314-cp314t-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:badb4d8e58ee08dad957002027830d5c3b06aea446a6a3744483c2b3b745345c"},
    {file = "uvloop-0.22.1-cp314-cp314t-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:b91328c72635f6f9e0282e4a57da7470c7350ab1c9f48546c0f2866205349d21"},
    {file = "uvloop-0.22.1-cp314-cp314t-musllinux_1_2_aarch64.whl", hash = "sha256:daf620c2995d193449393d6c62131b3fbd40a63bf7b307a1527856ace637fe88"},
    {file = "uvloop-0.22.1-cp314-cp314t-musllinux_1_2_x86_64.whl", hash = "sha256:6cde23eeda1a25c75b2e07d39970f3374105d5eafbaab2a4482be82f272d5a5e"},
    {file = "uvloop-0.22.1-cp38-cp38-macosx_10_9_universal2.whl", hash = "sha256:80eee091fe128e425177fbd82f8635769e2f32ec9daf6468286ec57ec0313efa"},
    {file = "uvloop-0.22.1-cp38-cp38-macosx_10_9_x86_64.whl", hash = "sha256:017bd46f9e7b78e81606329d07141d3da446f8798c6baeec124260e22c262772"},
    {file = "uvloop-0.22.1-cp38-cp38-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:c3e5c6727a57cb6558592a95019e504f605d1c54eb86463ee9f7a2dbd411c820"},
    {file = "uvloop-0.22.1-cp38-cp38-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:57df59d8b48feb0e613d9b1f5e57b7532e97cbaf0d61f7aa9aa32221e84bc4b6"},
    {file = "uvloop-0.22.1-cp38-cp38-musllinux_1_2_aarch64.whl", hash = "sha256:55502bc2c653ed2e9692e8c55cb95b397d33f9f2911e929dc97c4d6b26d04242"},
    {file = "uvloop-0.22.1-cp38-cp38-musllinux_1_2_x86_64.whl", hash = "sha256:4a968a72422a097b09042d5fa2c5c590251ad484acf910a651b4b620acd7f193"},
    {file = "uvloop-0.22.1-cp39-cp39-macosx_10_9_universal2.whl", hash = "sha256:b45649628d816c030dba3c80f8e2689bab1c89518ed10d426036cdc47874dfc4"},
    {file = "uvloop-0.22.1-cp39-cp39-macosx_10_9_x86_64.whl", hash = "sha256:ea721dd3203b809039fcc2983f14608dae82b212288b346e0bfe46ec2fab0b7c"},
    {file = "uvloop-0.22.1-cp39-cp39-manylinux2014_aarch64.manylinux_2_17_aarch64.manylinux_2_28_aarch64.whl", hash = "sha256:0ae676de143db2b2f60a9696d7eca5bb9d0dd6cc3ac3dad59a8ae7e95f9e1b54"},
    {file = "uvloop-0.22.1-cp39-cp39-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl", hash = "sha256:17d4e97258b0172dfa107b89aa1eeba3016f4b1974ce85ca3ef6a66b35cbf659"},
    {file = "uvloop-0.22.1-cp39-cp39-musllinux_1_2_aarch64.whl", hash = "sha256:05e4b5f86e621cf3927631789999e697e58f0d2d32675b67d9ca9eb0bca55743"},
    {file = "uvloop-0.22.1-cp39-cp39-musllinux_1_2_x86_64.whl", hash = "sha256:286322a90bea1f9422a470d5d2ad82d38080be0a29c4dd9b3e6384320a4d11e7"},
    {file = "uvloop-0.22.1.tar.gz", hash = "sha256:6c84bae345b9147082b17371e3dd5d42775bddce91f885499017f4607fdaf39f"},
]

[package.extras]
dev = ["Cython (>=3.0,<4.0)", "setuptools (>=60)"]
docs = ["Sphinx (>=4.1.2,<4.2.0)", "sphinx_rtd_theme (>=0.5.2,<0.6.0)", "sphinxcontrib-asyncio (>=0.3.0,<0.4.0)"]
test = ["aiohttp (>=3.10.5)", "flake8 (>=6.1,<7.0)", "mypy (>=0.800)", "psutil", "pyOpenSSL (>=25.3.0,<25.4.0)", "pycodestyle (>=2.11.0,<2.12.0)"]

[[package]]
name = "watchfiles"
version = "1.1.1"
description = "Simple, modern and high performance file watching and code reload in python."
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "watchfiles-1.1.1-cp310-cp310-macosx_10_12_x86_64.whl", hash = "sha256:eef58232d32daf2ac67f42dea51a2c80f0d03379075d44a587051e63cc2e368c"},
    {file = "watchfiles-1.1.1-cp310-cp310-macosx_11_0_arm64.whl", hash = "sha256:03fa0f5237118a0c5e496185cafa92878568b652a2e9a9382a5151b1a0380a43"},
    {file = "watchfiles-1.1.1-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:8ca65483439f9c791897f7db49202301deb6e15fe9f8fe2fed555bf986d10c31"},
    {file = "watchfiles-1.1.1-cp310-cp310-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:f0ab1c1af0cb38e3f598244c17919fb1a84d1629cc08355b0074b6d7f53138ac"},
    {file = "watchfiles-1.1.1-cp310-cp310-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:3bc570d6c01c206c46deb6e935a260be44f186a2f05179f52f7fcd2be086a94d"},
    {file = "watchfiles-1.1.1-cp310-cp310-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:e84087b432b6ac94778de547e08611266f1f8ffad28c0ee4c82e028b0fc5966d"},
    {file = "watchfiles-1.1.1-cp310-cp310-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:620bae625f4cb18427b1bb1a2d9426dc0dd5a5ba74c7c2cdb9de405f7b129863"},
    {file = "watchfiles-1.1.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:544364b2b51a9b0c7000a4b4b02f90e9423d97fbbf7e06689236443ebcad81ab"},
    {file = "watchfiles-1.1.1-cp310-cp310-musllinux_1_1_aarch64.whl", hash = "sha256:bbe1ef33d45bc71cf21364df962af171f96ecaeca06bd9e3d0b583efb12aec82"},
    {file = "watchfiles-1.1.1-cp310-cp310-musllinux_1_1_x86_64.whl", hash = "sha256:1a0bb430adb19ef49389e1ad368450193a90038b5b752f4ac089ec6942c4dff4"},
    {file = "watchfiles-1.1.1-cp310-cp310-win32.whl", hash = "sha256:3f6d37644155fb5beca5378feb8c1708d5783145f2a0f1c4d5a061a210254844"},
    {file = "watchfiles-1.1.1-cp310-cp310-win_amd64.whl", hash = "sha256:a36d8efe0f290835fd0f33da35042a1bb5dc0e83cbc092dcf69bce442579e88e"},
    {file = "watchfiles-1.1.1-cp311-cp311-macosx_10_12_x86_64.whl", hash = "sha256:f57b396167a2565a4e8b5e56a5a1c537571733992b226f4f1197d79e94cf0ae5"},
    {file = "watchfiles-1.1.1-cp311-cp311-macosx_11_0_arm64.whl", hash = "sha256:421e29339983e1bebc281fab40d812742268ad057db4aee8c4d2bce0af43b741"},
    {file = "watchfiles-1.1.1-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:6e43d39a741e972bab5d8100b5cdacf69db64e34eb19b6e9af162bccf63c5cc6"},
    {file = "watchfiles-1.1.1-cp311-cp311-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:f537afb3276d12814082a2e9b242bdcf416c2e8fd9f799a737990a1dbe906e5b"},
    {file = "watchfiles-1.1.1-cp311-cp311-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:b2cd9e04277e756a2e2d2543d65d1e2166d6fd4c9b183f8808634fda23f17b14"},
    {file = "watchfiles-1.1.1-cp311-cp311-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:5f3f58818dc0b07f7d9aa7fe9eb1037aecb9700e63e1f6acfed13e9fef648f5d"},
    {file = "watchfiles-1.1.1-cp311-cp311-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:9bb9f66367023ae783551042d31b1d7fd422e8289eedd91f26754a66f44d5cff"},
    {file = "watchfiles-1.1.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:aebfd0861a83e6c3d1110b78ad54704486555246e542be3e2bb94195eabb2606"},
    {file = "watchfiles-1.1.1-cp311-cp311-musllinux_1_1_aarch64.whl", hash = "sha256:5fac835b4ab3c6487b5dbad78c4b3724e26bcc468e886f8ba8cc4306f68f6701"},
    {file = "watchfiles-1.1.1-cp311-cp311-musllinux_1_1_x86_64.whl", hash = "sha256:399600947b170270e80134ac854e21b3ccdefa11a9529a3decc1327088180f10"},
    {file = "watchfiles-1.1.1-cp311-cp311-win32.whl", hash = "sha256:de6da501c883f58ad50db3a32ad397b09ad29865b5f26f64c24d3e3281685849"},
    {file = "watchfiles-1.1.1-cp311-cp311-win_amd64.whl", hash = "sha256:35c53bd62a0b885bf653ebf6b700d1bf05debb78ad9292cf2a942b23513dc4c4"},
    {file = "watchfiles-1.1.1-cp311-cp311-win_arm64.whl", hash = "sha256:57ca5281a8b5e27593cb7d82c2ac927ad88a96ed406aa446f6344e4328208e9e"},
    {file = "watchfiles-1.1.1-cp312-cp312-macosx_10_12_x86_64.whl", hash = "sha256:8c89f9f2f740a6b7dcc753140dd5e1ab9215966f7a3530d0c0705c83b401bd7d"},
    {file = "watchfiles-1.1.1-cp312-cp312-macosx_11_0_arm64.whl", hash = "sha256:bd404be08018c37350f0d6e34676bd1e2889990117a2b90070b3007f172d0610"},
    {file = "watchfiles-1.1.1-cp312-cp312-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:8526e8f916bb5b9a0a777c8317c23ce65de259422bba5b31325a6fa6029d33af"},
    {file = "watchfiles-1.1.1-cp312-cp312-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:2edc3553362b1c38d9f06242416a5d8e9fe235c204a4072e988ce2e5bb1f69f6"},
    {file = "watchfiles-1.1.1-cp312-cp312-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:30f7da3fb3f2844259cba4720c3fc7138eb0f7b659c38f3bfa65084c7fc7abce"},
    {file = "watchfiles-1.1.1-cp312-cp312-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:f8979280bdafff686ba5e4d8f97840f929a87ed9cdf133cbbd42f7766774d2aa"},
    {file = "watchfiles-1.1.1-cp312-cp312-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:dcc5c24523771db3a294c77d94771abcfcb82a0e0ee8efd910c37c59ec1b31bb"},
    {file = "watchfiles-1.1.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:1db5d7ae38ff20153d542460752ff397fcf5c96090c1230803713cf3147a6803"},
    {file = "watchfiles-1.1.1-cp312-cp312-musllinux_1_1_aarch64.whl", hash = "sha256:28475ddbde92df1874b6c5c8aaeb24ad5be47a11f87cde5a28ef3835932e3e94"},
    {file = "watchfiles-1.1.1-cp312-cp312-musllinux_1_1_x86_64.whl", hash = "sha256:36193ed342f5b9842edd3532729a2ad55c4160ffcfa3700e0d54be496b70dd43"},
    {file = "watchfiles-1.1.1-cp312-cp312-win32.whl", hash = "sha256:859e43a1951717cc8de7f4c77674a6d389b106361585951d9e69572823f311d9"},
    {file = "watchfiles-1.1.1-cp312-cp312-win_amd64.whl", hash = "sha256:91d4c9a823a8c987cce8fa2690923b069966dabb196dd8d137ea2cede885fde9"},
    {file = "watchfiles-1.1.1-cp312-cp312-win_arm64.whl", hash = "sha256:a625815d4a2bdca61953dbba5a39d60164451ef34c88d751f6c368c3ea73d404"},
    {file = "watchfiles-1.1.1-cp313-cp313-macosx_10_12_x86_64.whl", hash = "sha256:130e4876309e8686a5e37dba7d5e9bc77e6ed908266996ca26572437a5271e18"},
    {file = "watchfiles-1.1.1-cp313-cp313-macosx_11_0_arm64.whl", hash = "sha256:5f3bde70f157f84ece3765b42b4a52c6ac1a50334903c6eaf765362f6ccca88a"},
    {file = "watchfiles-1.1.1-cp313-cp313-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:14e0b1fe858430fc0251737ef3824c54027bedb8c37c38114488b8e131cf8219"},
    {file = "watchfiles-1.1.1-cp313-cp313-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:f27db948078f3823a6bb3b465180db8ebecf26dd5dae6f6180bd87383b6b4428"},
    {file = "watchfiles-1.1.1-cp313-cp313-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:059098c3a429f62fc98e8ec62b982230ef2c8df68c79e826e37b895bc359a9c0"},
    {file = "watchfiles-1.1.1-cp313-cp313-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:bfb5862016acc9b869bb57284e6cb35fdf8e22fe59f7548858e2f971d045f150"},
    {file = "watchfiles-1.1.1-cp313-cp313-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:319b27255aacd9923b8a276bb14d21a5f7ff82564c744235fc5eae58d95422ae"},
    {file = "watchfiles-1.1.1-cp313-cp313-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:c755367e51db90e75b19454b680903631d41f9e3607fbd941d296a020c2d752d"},
    {file = "watchfiles-1.1.1-cp313-cp313-musllinux_1_1_aarch64.whl", hash = "sha256:c22c776292a23bfc7237a98f791b9ad3144b02116ff10d820829ce62dff46d0b"},
    {file = "watchfiles-1.1.1-cp313-cp313-musllinux_1_1_x86_64.whl", hash = "sha256:3a476189be23c3686bc2f4321dd501cb329c0a0469e77b7b534ee10129ae6374"},
    {file = "watchfiles-1.1.1-cp313-cp313-win32.whl", hash = "sha256:bf0a91bfb5574a2f7fc223cf95eeea79abfefa404bf1ea5e339c0c1560ae99a0"},
    {file = "watchfiles-1.1.1-cp313-cp313-win_amd64.whl", hash = "sha256:52e06553899e11e8074503c8e716d574adeeb7e68913115c4b3653c53f9bae42"},
    {file = "watchfiles-1.1.1-cp313-cp313-win_arm64.whl", hash = "sha256:ac3cc5759570cd02662b15fbcd9d917f7ecd47efe0d6b40474eafd246f91ea18"},
    {file = "watchfiles-1.1.1-cp313-cp313t-macosx_10_12_x86_64.whl", hash = "sha256:563b116874a9a7ce6f96f87cd0b94f7faf92d08d0021e837796f0a14318ef8da"},
    {file = "watchfiles-1.1.1-cp313-cp313t-macosx_11_0_arm64.whl", hash = "sha256:3ad9fe1dae4ab4212d8c91e80b832425e24f421703b5a42ef2e4a1e215aff051"},
    {file = "watchfiles-1.1.1-cp313-cp313t-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:ce70f96a46b894b36eba678f153f052967a0d06d5b5a19b336ab0dbbd029f73e"},
    {file = "watchfiles-1.1.1-cp313-cp313t-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:cb467c999c2eff23a6417e58d75e5828716f42ed8289fe6b77a7e5a91036ca70"},
    {file = "watchfiles-1.1.1-cp313-cp313t-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:836398932192dae4146c8f6f737d74baeac8b70ce14831a239bdb1ca882fc261"},
    {file = "watchfiles-1.1.1-cp313-cp313t-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:743185e7372b7bc7c389e1badcc606931a827112fbbd37f14c537320fca08620"},
    {file = "watchfiles-1.1.1-cp313-cp313t-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:afaeff7696e0ad9f02cbb8f56365ff4686ab205fcf9c4c5b6fdfaaa16549dd04"},
    {file = "watchfiles-1.1.1-cp313-cp313t-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:3f7eb7da0eb23aa2ba036d4f616d46906013a68caf61b7fdbe42fc8b25132e77"},
    {file = "watchfiles-1.1.1-cp313-cp313t-musllinux_1_1_aarch64.whl", hash = "sha256:831a62658609f0e5c64178211c942ace999517f5770fe9436be4c2faeba0c0ef"},
    {file = "watchfiles-1.1.1-cp313-cp313t-musllinux_1_1_x86_64.whl", hash = "sha256:f9a2ae5c91cecc9edd47e041a930490c31c3afb1f5e6d71de3dc671bfaca02bf"},
    {file = "watchfiles-1.1.1-cp314-cp314-macosx_10_12_x86_64.whl", hash = "sha256:d1715143123baeeaeadec0528bb7441103979a1d5f6fd0e1f915383fea7ea6d5"},
    {file = "watchfiles-1.1.1-cp314-cp314-macosx_11_0_arm64.whl", hash = "sha256:39574d6370c4579d7f5d0ad940ce5b20db0e4117444e39b6d8f99db5676c52fd"},
    {file = "watchfiles-1.1.1-cp314-cp314-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:7365b92c2e69ee952902e8f70f3ba6360d0d596d9299d55d7d386df84b6941fb"},
    {file = "watchfiles-1.1.1-cp314-cp314-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:bfff9740c69c0e4ed32416f013f3c45e2ae42ccedd1167ef2d805c000b6c71a5"},
    {file = "watchfiles-1.1.1-cp314-cp314-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:b27cf2eb1dda37b2089e3907d8ea92922b673c0c427886d4edc6b94d8dfe5db3"},
    {file = "watchfiles-1.1.1-cp314-cp314-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:526e86aced14a65a5b0ec50827c745597c782ff46b571dbfe46192ab9e0b3c33"},
    {file = "watchfiles-1.1.1-cp314-cp314-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:04e78dd0b6352db95507fd8cb46f39d185cf8c74e4cf1e4fbad1d3df96faf510"},
    {file = "watchfiles-1.1.1-cp314-cp314-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:5c85794a4cfa094714fb9c08d4a218375b2b95b8ed1666e8677c349906246c05"},
    {file = "watchfiles-1.1.1-cp314-cp314-musllinux_1_1_aarch64.whl", hash = "sha256:74d5012b7630714b66be7b7b7a78855ef7ad58e8650c73afc4c076a1f480a8d6"},
    {file = "watchfiles-1.1.1-cp314-cp314-musllinux_1_1_x86_64.whl", hash = "sha256:8fbe85cb3201c7d380d3d0b90e63d520f15d6afe217165d7f98c9c649654db81"},
    {file = "watchfiles-1.1.1-cp314-cp314-win32.whl", hash = "sha256:3fa0b59c92278b5a7800d3ee7733da9d096d4aabcfabb9a928918bd276ef9b9b"},
    {file = "watchfiles-1.1.1-cp314-cp314-win_amd64.whl", hash = "sha256:c2047d0b6cea13b3316bdbafbfa0c4228ae593d995030fda39089d36e64fc03a"},
    {file = "watchfiles-1.1.1-cp314-cp314-win_arm64.whl", hash = "sha256:842178b126593addc05acf6fce960d28bc5fae7afbaa2c6c1b3a7b9460e5be02"},
    {file = "watchfiles-1.1.1-cp314-cp314t-macosx_10_12_x86_64.whl", hash = "sha256:88863fbbc1a7312972f1c511f202eb30866370ebb8493aef2812b9ff28156a21"},
    {file = "watchfiles-1.1.1-cp314-cp314t-macosx_11_0_arm64.whl", hash = "sha256:55c7475190662e202c08c6c0f4d9e345a29367438cf8e8037f3155e10a88d5a5"},
    {file = "watchfiles-1.1.1-cp314-cp314t-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:3f53fa183d53a1d7a8852277c92b967ae99c2d4dcee2bfacff8868e6e30b15f7"},
    {file = "watchfiles-1.1.1-cp314-cp314t-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:6aae418a8b323732fa89721d86f39ec8f092fc2af67f4217a2b07fd3e93c6101"},
    {file = "watchfiles-1.1.1-cp314-cp314t-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:f096076119da54a6080e8920cbdaac3dbee667eb91dcc5e5b78840b87415bd44"},
    {file = "watchfiles-1.1.1-cp314-cp314t-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:00485f441d183717038ed2e887a7c868154f216877653121068107b227a2f64c"},
    {file = "watchfiles-1.1.1-cp314-cp314t-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:a55f3e9e493158d7bfdb60a1165035f1cf7d320914e7b7ea83fe22c6023b58fc"},
    {file = "watchfiles-1.1.1-cp314-cp314t-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:8c91ed27800188c2ae96d16e3149f199d62f86c7af5f5f4d2c61a3ed8cd3666c"},
    {file = "watchfiles-1.1.1-cp314-cp314t-musllinux_1_1_aarch64.whl", hash = "sha256:311ff15a0bae3714ffb603e6ba6dbfba4065ab60865d15a6ec544133bdb21099"},
    {file = "watchfiles-1.1.1-cp314-cp314t-musllinux_1_1_x86_64.whl", hash = "sha256:a916a2932da8f8ab582f242c065f5c81bed3462849ca79ee357dd9551b0e9b01"},
    {file = "watchfiles-1.1.1-cp39-cp39-macosx_10_12_x86_64.whl", hash = "sha256:c882d69f6903ef6092bedfb7be973d9319940d56b8427ab9187d1ecd73438a70"},
    {file = "watchfiles-1.1.1-cp39-cp39-macosx_11_0_arm64.whl", hash = "sha256:d6ff426a7cb54f310d51bfe83fe9f2bbe40d540c741dc974ebc30e6aa238f52e"},
    {file = "watchfiles-1.1.1-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:79ff6c6eadf2e3fc0d7786331362e6ef1e51125892c75f1004bd6b52155fb956"},
    {file = "watchfiles-1.1.1-cp39-cp39-manylinux_2_17_armv7l.manylinux2014_armv7l.whl", hash = "sha256:c1f5210f1b8fc91ead1283c6fd89f70e76fb07283ec738056cf34d51e9c1d62c"},
    {file = "watchfiles-1.1.1-cp39-cp39-manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:b9c4702f29ca48e023ffd9b7ff6b822acdf47cb1ff44cb490a3f1d5ec8987e9c"},
    {file = "watchfiles-1.1.1-cp39-cp39-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl", hash = "sha256:acb08650863767cbc58bca4813b92df4d6c648459dcaa3d4155681962b2aa2d3"},
    {file = "watchfiles-1.1.1-cp39-cp39-manylinux_2_17_s390x.manylinux2014_s390x.whl", hash = "sha256:08af70fd77eee58549cd69c25055dc344f918d992ff626068242259f98d598a2"},
    {file = "watchfiles-1.1.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:6c3631058c37e4a0ec440bf583bc53cdbd13e5661bb6f465bc1d88ee9a0a4d02"},
    {file = "watchfiles-1.1.1-cp39-cp39-musllinux_1_1_aarch64.whl", hash = "sha256:cf57a27fb986c6243d2ee78392c503826056ffe0287e8794503b10fb51b881be"},
    {file = "watchfiles-1.1.1-cp39-cp39-musllinux_1_1_x86_64.whl", hash = "sha256:d7e7067c98040d646982daa1f37a33d3544138ea155536c2e0e63e07ff8a7e0f"},
    {file = "watchfiles-1.1.1-cp39-cp39-win32.whl", hash = "sha256:6c9c9262f454d1c4d8aaa7050121eb4f3aea197360553699520767daebf2180b"},
    {file = "watchfiles-1.1.1-cp39-cp39-win_amd64.whl", hash = "sha256:74472234c8370669850e1c312490f6026d132ca2d396abfad8830b4f1c096957"},
    {file = "watchfiles-1.1.1-pp310-pypy310_pp73-macosx_10_12_x86_64.whl", hash = "sha256:17ef139237dfced9da49fb7f2232c86ca9421f666d78c264c7ffca6601d154c3"},
    {file = "watchfiles-1.1.1-pp310-pypy310_pp73-macosx_11_0_arm64.whl", hash = "sha256:672b8adf25b1a0d35c96b5888b7b18699d27d4194bac8beeae75be4b7a3fc9b2"},
    {file = "watchfiles-1.1.1-pp310-pypy310_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:77a13aea58bc2b90173bc69f2a90de8e282648939a00a602e1dc4ee23e26b66d"},
    {file = "watchfiles-1.1.1-pp310-pypy310_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:0b495de0bb386df6a12b18335a0285dda90260f51bdb505503c02bcd1ce27a8b"},
    {file = "watchfiles-1.1.1-pp311-pypy311_pp73-macosx_10_12_x86_64.whl", hash = "sha256:db476ab59b6765134de1d4fe96a1a9c96ddf091683599be0f26147ea1b2e4b88"},
    {file = "watchfiles-1.1.1-pp311-pypy311_pp73-macosx_11_0_arm64.whl", hash = "sha256:89eef07eee5e9d1fda06e38822ad167a044153457e6fd997f8a858ab7564a336"},
    {file = "watchfiles-1.1.1-pp311-pypy311_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:ce19e06cbda693e9e7686358af9cd6f5d61312ab8b00488bc36f5aabbaf77e24"},
    {file = "watchfiles-1.1.1-pp311-pypy311_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:3e6f39af2eab0118338902798b5aa6664f46ff66bc0280de76fca67a7f262a49"},
    {file = "watchfiles-1.1.1-pp39-pypy39_pp73-macosx_10_12_x86_64.whl", hash = "sha256:cdab464fee731e0884c35ae3588514a9bcf718d0e2c82169c1c4a85cc19c3c7f"},
    {file = "watchfiles-1.1.1-pp39-pypy39_pp73-macosx_11_0_arm64.whl", hash = "sha256:3dbd8cbadd46984f802f6d479b7e3afa86c42d13e8f0f322d669d79722c8ec34"},
    {file = "watchfiles-1.1.1-pp39-pypy39_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:5524298e3827105b61951a29c3512deb9578586abf3a7c5da4a8069df247cccc"},
    {file = "watchfiles-1.1.1-pp39-pypy39_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:4b943d3668d61cfa528eb949577479d3b077fd25fb83c641235437bc0b5bc60e"},
    {file = "watchfiles-1.1.1.tar.gz", hash = "sha256:a173cb5c16c4f40ab19cecf48a534c409f7ea983ab8fed0741304a1c0a31b3f2"},
]

[package.dependencies]
anyio = ">=3.0.0"

[[package]]
name = "websockets"
version = "15.0.1"
description = "An implementation of the WebSocket Protocol (RFC 6455 & 7692)"
optional = false
python-versions = ">=3.9"
groups = ["main"]
files = [
    {file = "websockets-15.0.1-cp310-cp310-macosx_10_9_universal2.whl", hash = "sha256:d63efaa0cd96cf0c5fe4d581521d9fa87744540d4bc999ae6e08595a1014b45b"},
    {file = "websockets-15.0.1-cp310-cp310-macosx_10_9_x86_64.whl", hash = "sha256:ac60e3b188ec7574cb761b08d50fcedf9d77f1530352db4eef1707fe9dee7205"},
    {file = "websockets-15.0.1-cp310-cp310-macosx_11_0_arm64.whl", hash = "sha256:5756779642579d902eed757b21b0164cd6fe338506a8083eb58af5c372e39d9a"},
    {file = "websockets-15.0.1-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:0fdfe3e2a29e4db3659dbd5bbf04560cea53dd9610273917799f1cde46aa725e"},
    {file = "websockets-15.0.1-cp310-cp310-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:4c2529b320eb9e35af0fa3016c187dffb84a3ecc572bcee7c3ce302bfeba52bf"},
    {file = "websockets-15.0.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:ac1e5c9054fe23226fb11e05a6e630837f074174c4c2f0fe442996112a6de4fb"},
    {file = "websockets-15.0.1-cp310-cp310-musllinux_1_2_aarch64.whl", hash = "sha256:5df592cd503496351d6dc14f7cdad49f268d8e618f80dce0cd5a36b93c3fc08d"},
    {file = "websockets-15.0.1-cp310-cp310-musllinux_1_2_i686.whl", hash = "sha256:0a34631031a8f05657e8e90903e656959234f3a04552259458aac0b0f9ae6fd9"},
    {file = "websockets-15.0.1-cp310-cp310-musllinux_1_2_x86_64.whl", hash = "sha256:3d00075aa65772e7ce9e990cab3ff1de702aa09be3940d1dc88d5abf1ab8a09c"},
    {file = "websockets-15.0.1-cp310-cp310-win32.whl", hash = "sha256:1234d4ef35db82f5446dca8e35a7da7964d02c127b095e172e54397fb6a6c256"},
    {file = "websockets-15.0.1-cp310-cp310-win_amd64.whl", hash = "sha256:39c1fec2c11dc8d89bba6b2bf1556af381611a173ac2b511cf7231622058af41"},
    {file = "websockets-15.0.1-cp311-cp311-macosx_10_9_universal2.whl", hash = "sha256:823c248b690b2fd9303ba00c4f66cd5e2d8c3ba4aa968b2779be9532a4dad431"},
    {file = "websockets-15.0.1-cp311-cp311-macosx_10_9_x86_64.whl", hash = "sha256:678999709e68425ae2593acf2e3ebcbcf2e69885a5ee78f9eb80e6e371f1bf57"},
    {file = "websockets-15.0.1-cp311-cp311-macosx_11_0_arm64.whl", hash = "sha256:d50fd1ee42388dcfb2b3676132c78116490976f1300da28eb629272d5d93e905"},
    {file = "websockets-15.0.1-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:d99e5546bf73dbad5bf3547174cd6cb8ba7273062a23808ffea025ecb1cf8562"},
    {file = "websockets-15.0.1-cp311-cp311-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:66dd88c918e3287efc22409d426c8f729688d89a0c587c88971a0faa2c2f3792"},
    {file = "websockets-15.0.1-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:8dd8327c795b3e3f219760fa603dcae1dcc148172290a8ab15158cf85a953413"},
    {file = "websockets-15.0.1-cp311-cp311-musllinux_1_2_aarch64.whl", hash = "sha256:8fdc51055e6ff4adeb88d58a11042ec9a5eae317a0a53d12c062c8a8865909e8"},
    {file = "websockets-15.0.1-cp311-cp311-musllinux_1_2_i686.whl", hash = "sha256:693f0192126df6c2327cce3baa7c06f2a117575e32ab2308f7f8216c29d9e2e3"},
    {file = "websockets-15.0.1-cp311-cp311-musllinux_1_2_x86_64.whl", hash = "sha256:54479983bd5fb469c38f2f5c7e3a24f9a4e70594cd68cd1fa6b9340dadaff7cf"},
    {file = "websockets-15.0.1-cp311-cp311-win32.whl", hash = "sha256:16b6c1b3e57799b9d38427dda63edcbe4926352c47cf88588c0be4ace18dac85"},
    {file = "websockets-15.0.1-cp311-cp311-win_amd64.whl", hash = "sha256:27ccee0071a0e75d22cb35849b1db43f2ecd3e161041ac1ee9d2352ddf72f065"},
    {file = "websockets-15.0.1-cp312-cp312-macosx_10_13_universal2.whl", hash = "sha256:3e90baa811a5d73f3ca0bcbf32064d663ed81318ab225ee4f427ad4e26e5aff3"},
    {file = "websockets-15.0.1-cp312-cp312-macosx_10_13_x86_64.whl", hash = "sha256:592f1a9fe869c778694f0aa806ba0374e97648ab57936f092fd9d87f8bc03665"},
    {file = "websockets-15.0.1-cp312-cp312-macosx_11_0_arm64.whl", hash = "sha256:0701bc3cfcb9164d04a14b149fd74be7347a530ad3bbf15ab2c678a2cd3dd9a2"},
    {file = "websockets-15.0.1-cp312-cp312-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:e8b56bdcdb4505c8078cb6c7157d9811a85790f2f2b3632c7d1462ab5783d215"},
    {file = "websockets-15.0.1-cp312-cp312-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:0af68c55afbd5f07986df82831c7bff04846928ea8d1fd7f30052638788bc9b5"},
    {file = "websockets-15.0.1-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:64dee438fed052b52e4f98f76c5790513235efaa1ef7f3f2192c392cd7c91b65"},
    {file = "websockets-15.0.1-cp312-cp312-musllinux_1_2_aarch64.whl", hash = "sha256:d5f6b181bb38171a8ad1d6aa58a67a6aa9d4b38d0f8c5f496b9e42561dfc62fe"},
    {file = "websockets-15.0.1-cp312-cp312-musllinux_1_2_i686.whl", hash = "sha256:5d54b09eba2bada6011aea5375542a157637b91029687eb4fdb2dab11059c1b4"},
    {file = "websockets-15.0.1-cp312-cp312-musllinux_1_2_x86_64.whl", hash = "sha256:3be571a8b5afed347da347bfcf27ba12b069d9d7f42cb8c7028b5e98bbb12597"},
    {file = "websockets-15.0.1-cp312-cp312-win32.whl", hash = "sha256:c338ffa0520bdb12fbc527265235639fb76e7bc7faafbb93f6ba80d9c06578a9"},
    {file = "websockets-15.0.1-cp312-cp312-win_amd64.whl", hash = "sha256:fcd5cf9e305d7b8338754470cf69cf81f420459dbae8a3b40cee57417f4614a7"},
    {file = "websockets-15.0.1-cp313-cp313-macosx_10_13_universal2.whl", hash = "sha256:ee443ef070bb3b6ed74514f5efaa37a252af57c90eb33b956d35c8e9c10a1931"},
    {file = "websockets-15.0.1-cp313-cp313-macosx_10_13_x86_64.whl", hash = "sha256:5a939de6b7b4e18ca683218320fc67ea886038265fd1ed30173f5ce3f8e85675"},
    {file = "websockets-15.0.1-cp313-cp313-macosx_11_0_arm64.whl", hash = "sha256:746ee8dba912cd6fc889a8147168991d50ed70447bf18bcda7039f7d2e3d9151"},
    {file = "websockets-15.0.1-cp313-cp313-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:595b6c3969023ecf9041b2936ac3827e4623bfa3ccf007575f04c5a6aa318c22"},
    {file = "websockets-15.0.1-cp313-cp313-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:3c714d2fc58b5ca3e285461a4cc0c9a66bd0e24c5da9911e30158286c9b5be7f"},
    {file = "websockets-15.0.1-cp313-cp313-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:0f3c1e2ab208db911594ae5b4f79addeb3501604a165019dd221c0bdcabe4db8"},
    {file = "websockets-15.0.1-cp313-cp313-musllinux_1_2_aarch64.whl", hash = "sha256:229cf1d3ca6c1804400b0a9790dc66528e08a6a1feec0d5040e8b9eb14422375"},
    {file = "websockets-15.0.1-cp313-cp313-musllinux_1_2_i686.whl", hash = "sha256:756c56e867a90fb00177d530dca4b097dd753cde348448a1012ed6c5131f8b7d"},
    {file = "websockets-15.0.1-cp313-cp313-musllinux_1_2_x86_64.whl", hash = "sha256:558d023b3df0bffe50a04e710bc87742de35060580a293c2a984299ed83bc4e4"},
    {file = "websockets-15.0.1-cp313-cp313-win32.whl", hash = "sha256:ba9e56e8ceeeedb2e080147ba85ffcd5cd0711b89576b83784d8605a7df455fa"},
    {file = "websockets-15.0.1-cp313-cp313-win_amd64.whl", hash = "sha256:e09473f095a819042ecb2ab9465aee615bd9c2028e4ef7d933600a8401c79561"},
    {file = "websockets-15.0.1-cp39-cp39-macosx_10_9_universal2.whl", hash = "sha256:5f4c04ead5aed67c8a1a20491d54cdfba5884507a48dd798ecaf13c74c4489f5"},
    {file = "websockets-15.0.1-cp39-cp39-macosx_10_9_x86_64.whl", hash = "sha256:abdc0c6c8c648b4805c5eacd131910d2a7f6455dfd3becab248ef108e89ab16a"},
    {file = "websockets-15.0.1-cp39-cp39-macosx_11_0_arm64.whl", hash = "sha256:a625e06551975f4b7ea7102bc43895b90742746797e2e14b70ed61c43a90f09b"},
    {file = "websockets-15.0.1-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:d591f8de75824cbb7acad4e05d2d710484f15f29d4a915092675ad3456f11770"},
    {file = "websockets-15.0.1-cp39-cp39-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:47819cea040f31d670cc8d324bb6435c6f133b8c7a19ec3d61634e62f8d8f9eb"},
    {file = "websockets-15.0.1-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:ac017dd64572e5c3bd01939121e4d16cf30e5d7e110a119399cf3133b63ad054"},
    {file = "websockets-15.0.1-cp39-cp39-musllinux_1_2_aarch64.whl", hash = "sha256:4a9fac8e469d04ce6c25bb2610dc535235bd4aa14996b4e6dbebf5e007eba5ee"},
    {file = "websockets-15.0.1-cp39-cp39-musllinux_1_2_i686.whl", hash = "sha256:363c6f671b761efcb30608d24925a382497c12c506b51661883c3e22337265ed"},
    {file = "websockets-15.0.1-cp39-cp39-musllinux_1_2_x86_64.whl", hash = "sha256:2034693ad3097d5355bfdacfffcbd3ef5694f9718ab7f29c29689a9eae841880"},
    {file = "websockets-15.0.1-cp39-cp39-win32.whl", hash = "sha256:3b1ac0d3e594bf121308112697cf4b32be538fb1444468fb0a6ae4feebc83411"},
    {file = "websockets-15.0.1-cp39-cp39-win_amd64.whl", hash = "sha256:b7643a03db5c95c799b89b31c036d5f27eeb4d259c798e878d6937d71832b1e4"},
    {file = "websockets-15.0.1-pp310-pypy310_pp73-macosx_10_15_x86_64.whl", hash = "sha256:0c9e74d766f2818bb95f84c25be4dea09841ac0f734d1966f415e4edfc4ef1c3"},
    {file = "websockets-15.0.1-pp310-pypy310_pp73-macosx_11_0_arm64.whl", hash = "sha256:1009ee0c7739c08a0cd59de430d6de452a55e42d6b522de7aa15e6f67db0b8e1"},
    {file = "websockets-15.0.1-pp310-pypy310_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:76d1f20b1c7a2fa82367e04982e708723ba0e7b8d43aa643d3dcd404d74f1475"},
    {file = "websockets-15.0.1-pp310-pypy310_pp73-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:f29d80eb9a9263b8d109135351caf568cc3f80b9928bccde535c235de55c22d9"},
    {file = "websockets-15.0.1-pp310-pypy310_pp73-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:b359ed09954d7c18bbc1680f380c7301f92c60bf924171629c5db97febb12f04"},
    {file = "websockets-15.0.1-pp310-pypy310_pp73-win_amd64.whl", hash = "sha256:cad21560da69f4ce7658ca2cb83138fb4cf695a2ba3e475e0559e05991aa8122"},
    {file = "websockets-15.0.1-pp39-pypy39_pp73-macosx_10_15_x86_64.whl", hash = "sha256:7f493881579c90fc262d9cdbaa05a6b54b3811c2f300766748db79f098db9940"},
    {file = "websockets-15.0.1-pp39-pypy39_pp73-macosx_11_0_arm64.whl", hash = "sha256:47b099e1f4fbc95b701b6e85768e1fcdaf1630f3cbe4765fa216596f12310e2e"},
    {file = "websockets-15.0.1-pp39-pypy39_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl", hash = "sha256:67f2b6de947f8c757db2db9c71527933ad0019737ec374a8a6be9a956786aaf9"},
    {file = "websockets-15.0.1-pp39-pypy39_pp73-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl", hash = "sha256:d08eb4c2b7d6c41da6ca0600c077e93f5adcfd979cd777d747e9ee624556da4b"},
    {file = "websockets-15.0.1-pp39-pypy39_pp73-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl", hash = "sha256:4b826973a4a2ae47ba357e4e82fa44a463b8f168e1ca775ac64521442b19e87f"},
    {file = "websockets-15.0.1-pp39-pypy39_pp73-win_amd64.whl", hash = "sha256:21c1fa28a6a7e3cbdc171c694398b6df4744613ce9b36b1a498e816787e28123"},
    {file = "websockets-15.0.1-py3-none-any.whl", hash = "sha256:f7a866fbc1e97b5c617ee4116daaa09b722101d4a3c170c787450ba409f9736f"},
    {file = "websockets-15.0.1.tar.gz", hash = "sha256:82544de02076bafba038ce055ee6412d68da13ab47f0c60cab827346de828dee"},
]

[metadata]
lock-version = "2.1"
python-versions = "^3.10"
content-hash = "da18991137073de9ef93311289cf67020d9b2302b4c1b5196e0d129ee9487de3"

<File--- tcs-poc/tcs-api/Dockerfile --->
# Multi-stage Dockerfile for Trade API
FROM python:3.11-slim-bullseye as builder

# Set environment variables
ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PIP_NO_CACHE_DIR=1 \
    PIP_DISABLE_PIP_VERSION_CHECK=1

# Install system dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Install Poetry
RUN pip install poetry

# Set work directory
WORKDIR /app

# Copy Poetry files
COPY pyproject.toml poetry.lock* ./

# Configure Poetry and install dependencies
RUN poetry config virtualenvs.create false \
    && poetry install --no-dev --no-interaction --no-ansi

# Production stage
FROM python:3.11-slim-bullseye as production

# Set environment variables
ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PATH="/app/.venv/bin:$PATH"

# Create non-root user
RUN groupadd -r appuser && useradd -r -g appuser appuser

# Set work directory
WORKDIR /app

# Copy installed packages from builder stage
COPY --from=builder /usr/local/lib/python3.11/site-packages /usr/local/lib/python3.11/site-packages
COPY --from=builder /usr/local/bin /usr/local/bin

# Copy application code
COPY src/ ./src/
COPY pyproject.toml ./

# Create necessary directories and set permissions
RUN mkdir -p /app/logs && \
    chown -R appuser:appuser /app

# Switch to non-root user
USER appuser

# Expose port
EXPOSE 8000

# Health check
HEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8000/api/v1/trades/new -X POST \
        -H "Content-Type: application/json" \
        -d '{"trade_type": "InterestRateSwap"}' || exit 1

# Start application
CMD ["gunicorn", "trade_api.main:app", \
     "--workers", "4", \
     "--worker-class", "uvicorn.workers.UvicornWorker", \
     "--bind", "0.0.0.0:8000", \
     "--access-logfile", "-", \
     "--error-logfile", "-"]

<File--- tcs-poc/tcs-api/test_new_endpoint.py --->
"""Quick test script for /new endpoint."""

import sys
from pathlib import Path

# Add src to path
sys.path.insert(0, str(Path(__file__).parent / "src"))

from trade_api.models import TradeTemplateFactory

# Test factory directly
print("Testing TradeTemplateFactory...")
factory = TradeTemplateFactory(template_dir="templates", schema_version="v1")

print(f"Factory: {factory}")
print(f"Available types: {factory.get_available_types()}")
print(f"Available IRS subtypes: {factory.get_available_subtypes('irs')}")
print(f"Available leg types: {factory.get_available_leg_types()}")

# Test creating assembler
print("\nCreating assembler for Vanilla EUR IRS...")
assembler = factory.create_assembler(
    trade_type="irs",
    subtype="vanilla",
    currency="eur",
    leg_configs=[
        {"type": "fixed", "legType": "Pay"},
        {"type": "floating-ibor", "legType": "Receive"}
    ]
)

print(f"Assembler: {assembler}")

# Assemble trade
print("\nAssembling trade...")
trade_dict = assembler.assemble()

print(f"Trade keys: {list(trade_dict.keys())}")
print(f"Trade type: {trade_dict.get('tradeType')}")
print(f"Asset class: {trade_dict.get('assetClass')}")
print(f"Leg count: {len(trade_dict.get('legs', []))}")

if 'legs' in trade_dict:
    for i, leg in enumerate(trade_dict['legs']):
        print(f"  Leg {i}: type={leg.get('rateType')}, legType={leg.get('legType')}")

print("\n Factory test successful!")

<File--- tcs-poc/tcs-api/docker-compose.yml --->
version: '3.8'

services:
  trade-api:
    build: .
    ports:
      - "8000:8000"
    environment:
      - TRADE_API_DEBUG=false
      - TRADE_API_HOST=0.0.0.0
      - TRADE_API_PORT=8000
      - TRADE_API_MAX_TRADES_IN_MEMORY=10000
    volumes:
      - ./logs:/app/logs
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/api/v1/trades/new", "-X", "POST", "-H", "Content-Type: application/json", "-d", '{"trade_type": "InterestRateSwap"}']
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # Optional: Add nginx reverse proxy
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - trade-api
    restart: unless-stopped
    profiles:
      - with-nginx

volumes:
  logs:

<File--- tcs-poc/tcs-api/run-api.sh --->
#!/usr/bin/env bash

###############################################################################
# Trade API - Poetry Runner Script
#
# This script starts the Trade API using Poetry with configurable options
# for both development and production environments.
#
# Usage:
#   ./run-api.sh [mode]
#
# Modes:
#   dev       - Development mode with auto-reload (default)
#   prod      - Production mode with Gunicorn workers
#   test      - Run tests before starting server
#   help      - Show this help message
#
# Requirements:
#   - Poetry installed and in PATH
#   - Dependencies installed (poetry install)
#   - .env file configured (copy from .env.example)
###############################################################################

set -e  # Exit on error

# Color codes for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Default values
MODE="${1:-dev}"
HOST="${TRADE_API_HOST:-0.0.0.0}"
PORT="${TRADE_API_PORT:-5000}"
WORKERS="${TRADE_API_WORKERS:-4}"

###############################################################################
# Helper Functions
###############################################################################

print_header() {
    echo -e "${BLUE}========================================${NC}"
    echo -e "${BLUE}  Trade API - FastAPI Application${NC}"
    echo -e "${BLUE}========================================${NC}"
    echo
}

print_success() {
    echo -e "${GREEN}${NC} $1"
}

print_error() {
    echo -e "${RED}${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}${NC} $1"
}

print_info() {
    echo -e "${BLUE}${NC} $1"
}

show_help() {
    cat << EOF
Trade API - Poetry Runner Script

USAGE:
    ./run-api.sh [mode]

MODES:
    dev       Development mode with auto-reload (default)
    prod      Production mode with Gunicorn workers
    test      Run tests before starting server
    help      Show this help message

EXAMPLES:
    ./run-api.sh              # Start in development mode
    ./run-api.sh dev          # Start in development mode
    ./run-api.sh prod         # Start in production mode
    ./run-api.sh test         # Run tests then start

ENVIRONMENT VARIABLES:
    TRADE_API_HOST            Host to bind to (default: 0.0.0.0)
    TRADE_API_PORT            Port to bind to (default: 8000)
    TRADE_API_WORKERS         Number of worker processes (default: 4, prod only)
    TRADE_API_DEBUG           Enable debug mode (default: true)

CONFIGURATION:
    Edit .env file to customize settings
    Copy from .env.example if not exists

For more information, see README.md and DEPLOYMENT_GUIDE.md
EOF
}

check_poetry() {
    if ! command -v poetry &> /dev/null; then
        print_error "Poetry is not installed or not in PATH"
        echo
        echo "Install Poetry with:"
        echo "  curl -sSL https://install.python-poetry.org | python3 -"
        echo "  export PATH=\"\$HOME/.local/bin:\$PATH\""
        echo
        exit 1
    fi
    print_success "Poetry found: $(poetry --version)"
}

check_dependencies() {
    if [ ! -f "pyproject.toml" ]; then
        print_error "pyproject.toml not found. Are you in the tcs-api directory?"
        exit 1
    fi

    # Check if virtual environment exists
    if ! poetry env info &> /dev/null; then
        print_warning "Virtual environment not found. Installing dependencies..."
        poetry install
    else
        print_success "Virtual environment found"
    fi
}

check_env_file() {
    if [ ! -f ".env" ]; then
        if [ -f ".env.example" ]; then
            print_warning ".env file not found. Copying from .env.example..."
            cp .env.example .env
            print_success ".env file created"
        else
            print_warning ".env file not found. Using default configuration."
        fi
    else
        print_success ".env file found"
    fi
}

run_tests() {
    print_info "Running tests..."
    echo
    if poetry run pytest tests/test_setup.py -v; then
        print_success "All tests passed"
        echo
    else
        print_error "Tests failed"
        exit 1
    fi
}

start_dev_server() {
    print_info "Starting development server..."
    print_info "Mode: Development with auto-reload"
    print_info "Host: $HOST"
    print_info "Port: $PORT"
    echo
    print_success "API will be available at:"
    echo "  - Local:   http://localhost:$PORT"
    echo "  - Network: http://$HOST:$PORT"
    echo "  - API Docs: http://localhost:$PORT/docs"
    echo
    print_info "Press Ctrl+C to stop the server"
    echo

    # Start Uvicorn with auto-reload
    poetry run uvicorn trade_api.main:app \
        --host "$HOST" \
        --port "$PORT" \
        --reload
}

start_prod_server() {
    print_info "Starting production server..."
    print_info "Mode: Production with Gunicorn"
    print_info "Host: $HOST"
    print_info "Port: $PORT"
    print_info "Workers: $WORKERS"
    echo
    print_success "API will be available at:"
    echo "  - Local:   http://localhost:$PORT"
    echo "  - Network: http://$HOST:$PORT"
    echo "  - API Docs: http://localhost:$PORT/docs (if debug enabled)"
    echo
    print_info "Press Ctrl+C to stop the server"
    echo

    # Start Gunicorn with Uvicorn workers
    poetry run gunicorn trade_api.main:app \
        --workers "$WORKERS" \
        --worker-class uvicorn.workers.UvicornWorker \
        --bind "$HOST:$PORT" \
        --access-logfile - \
        --error-logfile -
}

###############################################################################
# Main Script
###############################################################################

print_header

# Handle help command
if [ "$MODE" = "help" ] || [ "$MODE" = "-h" ] || [ "$MODE" = "--help" ]; then
    show_help
    exit 0
fi

# Verify prerequisites
print_info "Checking prerequisites..."
check_poetry
check_dependencies
check_env_file
echo

# Handle different modes
case "$MODE" in
    dev|development)
        start_dev_server
        ;;

    prod|production)
        start_prod_server
        ;;

    test)
        run_tests
        print_info "Tests completed. Starting development server..."
        echo
        start_dev_server
        ;;

    *)
        print_error "Unknown mode: $MODE"
        echo
        echo "Valid modes: dev, prod, test, help"
        echo "Run './run-api.sh help' for more information"
        exit 1
        ;;
esac

<File--- tcs-poc/tcs-api/nginx.conf --->
events {
    worker_connections 1024;
}

http {
    upstream trade_api {
        server trade-api:8000;
    }

    server {
        listen 80;
        server_name localhost;

        # Security headers
        add_header X-Frame-Options DENY;
        add_header X-Content-Type-Options nosniff;
        add_header X-XSS-Protection "1; mode=block";

        # Gzip compression
        gzip on;
        gzip_types text/plain application/json application/javascript text/css;

        # API routes
        location /api/ {
            proxy_pass http://trade_api;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # Timeouts
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
        }

        # API documentation
        location /docs {
            proxy_pass http://trade_api;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # Health check
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }

        # Default route
        location / {
            return 301 /docs;
        }
    }
}

<File--- tcs-poc/tcs-api/setup.sh --->
#!/bin/bash

# Trade API Quick Setup Script for Debian/Ubuntu
# This script automates the installation process described in DEPLOYMENT_GUIDE.md

set -e  # Exit on any error

echo " Trade API Quick Setup Script"
echo "================================"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# Function to print colored output
print_status() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# Check if running as root
if [[ $EUID -eq 0 ]]; then
   print_error "This script should not be run as root for security reasons"
   exit 1
fi

# Step 1: Update system packages
print_status "Updating system packages..."
sudo apt update && sudo apt upgrade -y

# Step 2: Install essential dependencies
print_status "Installing essential build tools and dependencies..."
sudo apt install -y \
    curl \
    wget \
    git \
    build-essential \
    python3 \
    python3-pip \
    python3-venv \
    python3-dev \
    ca-certificates \
    gnupg \
    lsb-release

# Step 3: Check Python version
print_status "Checking Python version..."
PYTHON_VERSION=$(python3 --version | cut -d' ' -f2)
PYTHON_MAJOR=$(echo $PYTHON_VERSION | cut -d'.' -f1)
PYTHON_MINOR=$(echo $PYTHON_VERSION | cut -d'.' -f2)

if [[ $PYTHON_MAJOR -lt 3 ]] || [[ $PYTHON_MAJOR -eq 3 && $PYTHON_MINOR -lt 10 ]]; then
    print_warning "Python version $PYTHON_VERSION detected. Python 3.10+ is recommended."
    print_warning "Consider upgrading Python or the setup may fail."
    read -p "Continue anyway? (y/N): " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
else
    print_status "Python $PYTHON_VERSION detected - compatible "
fi

# Step 4: Install Poetry
print_status "Installing Poetry..."
if command -v poetry &> /dev/null; then
    print_status "Poetry already installed: $(poetry --version)"
else
    curl -sSL https://install.python-poetry.org | python3 -
    
    # Add Poetry to PATH
    export PATH="$HOME/.local/bin:$PATH"
    
    # Add to bashrc if not already there
    if ! grep -q 'export PATH="$HOME/.local/bin:$PATH"' ~/.bashrc; then
        echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
        print_status "Added Poetry to PATH in ~/.bashrc"
    fi
    
    # Verify installation
    if command -v poetry &> /dev/null; then
        print_status "Poetry installed successfully: $(poetry --version)"
    else
        print_error "Poetry installation failed"
        exit 1
    fi
fi

# Step 5: Install project dependencies
print_status "Installing project dependencies..."
if [[ -f "pyproject.toml" ]]; then
    poetry install
    print_status "Dependencies installed successfully "
else
    print_error "pyproject.toml not found. Are you in the correct directory?"
    exit 1
fi

# Step 6: Verify template directory
print_status "Verifying template directory structure..."
if [[ -d "templates/v1" ]]; then
    TEMPLATE_COUNT=$(find templates/v1 -name "*.json" | wc -l)
    print_status "Found $TEMPLATE_COUNT template files in templates/v1/ "
else
    print_error "templates/v1 directory not found. Template system will not work."
    exit 1
fi

# Step 7: Setup environment
print_status "Setting up environment configuration..."
if [[ ! -f ".env" ]]; then
    if [[ -f ".env.example" ]]; then
        cp .env.example .env
        print_status "Created .env from .env.example"
    else
        print_warning ".env.example not found, creating basic .env"
        cat > .env << EOF
TRADE_API_DEBUG=true
TRADE_API_HOST=0.0.0.0
TRADE_API_PORT=8000
TRADE_API_MAX_TRADES_IN_MEMORY=10000
EOF
    fi
else
    print_status ".env already exists, skipping creation"
fi

# Step 8: Run tests
print_status "Running tests to verify installation..."
if poetry run pytest tests/test_setup.py -v; then
    print_status "All tests passed "
else
    print_warning "Some tests failed. This may be expected if features are still in development."
    print_warning "Check the output above for details."
    read -p "Continue anyway? (y/N): " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
fi

# Step 9: Test application startup and /new endpoint
print_status "Testing application startup..."
if poetry run python -c "from trade_api.main import app; print('FastAPI app created successfully')"; then
    print_status "Application startup test passed "
else
    print_error "Application startup test failed"
    exit 1
fi

print_status "Testing /new endpoint..."
if poetry run python -c "
from fastapi.testclient import TestClient
from trade_api.main import app
client = TestClient(app)
response = client.get('/api/v1/trades/new?trade_type=irswap&trade_subtype=vanilla')
assert response.status_code == 200, f'Expected 200, got {response.status_code}'
assert response.json()['success'] is True, 'Expected success=True'
print('GET /api/v1/trades/new endpoint working ')
"; then
    print_status "/new endpoint test passed "
else
    print_error "/new endpoint test failed"
    exit 1
fi

# Final instructions
echo
echo " Setup completed successfully!"
echo "================================"
echo
echo "To start the development server:"
echo "  poetry run uvicorn trade_api.main:app --host 0.0.0.0 --port 8000 --reload"
echo
echo "To start the production server:"
echo "  poetry run gunicorn trade_api.main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000"
echo
echo "API will be available at:"
echo "  - Local: http://localhost:8000"
echo "  - API Docs: http://localhost:8000/docs"
echo "  - Network: http://$(hostname -I | awk '{print $1}'):8000"
echo
echo "For more details, see DEPLOYMENT_GUIDE.md"

<File--- tcs-poc/tcs-api/pyproject.toml --->
[tool.poetry]
name = "trade-api"
version = "0.1.0"
description = "FastAPI-based Trade API system for processing financial swap deals"
authors = ["Trade API Team"]
readme = "README.md"
packages = [{include = "trade_api", from = "src"}]

[tool.poetry.dependencies]
python = "^3.10"
fastapi = "^0.104.1"
pydantic = "^2.5.0"
uvicorn = {extras = ["standard"], version = "^0.24.0"}
gunicorn = "^21.2.0"
pydantic-settings = "^2.12.0"
orjson = "^3.11.5"
jmespath = "^1.0.1"
glom = "^25.12.0"

[tool.poetry.group.dev.dependencies]
pytest = "^7.4.3"
hypothesis = "^6.92.0"
pytest-asyncio = "^0.21.1"
httpx = "^0.25.2"
requests = "^2.32.5"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py", "*_test.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
asyncio_mode = "auto"

[tool.poetry.scripts]
trade-api = "trade_api.main:app"

<File--- tcs-poc/tcs-api/.env.example --->
# Trade API Environment Configuration
# Copy this file to .env and modify as needed

# Application settings
TRADE_API_DEBUG=true
TRADE_API_HOST=127.0.0.1
TRADE_API_PORT=8000

# API settings
TRADE_API_API_TITLE="Trade API"
TRADE_API_API_VERSION="0.1.0"

# Trade store settings
TRADE_API_MAX_TRADES_IN_MEMORY=10000

<File--- tcs-poc/tcs-api/docker-setup.sh --->
#!/bin/bash

# Trade API Docker Quick Setup Script
# This script sets up the Trade API using Docker for easy deployment

set -e  # Exit on any error

echo " Trade API Docker Setup Script"
echo "================================="

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Function to print colored output
print_status() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

print_step() {
    echo -e "${BLUE}[STEP]${NC} $1"
}

# Check if Docker is installed
print_step "Checking Docker installation..."
if ! command -v docker &> /dev/null; then
    print_error "Docker is not installed. Please install Docker first:"
    echo "  curl -fsSL https://get.docker.com -o get-docker.sh"
    echo "  sudo sh get-docker.sh"
    echo "  sudo usermod -aG docker \$USER"
    echo "  # Log out and back in, then run this script again"
    exit 1
fi

# Check if Docker Compose is available
if ! command -v docker-compose &> /dev/null && ! docker compose version &> /dev/null; then
    print_error "Docker Compose is not available. Please install Docker Compose:"
    echo "  sudo apt install docker-compose-plugin"
    exit 1
fi

print_status "Docker is installed and ready "

# Check if user is in docker group
if ! groups $USER | grep -q docker; then
    print_warning "User $USER is not in the docker group."
    print_warning "You may need to run docker commands with sudo, or add yourself to the docker group:"
    echo "  sudo usermod -aG docker $USER"
    echo "  # Then log out and back in"
fi

# Create logs directory
print_step "Creating logs directory..."
mkdir -p logs

# Build the Docker image
print_step "Building Docker image..."
docker build -t trade-api:latest .

if [ $? -eq 0 ]; then
    print_status "Docker image built successfully "
else
    print_error "Docker image build failed"
    exit 1
fi

# Ask user for deployment option
echo
echo "Choose deployment option:"
echo "1) Simple Docker run (single container)"
echo "2) Docker Compose (recommended)"
echo "3) Docker Compose with nginx reverse proxy"
read -p "Enter your choice (1-3): " choice

case $choice in
    1)
        print_step "Starting Trade API with simple Docker run..."
        docker run -d \
            --name trade-api-container \
            -p 8000:8000 \
            -v $(pwd)/logs:/app/logs \
            -e TRADE_API_DEBUG=false \
            -e TRADE_API_HOST=0.0.0.0 \
            -e TRADE_API_PORT=8000 \
            trade-api:latest
        
        if [ $? -eq 0 ]; then
            print_status "Container started successfully "
            echo "API available at: http://localhost:8000"
            echo "API docs at: http://localhost:8000/docs"
        else
            print_error "Failed to start container"
            exit 1
        fi
        ;;
    
    2)
        print_step "Starting Trade API with Docker Compose..."
        if command -v docker-compose &> /dev/null; then
            docker-compose up -d
        else
            docker compose up -d
        fi
        
        if [ $? -eq 0 ]; then
            print_status "Services started successfully "
            echo "API available at: http://localhost:8000"
            echo "API docs at: http://localhost:8000/docs"
        else
            print_error "Failed to start services"
            exit 1
        fi
        ;;
    
    3)
        print_step "Starting Trade API with Docker Compose and nginx..."
        if command -v docker-compose &> /dev/null; then
            docker-compose --profile with-nginx up -d
        else
            docker compose --profile with-nginx up -d
        fi
        
        if [ $? -eq 0 ]; then
            print_status "Services started successfully "
            echo "API available at: http://localhost (port 80)"
            echo "API docs at: http://localhost/docs"
            echo "Direct API access: http://localhost:8000"
        else
            print_error "Failed to start services"
            exit 1
        fi
        ;;
    
    *)
        print_error "Invalid choice"
        exit 1
        ;;
esac

# Wait a moment for services to start
print_step "Waiting for services to start..."
sleep 10

# Test the API
print_step "Testing API health..."
if curl -s -X POST "http://localhost:8000/api/v1/trades/new" \
   -H "Content-Type: application/json" \
   -d '{"trade_type": "InterestRateSwap"}' > /dev/null; then
    print_status "API health check passed "
else
    print_warning "API health check failed. The service might still be starting up."
    print_warning "Check logs with: docker logs trade-api-container"
fi

# Show running containers
print_step "Running containers:"
docker ps --filter "name=trade-api"

echo
echo " Docker setup completed!"
echo "=========================="
echo
echo "Useful commands:"
echo "  View logs:     docker logs trade-api-container -f"
echo "  Stop service:  docker stop trade-api-container"
echo "  Start service: docker start trade-api-container"
echo "  Remove all:    docker-compose down --volumes"
echo
echo "API Endpoints:"
echo "  POST /api/v1/trades/new      - Create new trade"
echo "  POST /api/v1/trades/save     - Save trade data"
echo "  POST /api/v1/trades/validate - Validate trade"
echo
echo "For more details, see DEPLOYMENT_GUIDE.md"

<File--- tcs-poc/tcs-api/test_api_endpoint.sh --->
#!/bin/bash

# Test the /new endpoint

echo "Testing /api/v1/trades/new endpoint..."
echo ""

# Test 1: Vanilla EUR IRS
echo "Test 1: Vanilla EUR IRS"
curl -X GET "http://localhost:8000/api/v1/trades/new?trade_type=irs&subtype=vanilla&currency=EUR&leg_types=fixed,floating-ibor" \
  -H "accept: application/json" | jq '.'

echo ""
echo "---"
echo ""

# Test 2: Check Swagger docs
echo "Swagger UI available at: http://localhost:8000/docs"
echo "ReDoc available at: http://localhost:8000/redoc"

<File--- tcs-poc/json-examples/polar/commodity-option-new-polar.txt --->
{
  "general": {
    "tradeKey": {
      "tradeId": "",
      "label": ""
    },
    "transactionInformation": {
      "transactionRoles": {
        "marketer": null,
        "transactionOriginator": null,
        "priceMaker": "kbagci",
        "transactionAcceptor": null,
        "parameterGrantor": null
      },
      "executionDetails": {
        "executionDateTime": "2026-01-16T11:30:00Z",
        "bestExecutionApplicable": null,
        "executionVenue": {
          "executionVenue": null,
          "venueTransactionID": null,
          "executionBroker": null,
          "executionBrokeragePayer": {
            "wePay": null
          },
          "executionVenueMIC": null,
          "executionVenueType": "OffFacility"
        },
        "clearingVenue": null,
        "reportTrackingNumber": null,
        "omsOrderID": null,
        "isOffMarketPrice": false,
        "clientInstructionTime": null
      },
      "packageTradeDetails": {
        "isPackageTrade": false,
        "packageIdentifier": null,
        "packagePriceOrSpread": null,
        "packageType": null,
        "packagePrice": null,
        "packagePriceCcy": null,
        "priceNotation": null,
        "useTradeIdAsPackageId": true
      },
      "blockAllocationDetails": null
    },
    "common": {
      "book": "MEWEST01HS",
      "accountReference": null,
      "tradeDate": "2026-01-15T06:00:00Z",
      "counterparty": "02519916",
      "novatedToCounterparty": null,
      "counterpartyAccountReference": null,
      "inputDate": "2026-01-15T06:00:00Z",
      "orderTime": null,
      "comment": null,
      "initialMargin": null,
      "backoutBook": null,
      "tradingStrategy": null,
      "ddeEligible": {
        "No": null
      },
      "backoutTradingStrategy": null,
      "externalReference": null,
      "internalReference": null,
      "initialMarginDeliveryDate": null,
      "initialMarginDescription": null,
      "structureDetails": null,
      "backoutEntity": null,
      "salesGroup": null,
      "includeFeeEngine": [
        "none"
      ],
      "acsLinkType": null,
      "regionOrAccount": null,
      "originatingSystem": null,
      "stp": {
        "No": null
      },
      "sourceSystem": null,
      "cashflowHedgeNotification": false,
      "IRDAdvisory": false,
      "isCustomBasket": null
    },
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "leg": {
    "commodityOptionType": {
      "commodityFinancialOptionModel": {
        "optionExercise": {
          "optionExerciseType": {
            "europeanExercise": null
          },
          "settlementMethod": {
            "CashOrEfrp": null
          },
          "swapExpiryDate": null,
          "accumulation": {
            "None": null
          },
          "automaticExercise": false,
          "writtenConfirmation": false,
          "settlementFxConversionFxType": false
        },
        "notionalQuantity": {
          "notionalVolume": {
            "volumeUnit": "LB",
            "volumeFrequency": {
              "Total": null
            },
            "volumeFuturesContracts": 0
          },
          "cashNotional": null
        },
        "strikeCurrency": "EUR",
        "commodityStrikePrice": {
          "fixedPriceLeg": {
            "strikeUnit": "LB",
            "strikePayout": {
              "ITM": null
            },
            "strikeManagementPair": null
          }
        },
        "commodityPayoff": {
          "priceCalculation": {
            "spread": 0,
            "finalPriceRounding": {
              "method": {
                "halfUp": null
              },
              "precision": {
                "_3dp": null
              }
            },
            "intermediatePriceRounding": {
              "method": {
                "halfUp": null
              },
              "precision": {
                "_3dp": null
              }
            },
            "multiAssetParams": {
              "commonPricing": true,
              "basketMultiplier": 0
            },
            "pricingModel": [
              {
                "assetPricing": {
                  "ratesetRuleCode": {
                    "DuringPeriod": null
                  },
                  "ratesetExprCode": "LIFFE_AG",
                  "assetWeight": 1,
                  "assetUnit": "LB",
                  "conversion": null,
                  "currency": "EUR",
                  "assetFixingReferences": {
                    "assets": {
                      "spread": 0,
                      "commodityFixingRef": {
                        "identifiedAsset": {
                          "commodityCode": "EGT",
                          "exchangeInstrument": false
                        },
                        "commodityReference": {
                          "commodityRateset": "EGT",
                          "referenceType": {
                            "asset": "EGT"
                          },
                          "referencePriceFrameworkModel": {},
                          "deliveryExpiry": {}
                        },
                        "reutersCode": null
                      },
                      "style": {
                        "bullet": {
                          "fixingTime": null,
                          "bulletPriceRounding": {
                            "method": {
                              "halfUp": null
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "fxFixing": {
                  "commonPricing": false,
                  "fxFixing": {
                    "averagingCalcMethod": {
                      "avgAssetFx": null
                    },
                    "spread": 0,
                    "conversionFactor": 0,
                    "fxFixingRef": {
                      "quotedCurrencyPair": {
                        "ccy1": "",
                        "ccy2": ""
                      },
                      "fxInfoSource": {
                        "rateSource": "",
                        "rateSourcePage": null,
                        "rateSourcePageHeading": null
                      },
                      "fixingTime": null
                    },
                    "style": {
                      "average": {
                        "rounding": {
                          "method": {
                            "halfUp": null
                          },
                          "precision": {
                            "_3dp": null
                          }
                        },
                        "fixingTime": null,
                        "averagePeriod": null
                      }
                    },
                    "fxTerms": null
                  }
                }
              }
            ],
            "pricingStyle": {
              "AVG_CMD_AVG_FX": null
            }
          },
          "commodityPeriods": null
        },
        "commodityOptionPeriods": {
          "periodShortCode": null,
          "singleOrMultiPeriod": {
            "SinglePeriod": null
          },
          "effectiveDate": {
            "dateAdjustments": {
              "businessCenters": []
            },
            "adjustedDate": {
              "unadjustedDate": "",
              "adjustedDate": ""
            }
          },
          "terminationDate": {
            "dateAdjustments": {
              "businessCenters": []
            },
            "adjustedDate": {
              "unadjustedDate": "",
              "adjustedDate": ""
            }
          },
          "periodAlignOn": {
            "SwapEnd": null
          },
          "periodAlignment": {
            "SwapEnd": null
          },
          "rollDirectionEnum": {
            "forward": null
          },
          "rollDirection": "PBD",
          "calculationPeriods": {
            "calculationPeriodsSchedule": {
              "balanceOfFirstPeriod": "",
              "frequency": {
                "period": "D",
                "periodMultiplier": 0
              }
            }
          },
          "finalRatesetDate": null,
          "futuresObservationDate": null,
          "modified": false
        },
        "commodityOptionFeatures": {
          "exerciseCutoff": "",
          "barrier": {
            "barrier1detail": {
              "trigger": {
                "commodityTriggerPrice": {
                  "triggerPriceMode": {
                    "standard": null
                  }
                },
                "triggerType": {
                  "EqualOrLess": null
                }
              },
              "barrierTriggerStartDate": "",
              "barrierTriggerEndDate": "",
              "barrierTriggerManagementEndDate": null
            },
            "barrier2detail": {
              "trigger": {
                "commodityTriggerPrice": {
                  "triggerPriceMode": {
                    "standard": null
                  }
                }
              },
              "barrierTriggerStartDate": "",
              "barrierTriggerEndDate": "",
              "barrierTriggerManagementEndDate": null
            },
            "barrierType": "",
            "barrierFXref": {
              "fxFixingRefCode": "",
              "useFwdFXRate": "Spot",
              "ratesetExprCode": null,
              "margin": 0,
              "rounding": null
            },
            "barrierFixingReference": null
          }
        },
        "commodityOptionExercisePayment": {
          "paymentCurrency": "EUR",
          "paymentFxFixingRefCode": null,
          "paymentFxRatesetDate": null,
          "paymentDatesModel": {
            "paymentTerms": {
              "params": {
                "paymentShortCode": null,
                "businessCenters": [
                  "TARGET"
                ],
                "relativePaymentDates": {
                  "payRelativeTo": {
                    "LastFixingDate": null
                  },
                  "paymentDaysOffset": {
                    "periodMultiplier": 5,
                    "dateAdjustments": {
                      "Business": null
                    },
                    "businessDayConvention": "MFBD"
                  }
                },
                "paymentShortcut": {
                  "custom": null
                }
              }
            }
          },
          "fxConversionFactor": null,
          "fxTerms": null,
          "fxRatesetExprCode": null
        },
        "pricingSchedulePeriodCountModified": false,
        "pricingSchedule": [
          {
            "scheduleIndex": 0,
            "deliveryDateYearMonth": null,
            "periodStartDate": "2026-01-15T06:00:00Z",
            "periodEndDate": "2026-01-15T06:00:00Z",
            "swapExpiryDate": "",
            "barrierLeg": {
              "barrier1ScheduleDetails": {
                "barrierTriggerStartDate": "",
                "barrierTriggerEndDate": "",
                "barrierTriggerManagementEndDate": null
              },
              "barrier2ScheduleDetails": null
            },
            "notionalQuantity": {
              "quantity": 0
            },
            "perFrequencyQuantity": {},
            "strikeLeg": {},
            "assetPriceLeg": null,
            "payment": null,
            "observations": null,
            "strikeManagementPair": null
          }
        ],
        "physicalMetalLocation": null
      }
    },
    "optionPremium": {
      "dealtPrice": null,
      "priceCurrency": "",
      "priceUnits": "LB",
      "deferredFlag": false,
      "paymentStyle": {
        "singlePayment": {
          "premiumValueDate": "2026-01-19T06:00:00Z"
        }
      },
      "premiumSchedule": null,
      "premiumFxFixingRefCode": null,
      "premiumFxRatesetDate": "2026-01-19T06:00:00Z"
    },
    "assetTypeTrade": {},
    "tagMap": []
  }
}

<File--- tcs-poc/json-examples/polar/commodity-option-new-flattened.json --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "kbagci",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T11:30:00Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15T06:00:00Z",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15T06:00:00Z",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "commodityDetails": {
    "optionExerciseType": "europeanExercise",
    "settlementMethod": "CashOrEfrp",
    "accumulation": "None",
    "automaticExercise": false,
    "notionalVolume": {
      "volumeUnit": "LB",
      "volumeFrequency": "Total",
      "volumeFuturesContracts": 0
    },
    "strikeCurrency": "EUR",
    "strikeUnit": "LB",
    "strikePayout": "ITM",
    "pricingStyle": "AVG_CMD_AVG_FX",
    "priceCalculation": {
      "spread": 0,
      "roundingMethod": "halfUp",
      "precision": "3dp",
      "commonPricing": true
    },
    "assetPricing": {
      "ratesetRuleCode": "DuringPeriod",
      "ratesetExprCode": "LIFFE_AG",
      "assetWeight": 1,
      "assetUnit": "LB",
      "commodityCode": "EGT",
      "commodityRateset": "EGT",
      "fixingStyle": "bullet",
      "fixingRounding": "halfUp"
    },
    "fxFixing": {
      "commonPricing": false,
      "averagingCalcMethod": "avgAssetFx",
      "spread": 0,
      "conversionFactor": 0,
      "style": "average",
      "roundingMethod": "halfUp",
      "roundingPrecision": "3dp"
    }
  },
  "scheduleDetails": {
    "singleOrMultiPeriod": "SinglePeriod",
    "rollDirection": "PBD",
    "rollDirectionEnum": "forward",
    "periodAlignOn": "SwapEnd",
    "frequency": {
      "period": "D",
      "multiplier": 0
    },
    "pricingSchedule": [
      {
        "scheduleIndex": 0,
        "periodStartDate": "2026-01-15T06:00:00Z",
        "periodEndDate": "2026-01-15T06:00:00Z",
        "quantity": 0
      }
    ]
  },
  "exercisePayment": {
    "paymentCurrency": "EUR",
    "businessCenters": ["TARGET"],
    "payRelativeTo": "LastFixingDate",
    "paymentDaysOffset": {
      "multiplier": 5,
      "dateAdjustments": "Business",
      "businessDayConvention": "MFBD"
    }
  },
  "premium": {
    "priceUnits": "LB",
    "deferredFlag": false,
    "paymentStyle": "singlePayment",
    "premiumValueDate": "2026-01-19T06:00:00Z",
    "premiumFxRatesetDate": "2026-01-19T06:00:00Z"
  }
}

<File--- tcs-poc/json-examples/polar/ir-swap-presave-flattened.txt --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "kbagci",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T05:22:16.000Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "allLegs": false,
      "nearLeg": false,
      "farLeg": false,
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": "ISDA2021"
  },
  "swapDetails": {
    "underlying": "USD",
    "settlementType": "physical",
    "swapType": "irsOis",
    "isCleared": false,
    "markitSingleSided": false,
    "principalExchange": "firstLastLegs",
    "isIsdaFallback": false
  },
  "swapLegs": [
    {
      "legIndex": 0,
      "direction": "pay",
      "currency": "USD",
      "rateType": "fixed",
      "notional": 1000,
      "scheduleType": "constant",
      "interestRate": 3,
      "ratesetRef": null,
      "referenceTenor": null,
      "margin": "marginNone",
      "ratesetOffset": null,
      "paymentOffset": null,
      "formula": "ARR",
      "dayCountBasis": "ACT/360",
      "observationMethod": "notApplicable",
      "averagingMethod": "notApplicable",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubDate": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "notApplicable",
      "rolloverDay": 16,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "rate": 3,
          "notional": -1000,
          "interest": -2.67
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "rate": 3,
          "notional": -1000,
          "interest": -2.25
        }
      ]
    },
    {
      "legIndex": 1,
      "direction": "receive",
      "currency": "USD",
      "rateType": "floating",
      "notional": 1000,
      "scheduleType": "constant",
      "ratesetRef": "SOFR",
      "referenceTenor": "1D",
      "margin": 0,
      "formula": "OIS",
      "dayCountBasis": "ACT/360",
      "observationMethod": "plain",
      "averagingMethod": "compound",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubType": "none",
      "style": "floating-average-daily",
      "rolloverDay": 16,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "ratesetDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D"
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "ratesetDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D"
        }
      ]
    }
  ]
}

<File--- tcs-poc/json-examples/polar/ir-swap-presave-polar.json --->
{
    "general": {
        "tradeKey": {
            "tradeId": "",
            "label": ""
        },
        "transactionInformation": {
            "transactionRoles": {
                "marketer": {
                    "nothing": null
                },
                "transactionOriginator": {
                    "nothing": null
                },
                "priceMaker": "kbagci",
                "transactionAcceptor": {
                    "nothing": null
                },
                "parameterGrantor": {
                    "nothing": null
                }
            },
            "executionDetails": {
                "executionDateTime": {
                    "date": {
                        "date": "2026-01-16",
                        "expr": {
                            "nothing": null
                        }
                    },
                    "time": {
                        "hours": 5,
                        "minutes": 22,
                        "seconds": 16,
                        "milliSeconds": 0
                    }
                },
                "bestExecutionApplicable": {
                    "nothing": null
                },
                "executionVenue": {
                    "just": {
                        "executionVenue": {
                            "nothing": null
                        },
                        "venueTransactionID": {
                            "nothing": null
                        },
                        "executionBroker": {
                            "nothing": null
                        },
                        "executionBrokeragePayer": {
                            "wePay": null
                        },
                        "executionVenueMIC": {
                            "nothing": null
                        },
                        "executionVenueType": {
                            "just": "OffFacility"
                        }
                    }
                },
                "clearingVenue": {
                    "nothing": null
                },
                "reportTrackingNumber": {
                    "nothing": null
                },
                "omsOrderID": {
                    "nothing": null
                },
                "isOffMarketPrice": {
                    "just": false
                },
                "clientInstructionTime": {
                    "nothing": null
                }
            },
            "packageTradeDetails": {
                "isPackageTrade": {
                    "just": false
                },
                "packageIdentifier": {
                    "nothing": null
                },
                "packagePriceOrSpread": {
                    "nothing": null
                },
                "packageType": {
                    "nothing": null
                },
                "packagePrice": {
                    "nothing": null
                },
                "packagePriceCcy": {
                    "nothing": null
                },
                "priceNotation": {
                    "nothing": null
                },
                "useTradeIdAsPackageId": {
                    "just": true
                }
            },
            "blockAllocationDetails": {
                "nothing": null
            }
        },
        "common": {
            "book": "MEWEST01HS",
            "accountReference": {
                "nothing": null
            },
            "tradeDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "counterparty": "02519916",
            "novatedToCounterparty": {
                "nothing": null
            },
            "counterpartyAccountReference": {
                "nothing": null
            },
            "inputDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "orderTime": {
                "nothing": null
            },
            "comment": {
                "nothing": null
            },
            "initialMargin": {
                "nothing": null
            },
            "backoutBook": {
                "nothing": null
            },
            "tradingStrategy": {
                "nothing": null
            },
            "ddeEligible": {
                "No": null
            },
            "backoutTradingStrategy": {
                "nothing": null
            },
            "externalReference": {
                "nothing": null
            },
            "internalReference": {
                "nothing": null
            },
            "initialMarginDeliveryDate": {
                "nothing": null
            },
            "initialMarginDescription": {
                "nothing": null
            },
            "structureDetails": {
                "nothing": null
            },
            "backoutEntity": {
                "nothing": null
            },
            "salesGroup": {
                "nothing": null
            },
            "includeFeeEngine": {
                "just": {
                    "allLegs": false,
                    "nearLeg": false,
                    "farLeg": false,
                    "none": true
                }
            },
            "acsLinkType": {
                "nothing": null
            },
            "regionOrAccount": {
                "nothing": null
            },
            "originatingSystem": {
                "nothing": null
            },
            "stp": {
                "No": null
            },
            "sourceSystem": {
                "nothing": null
            },
            "cashflowHedgeNotification": {
                "just": false
            },
            "IRDAdvisory": {
                "just": false
            },
            "isCustomBasket": {
                "nothing": null
            }
        },
        "events": [],
        "fees": [],
        "cvr": {
            "nothing": null
        },
        "rightToBreakDetails": {
            "nothing": null
        },
        "capitalSharing": [],
        "tagMap": [],
        "tradeIdentifiers": [],
        "ISDADefinition": {
            "just": "ISDA2021"
        }
    },
    "swapDetails": {
        "underlying": "USD",
        "physicalOrNDS": {
            "physical": null
        },
        "swapType": {
            "irsOis": null
        },
        "clearedTrade": false,
        "markitSingleSided": {
            "just": false
        },
        "principalExchange": {
            "just": {
                "occurs": {
                    "firstLastLegs": null
                },
                "params": {
                    "nothing": null
                },
                "schedule": {
                    "principalExchangeSchedule": []
                }
            }
        },
        "isIsdaFallback": {
            "just": false
        }
    },
    "swapLegs": [
        {
            "v1": 0,
            "v2": {
                "bookPayReceive": {
                    "pay": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "fixed": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "just": 1000
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "just": 3
                                    },
                                    "ratesetRef": {
                                        "nothing": null
                                    },
                                    "referenceTenor": {
                                        "nothing": null
                                    },
                                    "margin": {
                                        "marginNone": null
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [],
                                    "formula": "ARR",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "notApplicable": null
                                    },
                                    "averagingMethod": {
                                        "notApplicable": null
                                    }
                                },
                                "swapPeriods": {
                                    "periods": {
                                        "monthly": null
                                    },
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "2026-01-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "2026-03-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "notApplicable": null
                                    },
                                    "rolloverDay": 16,
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": [
                                    {
                                        "v1": 0,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-01-16",
                                                "endDate": "2026-02-17",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-02-19",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "just": 3
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "nothing": null
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": -1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "just": -2.67
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "nothing": null
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    },
                                    {
                                        "v1": 1,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-02-17",
                                                "endDate": "2026-03-16",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-03-18",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "just": 3
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "nothing": null
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": -1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "just": -2.25
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "nothing": null
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        },
        {
            "v1": 1,
            "v2": {
                "bookPayReceive": {
                    "receive": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "floating": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "just": 1000
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "nothing": null
                                    },
                                    "ratesetRef": {
                                        "just": "SOFR"
                                    },
                                    "referenceTenor": {
                                        "just": "1D"
                                    },
                                    "margin": {
                                        "marginAdditive": 0
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [
                                        "US"
                                    ],
                                    "formula": "OIS",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "plain": null
                                    },
                                    "averagingMethod": {
                                        "compound": null
                                    }
                                },
                                "swapPeriods": {
                                    "periods": {
                                        "monthly": null
                                    },
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "2026-01-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "2026-03-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "floating": {
                                            "average": {
                                                "daily": null
                                            }
                                        }
                                    },
                                    "rolloverDay": 16,
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": [
                                    {
                                        "v1": 0,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-01-16",
                                                "endDate": "2026-02-17",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "just": "2026-02-17"
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-02-19",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "just": {
                                                        "ratesets": [
                                                            {
                                                                "ratesetRef": "SOFR",
                                                                "referenceTenor": "1D"
                                                            }
                                                        ],
                                                        "interpolation": {
                                                            "na": null
                                                        },
                                                        "modified": false
                                                    }
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": 1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "nothing": null
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0,
                                                        "modified": false
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    },
                                    {
                                        "v1": 1,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-02-17",
                                                "endDate": "2026-03-16",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "just": "2026-03-16"
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-03-18",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "just": {
                                                        "ratesets": [
                                                            {
                                                                "ratesetRef": "SOFR",
                                                                "referenceTenor": "1D"
                                                            }
                                                        ],
                                                        "interpolation": {
                                                            "na": null
                                                        },
                                                        "modified": false
                                                    }
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": 1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "nothing": null
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0,
                                                        "modified": false
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        }
    ]
}

<File--- tcs-poc/json-examples/polar/ir-swap-postsave-polar.txt --->
{
    "general": {
        "tradeKey": {
            "tradeId": "HH_110517498",
            "label": "OVERNIGHT",
            "coLocatedId": {
                "baseScenario": null
            }
        },
        "transactionInformation": {
            "transactionRoles": {
                "marketer": {
                    "nothing": null
                },
                "transactionOriginator": {
                    "just": "kbagci"
                },
                "priceMaker": "kbagci",
                "transactionAcceptor": {
                    "just": "vmenon"
                },
                "parameterGrantor": {
                    "nothing": null
                }
            },
            "executionDetails": {
                "executionDateTime": {
                    "date": {
                        "date": "2026-01-16",
                        "expr": {
                            "nothing": null
                        }
                    },
                    "time": {
                        "hours": 5,
                        "minutes": 22,
                        "seconds": 16,
                        "milliSeconds": 0
                    }
                },
                "bestExecutionApplicable": {
                    "nothing": null
                },
                "executionVenue": {
                    "just": {
                        "executionVenue": {
                            "nothing": null
                        },
                        "venueTransactionID": {
                            "nothing": null
                        },
                        "executionBroker": {
                            "nothing": null
                        },
                        "executionBrokeragePayer": {
                            "wePay": null
                        },
                        "executionVenueMIC": {
                            "nothing": null
                        },
                        "executionVenueType": {
                            "just": "OffFacility"
                        }
                    }
                },
                "clearingVenue": {
                    "nothing": null
                },
                "reportTrackingNumber": {
                    "nothing": null
                },
                "omsOrderID": {
                    "nothing": null
                },
                "isOffMarketPrice": {
                    "just": false
                },
                "clientInstructionTime": {
                    "nothing": null
                }
            },
            "packageTradeDetails": {
                "isPackageTrade": {
                    "just": false
                },
                "packageIdentifier": {
                    "nothing": null
                },
                "packagePriceOrSpread": {
                    "nothing": null
                },
                "packageType": {
                    "nothing": null
                },
                "packagePrice": {
                    "nothing": null
                },
                "packagePriceCcy": {
                    "nothing": null
                },
                "priceNotation": {
                    "nothing": null
                },
                "useTradeIdAsPackageId": {
                    "just": true
                }
            },
            "blockAllocationDetails": {
                "nothing": null
            }
        },
        "common": {
            "book": "MEWEST01HS",
            "accountReference": {
                "nothing": null
            },
            "tradeDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "counterparty": "02519916",
            "novatedToCounterparty": {
                "nothing": null
            },
            "counterpartyAccountReference": {
                "nothing": null
            },
            "inputDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "orderTime": {
                "nothing": null
            },
            "comment": {
                "nothing": null
            },
            "initialMargin": {
                "nothing": null
            },
            "backoutBook": {
                "nothing": null
            },
            "tradingStrategy": {
                "nothing": null
            },
            "ddeEligible": {
                "No": null
            },
            "backoutTradingStrategy": {
                "nothing": null
            },
            "externalReference": {
                "nothing": null
            },
            "internalReference": {
                "nothing": null
            },
            "initialMarginDeliveryDate": {
                "nothing": null
            },
            "initialMarginDescription": {
                "nothing": null
            },
            "structureDetails": {
                "nothing": null
            },
            "backoutEntity": {
                "nothing": null
            },
            "salesGroup": {
                "nothing": null
            },
            "includeFeeEngine": {
                "just": {
                    "allLegs": false,
                    "nearLeg": false,
                    "farLeg": false,
                    "none": true
                }
            },
            "acsLinkType": {
                "nothing": null
            },
            "regionOrAccount": {
                "nothing": null
            },
            "originatingSystem": {
                "nothing": null
            },
            "stp": {
                "No": null
            },
            "sourceSystem": {
                "nothing": null
            },
            "cashflowHedgeNotification": {
                "just": false
            },
            "IRDAdvisory": {
                "just": false
            },
            "isCustomBasket": {
                "nothing": null
            }
        },
        "events": [
            {
                "schemaVersion": {
                    "major": 3,
                    "minor": 0
                },
                "event": {
                    "eventCode": {
                        "execute": {
                            "tradeLink": {
                                "nothing": null
                            },
                            "splitDeals": []
                        }
                    },
                    "structuredDealScope": {
                        "globalRef": null
                    },
                    "description": {
                        "just": "execute deal"
                    },
                    "systemDateTime": {
                        "nothing": null
                    },
                    "businessDateTime": 1768541091401,
                    "application": "FROST",
                    "transactionRoles": {
                        "marketer": {
                            "nothing": null
                        },
                        "transactionOriginator": {
                            "nothing": null
                        },
                        "priceMaker": "kbagci",
                        "transactionAcceptor": {
                            "nothing": null
                        },
                        "parameterGrantor": {
                            "nothing": null
                        }
                    },
                    "tradeLinks": [],
                    "correlationId": {
                        "string": "47f8f6a7-f534-4ff6-a3de-7e391c234af0"
                    },
                    "actionedMtsDealVersion": {
                        "nothing": null
                    }
                },
                "eventLog": []
            }
        ],
        "fees": [],
        "cvr": {
            "nothing": null
        },
        "rightToBreakDetails": {
            "nothing": null
        },
        "capitalSharing": [],
        "tagMap": [],
        "tradeIdentifiers": [],
        "ISDADefinition": {
            "just": "ISDA2021"
        }
    },
    "swapDetails": {
        "underlying": "USD",
        "physicalOrNDS": {
            "physical": null
        },
        "swapType": {
            "irsOis": null
        },
        "clearedTrade": false,
        "markitSingleSided": {
            "just": false
        },
        "principalExchange": {
            "just": {
                "occurs": {
                    "firstLastLegs": null
                },
                "params": {
                    "nothing": null
                },
                "schedule": {
                    "principalExchangeSchedule": []
                }
            }
        },
        "isIsdaFallback": {
            "just": false
        }
    },
    "swapLegs": [
        {
            "v1": 0,
            "v2": {
                "bookPayReceive": {
                    "pay": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "fixed": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "just": 1000
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "just": 3
                                    },
                                    "ratesetRef": {
                                        "nothing": null
                                    },
                                    "referenceTenor": {
                                        "nothing": null
                                    },
                                    "margin": {
                                        "marginNone": null
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "just": 2
                                    },
                                    "ratesetCalendars": [],
                                    "formula": "ARR",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "notApplicable": null
                                    },
                                    "averagingMethod": {
                                        "notApplicable": null
                                    }
                                },
                                "swapPeriods": {
                                    "periods": {
                                        "monthly": null
                                    },
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "2026-01-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "2026-03-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "notApplicable": null
                                    },
                                    "rolloverDay": 16,
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": [
                                    {
                                        "v1": 0,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-01-16",
                                                "endDate": "2026-02-17",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-02-19",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "just": 3
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "nothing": null
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": -1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "just": -2.67
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    },
                                    {
                                        "v1": 1,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-02-17",
                                                "endDate": "2026-03-16",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-03-18",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "just": 3
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "nothing": null
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": -1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "just": -2.25
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        },
        {
            "v1": 1,
            "v2": {
                "bookPayReceive": {
                    "receive": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "floating": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "just": 1000
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "nothing": null
                                    },
                                    "ratesetRef": {
                                        "just": "SOFR"
                                    },
                                    "referenceTenor": {
                                        "just": "1D"
                                    },
                                    "margin": {
                                        "marginAdditive": 0
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "just": 2
                                    },
                                    "ratesetCalendars": [
                                        "US"
                                    ],
                                    "formula": "OIS",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "plain": null
                                    },
                                    "averagingMethod": {
                                        "compound": null
                                    }
                                },
                                "swapPeriods": {
                                    "periods": {
                                        "monthly": null
                                    },
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "2026-01-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "2026-03-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "floating": {
                                            "average": {
                                                "daily": null
                                            }
                                        }
                                    },
                                    "rolloverDay": 16,
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": [
                                    {
                                        "v1": 0,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-01-16",
                                                "endDate": "2026-02-17",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "just": "2026-02-17"
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-02-19",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "just": {
                                                        "ratesets": [
                                                            {
                                                                "ratesetRef": "SOFR",
                                                                "referenceTenor": "1D"
                                                            }
                                                        ],
                                                        "interpolation": {
                                                            "na": null
                                                        },
                                                        "modified": false
                                                    }
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": 1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "nothing": null
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0,
                                                        "modified": false
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    },
                                    {
                                        "v1": 1,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-02-17",
                                                "endDate": "2026-03-16",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "just": "2026-03-16"
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-03-18",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "just": {
                                                        "ratesets": [
                                                            {
                                                                "ratesetRef": "SOFR",
                                                                "referenceTenor": "1D"
                                                            }
                                                        ],
                                                        "interpolation": {
                                                            "na": null
                                                        },
                                                        "modified": false
                                                    }
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": 1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "nothing": null
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0,
                                                        "modified": false
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        }
    ]
}

<File--- tcs-poc/json-examples/polar/commodity-option-new-polar.json --->
{
  "general": {
    "tradeKey": {
      "tradeId": "",
      "label": ""
    },
    "transactionInformation": {
      "transactionRoles": {
        "marketer": null,
        "transactionOriginator": null,
        "priceMaker": "kbagci",
        "transactionAcceptor": null,
        "parameterGrantor": null
      },
      "executionDetails": {
        "executionDateTime": "2026-01-16T11:30:00Z",
        "bestExecutionApplicable": null,
        "executionVenue": {
          "executionVenue": null,
          "venueTransactionID": null,
          "executionBroker": null,
          "executionBrokeragePayer": {
            "wePay": null
          },
          "executionVenueMIC": null,
          "executionVenueType": "OffFacility"
        },
        "clearingVenue": null,
        "reportTrackingNumber": null,
        "omsOrderID": null,
        "isOffMarketPrice": false,
        "clientInstructionTime": null
      },
      "packageTradeDetails": {
        "isPackageTrade": false,
        "packageIdentifier": null,
        "packagePriceOrSpread": null,
        "packageType": null,
        "packagePrice": null,
        "packagePriceCcy": null,
        "priceNotation": null,
        "useTradeIdAsPackageId": true
      },
      "blockAllocationDetails": null
    },
    "common": {
      "book": "MEWEST01HS",
      "accountReference": null,
      "tradeDate": "2026-01-15T06:00:00Z",
      "counterparty": "02519916",
      "novatedToCounterparty": null,
      "counterpartyAccountReference": null,
      "inputDate": "2026-01-15T06:00:00Z",
      "orderTime": null,
      "comment": null,
      "initialMargin": null,
      "backoutBook": null,
      "tradingStrategy": null,
      "ddeEligible": {
        "No": null
      },
      "backoutTradingStrategy": null,
      "externalReference": null,
      "internalReference": null,
      "initialMarginDeliveryDate": null,
      "initialMarginDescription": null,
      "structureDetails": null,
      "backoutEntity": null,
      "salesGroup": null,
      "includeFeeEngine": [
        "none"
      ],
      "acsLinkType": null,
      "regionOrAccount": null,
      "originatingSystem": null,
      "stp": {
        "No": null
      },
      "sourceSystem": null,
      "cashflowHedgeNotification": false,
      "IRDAdvisory": false,
      "isCustomBasket": null
    },
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "leg": {
    "commodityOptionType": {
      "commodityFinancialOptionModel": {
        "optionExercise": {
          "optionExerciseType": {
            "europeanExercise": null
          },
          "settlementMethod": {
            "CashOrEfrp": null
          },
          "swapExpiryDate": null,
          "accumulation": {
            "None": null
          },
          "automaticExercise": false,
          "writtenConfirmation": false,
          "settlementFxConversionFxType": false
        },
        "notionalQuantity": {
          "notionalVolume": {
            "volumeUnit": "LB",
            "volumeFrequency": {
              "Total": null
            },
            "volumeFuturesContracts": 0
          },
          "cashNotional": null
        },
        "strikeCurrency": "EUR",
        "commodityStrikePrice": {
          "fixedPriceLeg": {
            "strikeUnit": "LB",
            "strikePayout": {
              "ITM": null
            },
            "strikeManagementPair": null
          }
        },
        "commodityPayoff": {
          "priceCalculation": {
            "spread": 0,
            "finalPriceRounding": {
              "method": {
                "halfUp": null
              },
              "precision": {
                "_3dp": null
              }
            },
            "intermediatePriceRounding": {
              "method": {
                "halfUp": null
              },
              "precision": {
                "_3dp": null
              }
            },
            "multiAssetParams": {
              "commonPricing": true,
              "basketMultiplier": 0
            },
            "pricingModel": [
              {
                "assetPricing": {
                  "ratesetRuleCode": {
                    "DuringPeriod": null
                  },
                  "ratesetExprCode": "LIFFE_AG",
                  "assetWeight": 1,
                  "assetUnit": "LB",
                  "conversion": null,
                  "currency": "EUR",
                  "assetFixingReferences": {
                    "assets": {
                      "spread": 0,
                      "commodityFixingRef": {
                        "identifiedAsset": {
                          "commodityCode": "EGT",
                          "exchangeInstrument": false
                        },
                        "commodityReference": {
                          "commodityRateset": "EGT",
                          "referenceType": {
                            "asset": "EGT"
                          },
                          "referencePriceFrameworkModel": {},
                          "deliveryExpiry": {}
                        },
                        "reutersCode": null
                      },
                      "style": {
                        "bullet": {
                          "fixingTime": null,
                          "bulletPriceRounding": {
                            "method": {
                              "halfUp": null
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "fxFixing": {
                  "commonPricing": false,
                  "fxFixing": {
                    "averagingCalcMethod": {
                      "avgAssetFx": null
                    },
                    "spread": 0,
                    "conversionFactor": 0,
                    "fxFixingRef": {
                      "quotedCurrencyPair": {
                        "ccy1": "",
                        "ccy2": ""
                      },
                      "fxInfoSource": {
                        "rateSource": "",
                        "rateSourcePage": null,
                        "rateSourcePageHeading": null
                      },
                      "fixingTime": null
                    },
                    "style": {
                      "average": {
                        "rounding": {
                          "method": {
                            "halfUp": null
                          },
                          "precision": {
                            "_3dp": null
                          }
                        },
                        "fixingTime": null,
                        "averagePeriod": null
                      }
                    },
                    "fxTerms": null
                  }
                }
              }
            ],
            "pricingStyle": {
              "AVG_CMD_AVG_FX": null
            }
          },
          "commodityPeriods": null
        },
        "commodityOptionPeriods": {
          "periodShortCode": null,
          "singleOrMultiPeriod": {
            "SinglePeriod": null
          },
          "effectiveDate": {
            "dateAdjustments": {
              "businessCenters": []
            },
            "adjustedDate": {
              "unadjustedDate": "",
              "adjustedDate": ""
            }
          },
          "terminationDate": {
            "dateAdjustments": {
              "businessCenters": []
            },
            "adjustedDate": {
              "unadjustedDate": "",
              "adjustedDate": ""
            }
          },
          "periodAlignOn": {
            "SwapEnd": null
          },
          "periodAlignment": {
            "SwapEnd": null
          },
          "rollDirectionEnum": {
            "forward": null
          },
          "rollDirection": "PBD",
          "calculationPeriods": {
            "calculationPeriodsSchedule": {
              "balanceOfFirstPeriod": "",
              "frequency": {
                "period": "D",
                "periodMultiplier": 0
              }
            }
          },
          "finalRatesetDate": null,
          "futuresObservationDate": null,
          "modified": false
        },
        "commodityOptionFeatures": {
          "exerciseCutoff": "",
          "barrier": {
            "barrier1detail": {
              "trigger": {
                "commodityTriggerPrice": {
                  "triggerPriceMode": {
                    "standard": null
                  }
                },
                "triggerType": {
                  "EqualOrLess": null
                }
              },
              "barrierTriggerStartDate": "",
              "barrierTriggerEndDate": "",
              "barrierTriggerManagementEndDate": null
            },
            "barrier2detail": {
              "trigger": {
                "commodityTriggerPrice": {
                  "triggerPriceMode": {
                    "standard": null
                  }
                }
              },
              "barrierTriggerStartDate": "",
              "barrierTriggerEndDate": "",
              "barrierTriggerManagementEndDate": null
            },
            "barrierType": "",
            "barrierFXref": {
              "fxFixingRefCode": "",
              "useFwdFXRate": "Spot",
              "ratesetExprCode": null,
              "margin": 0,
              "rounding": null
            },
            "barrierFixingReference": null
          }
        },
        "commodityOptionExercisePayment": {
          "paymentCurrency": "EUR",
          "paymentFxFixingRefCode": null,
          "paymentFxRatesetDate": null,
          "paymentDatesModel": {
            "paymentTerms": {
              "params": {
                "paymentShortCode": null,
                "businessCenters": [
                  "TARGET"
                ],
                "relativePaymentDates": {
                  "payRelativeTo": {
                    "LastFixingDate": null
                  },
                  "paymentDaysOffset": {
                    "periodMultiplier": 5,
                    "dateAdjustments": {
                      "Business": null
                    },
                    "businessDayConvention": "MFBD"
                  }
                },
                "paymentShortcut": {
                  "custom": null
                }
              }
            }
          },
          "fxConversionFactor": null,
          "fxTerms": null,
          "fxRatesetExprCode": null
        },
        "pricingSchedulePeriodCountModified": false,
        "pricingSchedule": [
          {
            "scheduleIndex": 0,
            "deliveryDateYearMonth": null,
            "periodStartDate": "2026-01-15T06:00:00Z",
            "periodEndDate": "2026-01-15T06:00:00Z",
            "swapExpiryDate": "",
            "barrierLeg": {
              "barrier1ScheduleDetails": {
                "barrierTriggerStartDate": "",
                "barrierTriggerEndDate": "",
                "barrierTriggerManagementEndDate": null
              },
              "barrier2ScheduleDetails": null
            },
            "notionalQuantity": {
              "quantity": 0
            },
            "perFrequencyQuantity": {},
            "strikeLeg": {},
            "assetPriceLeg": null,
            "payment": null,
            "observations": null,
            "strikeManagementPair": null
          }
        ],
        "physicalMetalLocation": null
      }
    },
    "optionPremium": {
      "dealtPrice": null,
      "priceCurrency": "",
      "priceUnits": "LB",
      "deferredFlag": false,
      "paymentStyle": {
        "singlePayment": {
          "premiumValueDate": "2026-01-19T06:00:00Z"
        }
      },
      "premiumSchedule": null,
      "premiumFxFixingRefCode": null,
      "premiumFxRatesetDate": "2026-01-19T06:00:00Z"
    },
    "assetTypeTrade": {},
    "tagMap": []
  }
}

<File--- tcs-poc/json-examples/polar/ir-swap-postsave-flattened.txt --->
{
  "general": {
    "tradeId": "HH_110517498",
    "label": "OVERNIGHT",
    "coLocatedId": "baseScenario",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": "kbagci",
      "priceMaker": "kbagci",
      "transactionAcceptor": "vmenon",
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T05:22:16.000Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "allLegs": false,
      "nearLeg": false,
      "farLeg": false,
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [
      {
        "schemaVersion": "3.0",
        "eventDescription": "execute deal",
        "eventCode": "execute",
        "businessDateTime": 1768541091401,
        "application": "FROST",
        "correlationId": "47f8f6a7-f534-4ff6-a3de-7e391c234af0"
      }
    ],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": "ISDA2021"
  },
  "swapDetails": {
    "underlying": "USD",
    "settlementType": "physical",
    "swapType": "irsOis",
    "isCleared": false,
    "markitSingleSided": false,
    "principalExchange": "firstLastLegs",
    "isIsdaFallback": false
  },
  "swapLegs": [
    {
      "legIndex": 0,
      "direction": "pay",
      "currency": "USD",
      "rateType": "fixed",
      "notional": 1000,
      "scheduleType": "constant",
      "interestRate": 3,
      "ratesetRef": null,
      "referenceTenor": null,
      "margin": "marginNone",
      "ratesetOffset": null,
      "paymentOffset": 2,
      "formula": "ARR",
      "dayCountBasis": "ACT/360",
      "observationMethod": "notApplicable",
      "averagingMethod": "notApplicable",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "notApplicable",
      "rolloverDay": 16,
      "paymentFrequency": "monthly",
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "rate": 3,
          "notional": -1000,
          "interest": -2.67,
          "reval": true
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "rate": 3,
          "notional": -1000,
          "interest": -2.25,
          "reval": true
        }
      ]
    },
    {
      "legIndex": 1,
      "direction": "receive",
      "currency": "USD",
      "rateType": "floating",
      "notional": 1000,
      "scheduleType": "constant",
      "ratesetRef": "SOFR",
      "referenceTenor": "1D",
      "margin": 0,
      "paymentOffset": 2,
      "formula": "OIS",
      "dayCountBasis": "ACT/360",
      "observationMethod": "plain",
      "averagingMethod": "compound",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubType": "none",
      "style": "floating-average-daily",
      "rolloverDay": 16,
      "paymentFrequency": "monthly",
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "ratesetDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D",
          "interpolation": "na",
          "reval": true
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "ratesetDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D",
          "interpolation": "na",
          "reval": true
        }
      ]
    }
  ]
}

<File--- tcs-poc/json-examples/polar/ir-swap-new-polar.txt --->
{
    "general": {
        "tradeKey": {
            "tradeId": "",
            "label": ""
        },
        "transactionInformation": {
            "transactionRoles": {
                "marketer": {
                    "nothing": null
                },
                "transactionOriginator": {
                    "nothing": null
                },
                "priceMaker": "",
                "transactionAcceptor": {
                    "nothing": null
                },
                "parameterGrantor": {
                    "nothing": null
                }
            },
            "executionDetails": {
                "executionDateTime": {
                    "date": {
                        "date": "2026-01-16",
                        "expr": {
                            "nothing": null
                        }
                    },
                    "time": {
                        "hours": 5,
                        "minutes": 6,
                        "seconds": 31,
                        "milliSeconds": 0
                    }
                },
                "bestExecutionApplicable": {
                    "nothing": null
                },
                "executionVenue": {
                    "just": {
                        "executionVenue": {
                            "nothing": null
                        },
                        "venueTransactionID": {
                            "nothing": null
                        },
                        "executionBroker": {
                            "nothing": null
                        },
                        "executionBrokeragePayer": {
                            "wePay": null
                        },
                        "executionVenueMIC": {
                            "nothing": null
                        },
                        "executionVenueType": {
                            "just": "OffFacility"
                        }
                    }
                },
                "clearingVenue": {
                    "nothing": null
                },
                "reportTrackingNumber": {
                    "nothing": null
                },
                "omsOrderID": {
                    "nothing": null
                },
                "isOffMarketPrice": {
                    "just": false
                },
                "clientInstructionTime": {
                    "nothing": null
                }
            },
            "packageTradeDetails": {
                "isPackageTrade": {
                    "just": false
                },
                "packageIdentifier": {
                    "nothing": null
                },
                "packagePriceOrSpread": {
                    "nothing": null
                },
                "packageType": {
                    "nothing": null
                },
                "packagePrice": {
                    "nothing": null
                },
                "packagePriceCcy": {
                    "nothing": null
                },
                "priceNotation": {
                    "nothing": null
                },
                "useTradeIdAsPackageId": {
                    "just": true
                }
            },
            "blockAllocationDetails": {
                "nothing": null
            }
        },
        "common": {
            "book": "",
            "accountReference": {
                "nothing": null
            },
            "tradeDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "counterparty": "",
            "novatedToCounterparty": {
                "nothing": null
            },
            "counterpartyAccountReference": {
                "nothing": null
            },
            "inputDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "orderTime": {
                "nothing": null
            },
            "comment": {
                "nothing": null
            },
            "initialMargin": {
                "nothing": null
            },
            "backoutBook": {
                "nothing": null
            },
            "tradingStrategy": {
                "nothing": null
            },
            "ddeEligible": {
                "No": null
            },
            "backoutTradingStrategy": {
                "nothing": null
            },
            "externalReference": {
                "nothing": null
            },
            "internalReference": {
                "nothing": null
            },
            "initialMarginDeliveryDate": {
                "nothing": null
            },
            "initialMarginDescription": {
                "nothing": null
            },
            "structureDetails": {
                "nothing": null
            },
            "backoutEntity": {
                "nothing": null
            },
            "salesGroup": {
                "nothing": null
            },
            "includeFeeEngine": {
                "just": {
                    "allLegs": false,
                    "nearLeg": false,
                    "farLeg": false,
                    "none": true
                }
            },
            "acsLinkType": {
                "nothing": null
            },
            "regionOrAccount": {
                "nothing": null
            },
            "originatingSystem": {
                "nothing": null
            },
            "stp": {
                "No": null
            },
            "sourceSystem": {
                "nothing": null
            },
            "cashflowHedgeNotification": {
                "just": false
            },
            "IRDAdvisory": {
                "just": false
            },
            "isCustomBasket": {
                "nothing": null
            }
        },
        "events": [],
        "fees": [],
        "cvr": {
            "nothing": null
        },
        "rightToBreakDetails": {
            "nothing": null
        },
        "capitalSharing": [],
        "tagMap": [],
        "tradeIdentifiers": [],
        "ISDADefinition": {
            "just": "ISDA2021"
        }
    },
    "swapDetails": {
        "underlying": "USD",
        "physicalOrNDS": {
            "physical": null
        },
        "swapType": {
            "irsOis": null
        },
        "clearedTrade": false,
        "markitSingleSided": {
            "just": false
        },
        "principalExchange": {
            "just": {
                "occurs": {
                    "firstLastLegs": null
                },
                "params": {
                    "nothing": null
                },
                "schedule": {
                    "principalExchangeSchedule": []
                }
            }
        },
        "isIsdaFallback": {
            "just": false
        }
    },
    "swapLegs": [
        {
            "v1": 0,
            "v2": {
                "bookPayReceive": {
                    "pay": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "fixed": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "nothing": null
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "nothing": null
                                    },
                                    "ratesetRef": {
                                        "nothing": null
                                    },
                                    "referenceTenor": {
                                        "nothing": null
                                    },
                                    "margin": {
                                        "marginNone": null
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [],
                                    "formula": "ARR",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "notApplicable": null
                                    },
                                    "averagingMethod": {
                                        "notApplicable": null
                                    }
                                },
                                "swapPeriods": {
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "notApplicable": null
                                    },
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": []
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        },
        {
            "v1": 1,
            "v2": {
                "bookPayReceive": {
                    "receive": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "floating": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "nothing": null
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "nothing": null
                                    },
                                    "ratesetRef": {
                                        "just": "SOFR"
                                    },
                                    "referenceTenor": {
                                        "just": "1D"
                                    },
                                    "margin": {
                                        "marginAdditive": 0
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [
                                        "US"
                                    ],
                                    "formula": "OIS",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "plain": null
                                    },
                                    "averagingMethod": {
                                        "compound": null
                                    }
                                },
                                "swapPeriods": {
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "floating": {
                                            "average": {
                                                "daily": null
                                            }
                                        }
                                    },
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": []
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        }
    ]
}

<File--- tcs-poc/json-examples/polar/commodity-option-new-flattened.txt --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "kbagci",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T11:30:00Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15T06:00:00Z",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15T06:00:00Z",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "commodityDetails": {
    "optionExerciseType": "europeanExercise",
    "settlementMethod": "CashOrEfrp",
    "accumulation": "None",
    "automaticExercise": false,
    "notionalVolume": {
      "volumeUnit": "LB",
      "volumeFrequency": "Total",
      "volumeFuturesContracts": 0
    },
    "strikeCurrency": "EUR",
    "strikeUnit": "LB",
    "strikePayout": "ITM",
    "pricingStyle": "AVG_CMD_AVG_FX",
    "priceCalculation": {
      "spread": 0,
      "roundingMethod": "halfUp",
      "precision": "3dp",
      "commonPricing": true
    },
    "assetPricing": {
      "ratesetRuleCode": "DuringPeriod",
      "ratesetExprCode": "LIFFE_AG",
      "assetWeight": 1,
      "assetUnit": "LB",
      "commodityCode": "EGT",
      "commodityRateset": "EGT",
      "fixingStyle": "bullet",
      "fixingRounding": "halfUp"
    },
    "fxFixing": {
      "commonPricing": false,
      "averagingCalcMethod": "avgAssetFx",
      "spread": 0,
      "conversionFactor": 0,
      "style": "average",
      "roundingMethod": "halfUp",
      "roundingPrecision": "3dp"
    }
  },
  "scheduleDetails": {
    "singleOrMultiPeriod": "SinglePeriod",
    "rollDirection": "PBD",
    "rollDirectionEnum": "forward",
    "periodAlignOn": "SwapEnd",
    "frequency": {
      "period": "D",
      "multiplier": 0
    },
    "pricingSchedule": [
      {
        "scheduleIndex": 0,
        "periodStartDate": "2026-01-15T06:00:00Z",
        "periodEndDate": "2026-01-15T06:00:00Z",
        "quantity": 0
      }
    ]
  },
  "exercisePayment": {
    "paymentCurrency": "EUR",
    "businessCenters": ["TARGET"],
    "payRelativeTo": "LastFixingDate",
    "paymentDaysOffset": {
      "multiplier": 5,
      "dateAdjustments": "Business",
      "businessDayConvention": "MFBD"
    }
  },
  "premium": {
    "priceUnits": "LB",
    "deferredFlag": false,
    "paymentStyle": "singlePayment",
    "premiumValueDate": "2026-01-19T06:00:00Z",
    "premiumFxRatesetDate": "2026-01-19T06:00:00Z"
  }
}

<File--- tcs-poc/json-examples/polar/ir-swap-postsave-polar.json --->


<File--- tcs-poc/json-examples/polar/ir-swap-presave-polar.txt --->
{
    "general": {
        "tradeKey": {
            "tradeId": "",
            "label": ""
        },
        "transactionInformation": {
            "transactionRoles": {
                "marketer": {
                    "nothing": null
                },
                "transactionOriginator": {
                    "nothing": null
                },
                "priceMaker": "kbagci",
                "transactionAcceptor": {
                    "nothing": null
                },
                "parameterGrantor": {
                    "nothing": null
                }
            },
            "executionDetails": {
                "executionDateTime": {
                    "date": {
                        "date": "2026-01-16",
                        "expr": {
                            "nothing": null
                        }
                    },
                    "time": {
                        "hours": 5,
                        "minutes": 22,
                        "seconds": 16,
                        "milliSeconds": 0
                    }
                },
                "bestExecutionApplicable": {
                    "nothing": null
                },
                "executionVenue": {
                    "just": {
                        "executionVenue": {
                            "nothing": null
                        },
                        "venueTransactionID": {
                            "nothing": null
                        },
                        "executionBroker": {
                            "nothing": null
                        },
                        "executionBrokeragePayer": {
                            "wePay": null
                        },
                        "executionVenueMIC": {
                            "nothing": null
                        },
                        "executionVenueType": {
                            "just": "OffFacility"
                        }
                    }
                },
                "clearingVenue": {
                    "nothing": null
                },
                "reportTrackingNumber": {
                    "nothing": null
                },
                "omsOrderID": {
                    "nothing": null
                },
                "isOffMarketPrice": {
                    "just": false
                },
                "clientInstructionTime": {
                    "nothing": null
                }
            },
            "packageTradeDetails": {
                "isPackageTrade": {
                    "just": false
                },
                "packageIdentifier": {
                    "nothing": null
                },
                "packagePriceOrSpread": {
                    "nothing": null
                },
                "packageType": {
                    "nothing": null
                },
                "packagePrice": {
                    "nothing": null
                },
                "packagePriceCcy": {
                    "nothing": null
                },
                "priceNotation": {
                    "nothing": null
                },
                "useTradeIdAsPackageId": {
                    "just": true
                }
            },
            "blockAllocationDetails": {
                "nothing": null
            }
        },
        "common": {
            "book": "MEWEST01HS",
            "accountReference": {
                "nothing": null
            },
            "tradeDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "counterparty": "02519916",
            "novatedToCounterparty": {
                "nothing": null
            },
            "counterpartyAccountReference": {
                "nothing": null
            },
            "inputDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "orderTime": {
                "nothing": null
            },
            "comment": {
                "nothing": null
            },
            "initialMargin": {
                "nothing": null
            },
            "backoutBook": {
                "nothing": null
            },
            "tradingStrategy": {
                "nothing": null
            },
            "ddeEligible": {
                "No": null
            },
            "backoutTradingStrategy": {
                "nothing": null
            },
            "externalReference": {
                "nothing": null
            },
            "internalReference": {
                "nothing": null
            },
            "initialMarginDeliveryDate": {
                "nothing": null
            },
            "initialMarginDescription": {
                "nothing": null
            },
            "structureDetails": {
                "nothing": null
            },
            "backoutEntity": {
                "nothing": null
            },
            "salesGroup": {
                "nothing": null
            },
            "includeFeeEngine": {
                "just": {
                    "allLegs": false,
                    "nearLeg": false,
                    "farLeg": false,
                    "none": true
                }
            },
            "acsLinkType": {
                "nothing": null
            },
            "regionOrAccount": {
                "nothing": null
            },
            "originatingSystem": {
                "nothing": null
            },
            "stp": {
                "No": null
            },
            "sourceSystem": {
                "nothing": null
            },
            "cashflowHedgeNotification": {
                "just": false
            },
            "IRDAdvisory": {
                "just": false
            },
            "isCustomBasket": {
                "nothing": null
            }
        },
        "events": [],
        "fees": [],
        "cvr": {
            "nothing": null
        },
        "rightToBreakDetails": {
            "nothing": null
        },
        "capitalSharing": [],
        "tagMap": [],
        "tradeIdentifiers": [],
        "ISDADefinition": {
            "just": "ISDA2021"
        }
    },
    "swapDetails": {
        "underlying": "USD",
        "physicalOrNDS": {
            "physical": null
        },
        "swapType": {
            "irsOis": null
        },
        "clearedTrade": false,
        "markitSingleSided": {
            "just": false
        },
        "principalExchange": {
            "just": {
                "occurs": {
                    "firstLastLegs": null
                },
                "params": {
                    "nothing": null
                },
                "schedule": {
                    "principalExchangeSchedule": []
                }
            }
        },
        "isIsdaFallback": {
            "just": false
        }
    },
    "swapLegs": [
        {
            "v1": 0,
            "v2": {
                "bookPayReceive": {
                    "pay": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "fixed": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "just": 1000
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "just": 3
                                    },
                                    "ratesetRef": {
                                        "nothing": null
                                    },
                                    "referenceTenor": {
                                        "nothing": null
                                    },
                                    "margin": {
                                        "marginNone": null
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [],
                                    "formula": "ARR",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "notApplicable": null
                                    },
                                    "averagingMethod": {
                                        "notApplicable": null
                                    }
                                },
                                "swapPeriods": {
                                    "periods": {
                                        "monthly": null
                                    },
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "2026-01-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "2026-03-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "notApplicable": null
                                    },
                                    "rolloverDay": 16,
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": [
                                    {
                                        "v1": 0,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-01-16",
                                                "endDate": "2026-02-17",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-02-19",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "just": 3
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "nothing": null
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": -1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "just": -2.67
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "nothing": null
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    },
                                    {
                                        "v1": 1,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-02-17",
                                                "endDate": "2026-03-16",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-03-18",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "just": 3
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "nothing": null
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": -1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "just": -2.25
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "nothing": null
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        },
        {
            "v1": 1,
            "v2": {
                "bookPayReceive": {
                    "receive": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "floating": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "just": 1000
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "nothing": null
                                    },
                                    "ratesetRef": {
                                        "just": "SOFR"
                                    },
                                    "referenceTenor": {
                                        "just": "1D"
                                    },
                                    "margin": {
                                        "marginAdditive": 0
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [
                                        "US"
                                    ],
                                    "formula": "OIS",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "plain": null
                                    },
                                    "averagingMethod": {
                                        "compound": null
                                    }
                                },
                                "swapPeriods": {
                                    "periods": {
                                        "monthly": null
                                    },
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "2026-01-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "2026-03-16",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "floating": {
                                            "average": {
                                                "daily": null
                                            }
                                        }
                                    },
                                    "rolloverDay": 16,
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": [
                                    {
                                        "v1": 0,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-01-16",
                                                "endDate": "2026-02-17",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "just": "2026-02-17"
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-02-19",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "just": {
                                                        "ratesets": [
                                                            {
                                                                "ratesetRef": "SOFR",
                                                                "referenceTenor": "1D"
                                                            }
                                                        ],
                                                        "interpolation": {
                                                            "na": null
                                                        },
                                                        "modified": false
                                                    }
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": 1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "nothing": null
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0,
                                                        "modified": false
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    },
                                    {
                                        "v1": 1,
                                        "v2": {
                                            "commonSchedule": {
                                                "startDate": "2026-02-17",
                                                "endDate": "2026-03-16",
                                                "closedDate": {
                                                    "nothing": null
                                                },
                                                "ratesetDate": {
                                                    "date": {
                                                        "just": "2026-03-16"
                                                    },
                                                    "modified": false
                                                },
                                                "paymentDate": {
                                                    "date": "2026-03-18",
                                                    "modified": false
                                                },
                                                "rate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "discountRate": {
                                                    "price": {
                                                        "nothing": null
                                                    },
                                                    "modified": false
                                                },
                                                "floatingRate": {
                                                    "just": {
                                                        "ratesets": [
                                                            {
                                                                "ratesetRef": "SOFR",
                                                                "referenceTenor": "1D"
                                                            }
                                                        ],
                                                        "interpolation": {
                                                            "na": null
                                                        },
                                                        "modified": false
                                                    }
                                                },
                                                "notional": {
                                                    "amount": {
                                                        "just": 1000
                                                    },
                                                    "modified": false
                                                },
                                                "interest": {
                                                    "nothing": null
                                                },
                                                "reval": true
                                            },
                                            "additionalFloatingSchedule": {
                                                "just": {
                                                    "margin": {
                                                        "price": 0,
                                                        "modified": false
                                                    },
                                                    "averagingSchedules": {
                                                        "nothing": null
                                                    }
                                                }
                                            },
                                            "additionalNDSSchedule": {
                                                "nothing": null
                                            },
                                            "additionalResetSchedule": {
                                                "nothing": null
                                            },
                                            "additionalFixedSchedule": {
                                                "nothing": null
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        }
    ]
}

<File--- tcs-poc/json-examples/polar/index-swap-new-flattened.json --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "kbagci",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T11:32:00Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15T06:00:00Z",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15T06:00:00Z",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": false,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "leg": {
    "underlyingAsset": {
      "indexCode": "AIAGER",
      "ISIN": null
    },
    "volume": {
      "volumeType": "notional",
      "rounding": "2dp"
    },
    "fixedFeeLeg": {
      "dayCountBasis": "ACT/365",
      "combineFeesTbills": "No",
      "feeStartDate": "2026-01-15T06:00:00Z",
      "settlement": null
    },
    "floatingIndexLeg": {
      "periods": {
        "singleOrMultiRatesets": "single",
        "ratesetOn": "commodityBusinessDays",
        "startDate": "2026-01-15T06:00:00Z",
        "endDate": "",
        "rollDateConvention": "MFBD"
      },
      "price": {
        "priceType": "close",
        "referenceDate": "2026-01-15T06:00:00Z",
        "margin": 0,
        "rounding": "4dp"
      },
      "indexTradeDetails": {
        "hedgeDisruption": "Yes",
        "ateTrigger": "No",
        "reinvesting": "No",
        "stopLoss": "noStopLoss",
        "indexFloatingPerformance": "noFloatingPerformance",
        "linkedTradeableId": null,
        "exitCost": "noExitCost",
        "unilateralUnwindRights": "No",
        "standardIcoh": "Yes",
        "isBreakable": false
      }
    },
    "payment": {
      "paymentCcy": "USD",
      "assetCcy": "USD",
      "paymentDate": null,
      "paymentDaysOffset": 2,
      "dayType": "Business",
      "calendar": ["NY"],
      "rounding": "2dp"
    }
  }
}

<File--- tcs-poc/json-examples/polar/index-swap-new-polar.txt --->
{
  "general": {
    "tradeKey": {
      "tradeId": "",
      "label": ""
    },
    "transactionInformation": {
      "transactionRoles": {
        "marketer": null,
        "transactionOriginator": null,
        "priceMaker": "kbagci",
        "transactionAcceptor": null,
        "parameterGrantor": null
      },
      "executionDetails": {
        "executionDateTime": "2026-01-16T11:32:00Z",
        "bestExecutionApplicable": null,
        "executionVenue": {
          "executionVenue": null,
          "venueTransactionID": null,
          "executionBroker": null,
          "executionBrokeragePayer": {
            "wePay": null
          },
          "executionVenueMIC": null,
          "executionVenueType": "OffFacility"
        },
        "clearingVenue": null,
        "reportTrackingNumber": null,
        "omsOrderID": null,
        "isOffMarketPrice": false,
        "clientInstructionTime": null
      },
      "packageTradeDetails": {
        "isPackageTrade": false,
        "packageIdentifier": null,
        "packagePriceOrSpread": null,
        "packageType": null,
        "packagePrice": null,
        "packagePriceCcy": null,
        "priceNotation": null,
        "useTradeIdAsPackageId": true
      },
      "blockAllocationDetails": null
    },
    "common": {
      "book": "MEWEST01HS",
      "accountReference": null,
      "tradeDate": "2026-01-15T06:00:00Z",
      "counterparty": "02519916",
      "novatedToCounterparty": null,
      "counterpartyAccountReference": null,
      "inputDate": "2026-01-15T06:00:00Z",
      "orderTime": null,
      "comment": null,
      "initialMargin": null,
      "backoutBook": null,
      "tradingStrategy": null,
      "ddeEligible": {
        "No": null
      },
      "backoutTradingStrategy": null,
      "externalReference": null,
      "internalReference": null,
      "initialMarginDeliveryDate": null,
      "initialMarginDescription": null,
      "structureDetails": null,
      "backoutEntity": null,
      "salesGroup": null,
      "includeFeeEngine": [
        "none"
      ],
      "acsLinkType": null,
      "regionOrAccount": null,
      "originatingSystem": null,
      "stp": {
        "No": null
      },
      "sourceSystem": null,
      "cashflowHedgeNotification": false,
      "IRDAdvisory": false,
      "isCustomBasket": false
    },
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "leg": {
    "underlyingAsset": {
      "indexCode": "AIAGER",
      "ISIN": null
    },
    "volume": {
      "volumeType": {
        "notional": null
      },
      "rounding": {
        "_2dp": null
      }
    },
    "fixedFeeLeg": {
      "dayCountBasis": "ACT/365",
      "combineFeesTbills": {
        "No": null
      },
      "feeStartDate": "2026-01-15T06:00:00Z",
      "settlement": {
        "relativeToResetDate": null
      }
    },
    "floatingIndexLeg": {
      "periods": {
        "singleOrMultiRatesets": {
          "single": null
        },
        "ratesetOn": {
          "commodityBusinessDays": null
        },
        "startDate": "2026-01-15T06:00:00Z",
        "endDate": "",
        "rollDateConvention": {
          "MFBD": null
        }
      },
      "price": {
        "priceType": {
          "close": {
            "referenceDate": "2026-01-15T06:00:00Z",
            "margin": {
              "marginNone": 0
            }
          }
        },
        "rounding": {
          "_4dp": null
        }
      },
      "indexTradeDetails": {
        "hedgeDisruption": {
          "Yes": null
        },
        "ateTrigger": {
          "No": null
        },
        "reinvesting": {
          "No": null
        },
        "stopLoss": {
          "noStopLoss": null
        },
        "indexFloatingPerformance": {
          "noFloatingPerformance": null
        },
        "linkedTradeableId": null,
        "exitCost": {
          "noExitCost": null
        },
        "unilateralUnwindRights": {
          "No": null
        },
        "standardIcoh": {
          "Yes": null
        },
        "isBreakable": false
      }
    },
    "payment": {
      "paymentCcy": "USD",
      "fxConversion": {
        "fxFixingRefCode": null,
        "ratesetExprCode": null,
        "assetCcy": "USD"
      },
      "terms": {
        "paymentDate": null,
        "paymentDaysOffset": 2,
        "dayType": {
          "Business": null
        },
        "calendar": [
          "NY"
        ]
      },
      "rounding": {
        "_2dp": null
      }
    },
    "assetSchedule": [],
    "isCustomSchedule": false,
    "tagMap": []
  }
}

<File--- tcs-poc/json-examples/polar/index-swap-new-flattened.txt --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "kbagci",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T11:32:00Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15T06:00:00Z",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15T06:00:00Z",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": false,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "leg": {
    "underlyingAsset": {
      "indexCode": "AIAGER",
      "ISIN": null
    },
    "volume": {
      "volumeType": "notional",
      "rounding": "2dp"
    },
    "fixedFeeLeg": {
      "dayCountBasis": "ACT/365",
      "combineFeesTbills": "No",
      "feeStartDate": "2026-01-15T06:00:00Z",
      "settlement": null
    },
    "floatingIndexLeg": {
      "periods": {
        "singleOrMultiRatesets": "single",
        "ratesetOn": "commodityBusinessDays",
        "startDate": "2026-01-15T06:00:00Z",
        "endDate": "",
        "rollDateConvention": "MFBD"
      },
      "price": {
        "priceType": "close",
        "referenceDate": "2026-01-15T06:00:00Z",
        "margin": 0,
        "rounding": "4dp"
      },
      "indexTradeDetails": {
        "hedgeDisruption": "Yes",
        "ateTrigger": "No",
        "reinvesting": "No",
        "stopLoss": "noStopLoss",
        "indexFloatingPerformance": "noFloatingPerformance",
        "linkedTradeableId": null,
        "exitCost": "noExitCost",
        "unilateralUnwindRights": "No",
        "standardIcoh": "Yes",
        "isBreakable": false
      }
    },
    "payment": {
      "paymentCcy": "USD",
      "assetCcy": "USD",
      "paymentDate": null,
      "paymentDaysOffset": 2,
      "dayType": "Business",
      "calendar": ["NY"],
      "rounding": "2dp"
    }
  }
}

<File--- tcs-poc/json-examples/polar/ir-swap-new-flattened.json --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T05:06:31.000Z",
      "bestExecutionApplicable": null,
      "executionVenue": null,
      "venueTransactionID": null,
      "executionBroker": null,
      "executionBrokeragePayer": "wePay",
      "executionVenueMIC": null,
      "executionVenueType": "OffFacility",
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "",
    "accountReference": null,
    "tradeDate": "2026-01-15",
    "counterparty": "",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "allLegs": false,
      "nearLeg": false,
      "farLeg": false,
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": "ISDA2021"
  },
  "swapDetails": {
    "underlying": "USD",
    "settlementType": "physical",
    "swapType": "irsOis",
    "isCleared": false,
    "markitSingleSided": false,
    "principalExchange": "firstLastLegs",
    "isIsdaFallback": false
  },
  "swapLegs": [
    {
      "legIndex": 0,
      "direction": "pay",
      "currency": "USD",
      "rateType": "fixed",
      "notional": null,
      "scheduleType": "constant",
      "interestRate": null,
      "ratesetRef": null,
      "referenceTenor": null,
      "margin": "marginNone",
      "ratesetOffset": null,
      "paymentOffset": null,
      "ratesetCalendars": [],
      "formula": "ARR",
      "dayCountBasis": "ACT/360",
      "observationMethod": "notApplicable",
      "averagingMethod": "notApplicable",
      "startDate": "",
      "endDate": "",
      "isAdjusted": true,
      "stubDate": null,
      "stubDayCountBasis": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "notApplicable",
      "rollConvention": null,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "fxSettlement": null,
      "paymentCalendars": [
        "NY"
      ],
      "rollDateConvention": "MFBD",
      "nonStandard": null
    },
    {
      "legIndex": 1,
      "direction": "receive",
      "currency": "USD",
      "rateType": "floating",
      "notional": null,
      "scheduleType": "constant",
      "interestRate": null,
      "ratesetRef": "SOFR",
      "referenceTenor": "1D",
      "margin": 0,
      "ratesetOffset": null,
      "paymentOffset": null,
      "ratesetCalendars": [
        "US"
      ],
      "formula": "OIS",
      "dayCountBasis": "ACT/360",
      "observationMethod": "plain",
      "averagingMethod": "compound",
      "startDate": "",
      "endDate": "",
      "isAdjusted": true,
      "stubDate": null,
      "stubDayCountBasis": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "floating-average-daily",
      "rollConvention": null,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "fxSettlement": null,
      "paymentCalendars": [
        "NY"
      ],
      "rollDateConvention": "MFBD",
      "nonStandard": null
    }
  ]
}

<File--- tcs-poc/json-examples/polar/ir-swap-new-polar.json --->
{
    "general": {
        "tradeKey": {
            "tradeId": "",
            "label": ""
        },
        "transactionInformation": {
            "transactionRoles": {
                "marketer": {
                    "nothing": null
                },
                "transactionOriginator": {
                    "nothing": null
                },
                "priceMaker": "",
                "transactionAcceptor": {
                    "nothing": null
                },
                "parameterGrantor": {
                    "nothing": null
                }
            },
            "executionDetails": {
                "executionDateTime": {
                    "date": {
                        "date": "2026-01-16",
                        "expr": {
                            "nothing": null
                        }
                    },
                    "time": {
                        "hours": 5,
                        "minutes": 6,
                        "seconds": 31,
                        "milliSeconds": 0
                    }
                },
                "bestExecutionApplicable": {
                    "nothing": null
                },
                "executionVenue": {
                    "just": {
                        "executionVenue": {
                            "nothing": null
                        },
                        "venueTransactionID": {
                            "nothing": null
                        },
                        "executionBroker": {
                            "nothing": null
                        },
                        "executionBrokeragePayer": {
                            "wePay": null
                        },
                        "executionVenueMIC": {
                            "nothing": null
                        },
                        "executionVenueType": {
                            "just": "OffFacility"
                        }
                    }
                },
                "clearingVenue": {
                    "nothing": null
                },
                "reportTrackingNumber": {
                    "nothing": null
                },
                "omsOrderID": {
                    "nothing": null
                },
                "isOffMarketPrice": {
                    "just": false
                },
                "clientInstructionTime": {
                    "nothing": null
                }
            },
            "packageTradeDetails": {
                "isPackageTrade": {
                    "just": false
                },
                "packageIdentifier": {
                    "nothing": null
                },
                "packagePriceOrSpread": {
                    "nothing": null
                },
                "packageType": {
                    "nothing": null
                },
                "packagePrice": {
                    "nothing": null
                },
                "packagePriceCcy": {
                    "nothing": null
                },
                "priceNotation": {
                    "nothing": null
                },
                "useTradeIdAsPackageId": {
                    "just": true
                }
            },
            "blockAllocationDetails": {
                "nothing": null
            }
        },
        "common": {
            "book": "",
            "accountReference": {
                "nothing": null
            },
            "tradeDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "counterparty": "",
            "novatedToCounterparty": {
                "nothing": null
            },
            "counterpartyAccountReference": {
                "nothing": null
            },
            "inputDate": {
                "date": "2026-01-15",
                "expr": {
                    "nothing": null
                }
            },
            "orderTime": {
                "nothing": null
            },
            "comment": {
                "nothing": null
            },
            "initialMargin": {
                "nothing": null
            },
            "backoutBook": {
                "nothing": null
            },
            "tradingStrategy": {
                "nothing": null
            },
            "ddeEligible": {
                "No": null
            },
            "backoutTradingStrategy": {
                "nothing": null
            },
            "externalReference": {
                "nothing": null
            },
            "internalReference": {
                "nothing": null
            },
            "initialMarginDeliveryDate": {
                "nothing": null
            },
            "initialMarginDescription": {
                "nothing": null
            },
            "structureDetails": {
                "nothing": null
            },
            "backoutEntity": {
                "nothing": null
            },
            "salesGroup": {
                "nothing": null
            },
            "includeFeeEngine": {
                "just": {
                    "allLegs": false,
                    "nearLeg": false,
                    "farLeg": false,
                    "none": true
                }
            },
            "acsLinkType": {
                "nothing": null
            },
            "regionOrAccount": {
                "nothing": null
            },
            "originatingSystem": {
                "nothing": null
            },
            "stp": {
                "No": null
            },
            "sourceSystem": {
                "nothing": null
            },
            "cashflowHedgeNotification": {
                "just": false
            },
            "IRDAdvisory": {
                "just": false
            },
            "isCustomBasket": {
                "nothing": null
            }
        },
        "events": [],
        "fees": [],
        "cvr": {
            "nothing": null
        },
        "rightToBreakDetails": {
            "nothing": null
        },
        "capitalSharing": [],
        "tagMap": [],
        "tradeIdentifiers": [],
        "ISDADefinition": {
            "just": "ISDA2021"
        }
    },
    "swapDetails": {
        "underlying": "USD",
        "physicalOrNDS": {
            "physical": null
        },
        "swapType": {
            "irsOis": null
        },
        "clearedTrade": false,
        "markitSingleSided": {
            "just": false
        },
        "principalExchange": {
            "just": {
                "occurs": {
                    "firstLastLegs": null
                },
                "params": {
                    "nothing": null
                },
                "schedule": {
                    "principalExchangeSchedule": []
                }
            }
        },
        "isIsdaFallback": {
            "just": false
        }
    },
    "swapLegs": [
        {
            "v1": 0,
            "v2": {
                "bookPayReceive": {
                    "pay": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "fixed": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "nothing": null
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "nothing": null
                                    },
                                    "ratesetRef": {
                                        "nothing": null
                                    },
                                    "referenceTenor": {
                                        "nothing": null
                                    },
                                    "margin": {
                                        "marginNone": null
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [],
                                    "formula": "ARR",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "notApplicable": null
                                    },
                                    "averagingMethod": {
                                        "notApplicable": null
                                    }
                                },
                                "swapPeriods": {
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "notApplicable": null
                                    },
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": []
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        },
        {
            "v1": 1,
            "v2": {
                "bookPayReceive": {
                    "receive": null
                },
                "notionalCurrency": "USD",
                "rateType": {
                    "floating": null
                },
                "swapStream": [
                    {
                        "v1": 0,
                        "v2": {
                            "notional": {
                                "nothing": null
                            },
                            "scheduleType": {
                                "constant": null
                            },
                            "swapStreamDetails": {
                                "pricingDetails": {
                                    "interestRate": {
                                        "nothing": null
                                    },
                                    "ratesetRef": {
                                        "just": "SOFR"
                                    },
                                    "referenceTenor": {
                                        "just": "1D"
                                    },
                                    "margin": {
                                        "marginAdditive": 0
                                    },
                                    "ratesetOffset": {
                                        "nothing": null
                                    },
                                    "paymentOffset": {
                                        "nothing": null
                                    },
                                    "ratesetCalendars": [
                                        "US"
                                    ],
                                    "formula": "OIS",
                                    "dayCountBasis": "ACT/360",
                                    "dayCountBasisIsda": {
                                        "just": "ACT/360"
                                    },
                                    "observationMethod": {
                                        "plain": null
                                    },
                                    "averagingMethod": {
                                        "compound": null
                                    }
                                },
                                "swapPeriods": {
                                    "periodMultiplier": 1,
                                    "startDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "endDate": {
                                        "date": "",
                                        "expr": {
                                            "nothing": null
                                        }
                                    },
                                    "isAdjusted": true,
                                    "stubDate": {
                                        "nothing": null
                                    },
                                    "stubDayCountBasis": {
                                        "nothing": null
                                    },
                                    "stubType": {
                                        "none": null
                                    },
                                    "alignAtEom": {
                                        "notEom": null
                                    },
                                    "style": {
                                        "floating": {
                                            "average": {
                                                "daily": null
                                            }
                                        }
                                    },
                                    "rollConvention": {
                                        "nothing": null
                                    }
                                },
                                "schedule": []
                            }
                        }
                    }
                ],
                "settlement": {
                    "settlementCurrency": "USD",
                    "offset": {
                        "just": 2
                    },
                    "fxSettlement": {
                        "nothing": null
                    },
                    "paymentCalendars": [
                        "NY"
                    ],
                    "rollDateConvention": {
                        "MFBD": null
                    }
                },
                "nonStandard": {
                    "nothing": null
                }
            }
        }
    ]
}

<File--- tcs-poc/json-examples/polar/ir-swap-postsave-flattened.json --->
{
  "general": {
    "tradeId": "HH_110517498",
    "label": "OVERNIGHT",
    "coLocatedId": "baseScenario",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": "kbagci",
      "priceMaker": "kbagci",
      "transactionAcceptor": "vmenon",
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T05:22:16.000Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "allLegs": false,
      "nearLeg": false,
      "farLeg": false,
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [
      {
        "schemaVersion": "3.0",
        "eventDescription": "execute deal",
        "eventCode": "execute",
        "businessDateTime": 1768541091401,
        "application": "FROST",
        "correlationId": "47f8f6a7-f534-4ff6-a3de-7e391c234af0"
      }
    ],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": "ISDA2021"
  },
  "swapDetails": {
    "underlying": "USD",
    "settlementType": "physical",
    "swapType": "irsOis",
    "isCleared": false,
    "markitSingleSided": false,
    "principalExchange": "firstLastLegs",
    "isIsdaFallback": false
  },
  "swapLegs": [
    {
      "legIndex": 0,
      "direction": "pay",
      "currency": "USD",
      "rateType": "fixed",
      "notional": 1000,
      "scheduleType": "constant",
      "interestRate": 3,
      "ratesetRef": null,
      "referenceTenor": null,
      "margin": "marginNone",
      "ratesetOffset": null,
      "paymentOffset": 2,
      "formula": "ARR",
      "dayCountBasis": "ACT/360",
      "observationMethod": "notApplicable",
      "averagingMethod": "notApplicable",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "notApplicable",
      "rolloverDay": 16,
      "paymentFrequency": "monthly",
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "rate": 3,
          "notional": -1000,
          "interest": -2.67,
          "reval": true
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "rate": 3,
          "notional": -1000,
          "interest": -2.25,
          "reval": true
        }
      ]
    },
    {
      "legIndex": 1,
      "direction": "receive",
      "currency": "USD",
      "rateType": "floating",
      "notional": 1000,
      "scheduleType": "constant",
      "ratesetRef": "SOFR",
      "referenceTenor": "1D",
      "margin": 0,
      "paymentOffset": 2,
      "formula": "OIS",
      "dayCountBasis": "ACT/360",
      "observationMethod": "plain",
      "averagingMethod": "compound",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubType": "none",
      "style": "floating-average-daily",
      "rolloverDay": 16,
      "paymentFrequency": "monthly",
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "ratesetDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D",
          "interpolation": "na",
          "reval": true
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "ratesetDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D",
          "interpolation": "na",
          "reval": true
        }
      ]
    }
  ]
}

<File--- tcs-poc/json-examples/polar/ir-swap-new-flattened.txt --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T05:06:31.000Z",
      "bestExecutionApplicable": null,
      "executionVenue": null,
      "venueTransactionID": null,
      "executionBroker": null,
      "executionBrokeragePayer": "wePay",
      "executionVenueMIC": null,
      "executionVenueType": "OffFacility",
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "",
    "accountReference": null,
    "tradeDate": "2026-01-15",
    "counterparty": "",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "allLegs": false,
      "nearLeg": false,
      "farLeg": false,
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": "ISDA2021"
  },
  "swapDetails": {
    "underlying": "USD",
    "settlementType": "physical",
    "swapType": "irsOis",
    "isCleared": false,
    "markitSingleSided": false,
    "principalExchange": "firstLastLegs",
    "isIsdaFallback": false
  },
  "swapLegs": [
    {
      "legIndex": 0,
      "direction": "pay",
      "currency": "USD",
      "rateType": "fixed",
      "notional": null,
      "scheduleType": "constant",
      "interestRate": null,
      "ratesetRef": null,
      "referenceTenor": null,
      "margin": "marginNone",
      "ratesetOffset": null,
      "paymentOffset": null,
      "ratesetCalendars": [],
      "formula": "ARR",
      "dayCountBasis": "ACT/360",
      "observationMethod": "notApplicable",
      "averagingMethod": "notApplicable",
      "startDate": "",
      "endDate": "",
      "isAdjusted": true,
      "stubDate": null,
      "stubDayCountBasis": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "notApplicable",
      "rollConvention": null,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "fxSettlement": null,
      "paymentCalendars": [
        "NY"
      ],
      "rollDateConvention": "MFBD",
      "nonStandard": null
    },
    {
      "legIndex": 1,
      "direction": "receive",
      "currency": "USD",
      "rateType": "floating",
      "notional": null,
      "scheduleType": "constant",
      "interestRate": null,
      "ratesetRef": "SOFR",
      "referenceTenor": "1D",
      "margin": 0,
      "ratesetOffset": null,
      "paymentOffset": null,
      "ratesetCalendars": [
        "US"
      ],
      "formula": "OIS",
      "dayCountBasis": "ACT/360",
      "observationMethod": "plain",
      "averagingMethod": "compound",
      "startDate": "",
      "endDate": "",
      "isAdjusted": true,
      "stubDate": null,
      "stubDayCountBasis": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "floating-average-daily",
      "rollConvention": null,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "fxSettlement": null,
      "paymentCalendars": [
        "NY"
      ],
      "rollDateConvention": "MFBD",
      "nonStandard": null
    }
  ]
}

<File--- tcs-poc/json-examples/polar/index-swap-new-polar.json --->
{
  "general": {
    "tradeKey": {
      "tradeId": "",
      "label": ""
    },
    "transactionInformation": {
      "transactionRoles": {
        "marketer": null,
        "transactionOriginator": null,
        "priceMaker": "kbagci",
        "transactionAcceptor": null,
        "parameterGrantor": null
      },
      "executionDetails": {
        "executionDateTime": "2026-01-16T11:32:00Z",
        "bestExecutionApplicable": null,
        "executionVenue": {
          "executionVenue": null,
          "venueTransactionID": null,
          "executionBroker": null,
          "executionBrokeragePayer": {
            "wePay": null
          },
          "executionVenueMIC": null,
          "executionVenueType": "OffFacility"
        },
        "clearingVenue": null,
        "reportTrackingNumber": null,
        "omsOrderID": null,
        "isOffMarketPrice": false,
        "clientInstructionTime": null
      },
      "packageTradeDetails": {
        "isPackageTrade": false,
        "packageIdentifier": null,
        "packagePriceOrSpread": null,
        "packageType": null,
        "packagePrice": null,
        "packagePriceCcy": null,
        "priceNotation": null,
        "useTradeIdAsPackageId": true
      },
      "blockAllocationDetails": null
    },
    "common": {
      "book": "MEWEST01HS",
      "accountReference": null,
      "tradeDate": "2026-01-15T06:00:00Z",
      "counterparty": "02519916",
      "novatedToCounterparty": null,
      "counterpartyAccountReference": null,
      "inputDate": "2026-01-15T06:00:00Z",
      "orderTime": null,
      "comment": null,
      "initialMargin": null,
      "backoutBook": null,
      "tradingStrategy": null,
      "ddeEligible": {
        "No": null
      },
      "backoutTradingStrategy": null,
      "externalReference": null,
      "internalReference": null,
      "initialMarginDeliveryDate": null,
      "initialMarginDescription": null,
      "structureDetails": null,
      "backoutEntity": null,
      "salesGroup": null,
      "includeFeeEngine": [
        "none"
      ],
      "acsLinkType": null,
      "regionOrAccount": null,
      "originatingSystem": null,
      "stp": {
        "No": null
      },
      "sourceSystem": null,
      "cashflowHedgeNotification": false,
      "IRDAdvisory": false,
      "isCustomBasket": false
    },
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": null
  },
  "leg": {
    "underlyingAsset": {
      "indexCode": "AIAGER",
      "ISIN": null
    },
    "volume": {
      "volumeType": {
        "notional": null
      },
      "rounding": {
        "_2dp": null
      }
    },
    "fixedFeeLeg": {
      "dayCountBasis": "ACT/365",
      "combineFeesTbills": {
        "No": null
      },
      "feeStartDate": "2026-01-15T06:00:00Z",
      "settlement": {
        "relativeToResetDate": null
      }
    },
    "floatingIndexLeg": {
      "periods": {
        "singleOrMultiRatesets": {
          "single": null
        },
        "ratesetOn": {
          "commodityBusinessDays": null
        },
        "startDate": "2026-01-15T06:00:00Z",
        "endDate": "",
        "rollDateConvention": {
          "MFBD": null
        }
      },
      "price": {
        "priceType": {
          "close": {
            "referenceDate": "2026-01-15T06:00:00Z",
            "margin": {
              "marginNone": 0
            }
          }
        },
        "rounding": {
          "_4dp": null
        }
      },
      "indexTradeDetails": {
        "hedgeDisruption": {
          "Yes": null
        },
        "ateTrigger": {
          "No": null
        },
        "reinvesting": {
          "No": null
        },
        "stopLoss": {
          "noStopLoss": null
        },
        "indexFloatingPerformance": {
          "noFloatingPerformance": null
        },
        "linkedTradeableId": null,
        "exitCost": {
          "noExitCost": null
        },
        "unilateralUnwindRights": {
          "No": null
        },
        "standardIcoh": {
          "Yes": null
        },
        "isBreakable": false
      }
    },
    "payment": {
      "paymentCcy": "USD",
      "fxConversion": {
        "fxFixingRefCode": null,
        "ratesetExprCode": null,
        "assetCcy": "USD"
      },
      "terms": {
        "paymentDate": null,
        "paymentDaysOffset": 2,
        "dayType": {
          "Business": null
        },
        "calendar": [
          "NY"
        ]
      },
      "rounding": {
        "_2dp": null
      }
    },
    "assetSchedule": [],
    "isCustomSchedule": false,
    "tagMap": []
  }
}

<File--- tcs-poc/json-examples/polar/ir-swap-presave-flattened.json --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "kbagci",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "2026-01-16T05:22:16.000Z",
      "bestExecutionApplicable": null,
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      },
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  },
  "common": {
    "book": "MEWEST01HS",
    "accountReference": null,
    "tradeDate": "2026-01-15",
    "counterparty": "02519916",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "2026-01-15",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "allLegs": false,
      "nearLeg": false,
      "farLeg": false,
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": "ISDA2021"
  },
  "swapDetails": {
    "underlying": "USD",
    "settlementType": "physical",
    "swapType": "irsOis",
    "isCleared": false,
    "markitSingleSided": false,
    "principalExchange": "firstLastLegs",
    "isIsdaFallback": false
  },
  "swapLegs": [
    {
      "legIndex": 0,
      "direction": "pay",
      "currency": "USD",
      "rateType": "fixed",
      "notional": 1000,
      "scheduleType": "constant",
      "interestRate": 3,
      "ratesetRef": null,
      "referenceTenor": null,
      "margin": "marginNone",
      "ratesetOffset": null,
      "paymentOffset": null,
      "formula": "ARR",
      "dayCountBasis": "ACT/360",
      "observationMethod": "notApplicable",
      "averagingMethod": "notApplicable",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubDate": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "notApplicable",
      "rolloverDay": 16,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "rate": 3,
          "notional": -1000,
          "interest": -2.67
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "rate": 3,
          "notional": -1000,
          "interest": -2.25
        }
      ]
    },
    {
      "legIndex": 1,
      "direction": "receive",
      "currency": "USD",
      "rateType": "floating",
      "notional": 1000,
      "scheduleType": "constant",
      "ratesetRef": "SOFR",
      "referenceTenor": "1D",
      "margin": 0,
      "formula": "OIS",
      "dayCountBasis": "ACT/360",
      "observationMethod": "plain",
      "averagingMethod": "compound",
      "startDate": "2026-01-16",
      "endDate": "2026-03-16",
      "isAdjusted": true,
      "stubType": "none",
      "style": "floating-average-daily",
      "rolloverDay": 16,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "schedule": [
        {
          "periodIndex": 0,
          "startDate": "2026-01-16",
          "endDate": "2026-02-17",
          "ratesetDate": "2026-02-17",
          "paymentDate": "2026-02-19",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D"
        },
        {
          "periodIndex": 1,
          "startDate": "2026-02-17",
          "endDate": "2026-03-16",
          "ratesetDate": "2026-03-16",
          "paymentDate": "2026-03-18",
          "notional": 1000,
          "margin": 0,
          "index": "SOFR",
          "tenor": "1D"
        }
      ]
    }
  ]
}

<File--- tcs-poc/tcs-api/.claude/settings.local.json --->
{
  "permissions": {
    "allow": [
      "Bash(python -m pytest tests/ -v -k validate)",
      "Bash(curl:*)",
      "Bash(pip install:*)",
      "Bash(python -m json.tool:*)",
      "Bash(poetry install:*)",
      "Bash(python:*)",
      "Bash(tree:*)",
      "Bash(find:*)",
      "Bash(lsof:*)",
      "Bash(kill:*)",
      "Bash(jq \".common.book = \"\"MEWEST01HS\"\" | .common.counterparty = \"\"02519916\"\"\")",
      "Bash(jq:*)",
      "Bash(pkill:*)",
      "Bash(poetry add:*)",
      "Bash(poetry run python:*)",
      "Bash(ls:*)",
      "Bash(poetry run pytest:*)",
      "Bash(wc:*)",
      "Bash(cloc:*)",
      "Bash(pytest:*)",
      "Bash(git stash:*)"
    ]
  }
}

<File--- tcs-poc/tcs-api/tests/test_health.py --->
"""Tests for health check endpoints."""

import pytest
from fastapi.testclient import TestClient
from trade_api.main import create_app


@pytest.fixture
def client():
    """Create a test client."""
    app = create_app()
    return TestClient(app)


def test_health_endpoint(client):
    """Test basic /health endpoint returns 200 and correct structure."""
    response = client.get("/health")

    assert response.status_code == 200
    data = response.json()
    assert data["status"] == "healthy"
    assert "timestamp" in data
    assert "version" in data
    assert data["version"] == "0.1.0"


def test_liveness_endpoint(client):
    """Test /health/live endpoint returns 200 and correct structure."""
    response = client.get("/health/live")

    assert response.status_code == 200
    data = response.json()
    assert data["status"] == "healthy"
    assert "timestamp" in data
    assert "version" in data
    assert data["version"] == "0.1.0"


def test_readiness_endpoint(client):
    """Test /health/ready endpoint returns 200 and correct structure."""
    response = client.get("/health/ready")

    assert response.status_code == 200
    data = response.json()
    assert data["status"] == "ready"
    assert "timestamp" in data
    assert "version" in data
    assert "checks" in data
    assert data["version"] == "0.1.0"


def test_readiness_checks_runtime(client):
    """Test /health/ready endpoint includes runtime check."""
    response = client.get("/health/ready")

    assert response.status_code == 200
    data = response.json()
    assert "checks" in data
    assert "runtime" in data["checks"]
    assert data["checks"]["runtime"] == "ok"


def test_readiness_checks_templates(client):
    """Test /health/ready endpoint includes templates check."""
    response = client.get("/health/ready")

    assert response.status_code == 200
    data = response.json()
    assert "checks" in data
    assert "templates" in data["checks"]
    assert data["checks"]["templates"] == "ok"


def test_readiness_checks_validation(client):
    """Test /health/ready endpoint includes validation check."""
    response = client.get("/health/ready")

    assert response.status_code == 200
    data = response.json()
    assert "checks" in data
    assert "validation" in data["checks"]
    assert data["checks"]["validation"] == "ok"


def test_health_endpoint_fast_response(client):
    """Test health endpoints respond quickly (< 1 second)."""
    import time

    start = time.time()
    response = client.get("/health/live")
    duration = time.time() - start

    assert response.status_code == 200
    assert duration < 1.0, f"Health check took {duration}s, should be < 1s"


def test_readiness_endpoint_fast_response(client):
    """Test readiness endpoint responds quickly (< 1 second)."""
    import time

    start = time.time()
    response = client.get("/health/ready")
    duration = time.time() - start

    assert response.status_code == 200
    assert duration < 1.0, f"Readiness check took {duration}s, should be < 1s"


def test_health_timestamp_format(client):
    """Test that timestamps are in ISO format with Z suffix."""
    response = client.get("/health/live")

    assert response.status_code == 200
    data = response.json()
    timestamp = data["timestamp"]
    # Should end with Z for UTC
    assert timestamp.endswith("Z")
    # Should be valid ISO format (basic validation)
    assert "T" in timestamp


def test_multiple_health_checks(client):
    """Test that multiple health checks work consistently."""
    for _ in range(5):
        response = client.get("/health/live")
        assert response.status_code == 200
        assert response.json()["status"] == "healthy"


def test_multiple_readiness_checks(client):
    """Test that multiple readiness checks work consistently."""
    for _ in range(5):
        response = client.get("/health/ready")
        assert response.status_code == 200
        assert response.json()["status"] == "ready"

<File--- tcs-poc/tcs-api/tests/test_endpoints_integration.py --->
"""Integration tests for API endpoints with service layer."""

import pytest
from fastapi.testclient import TestClient
from trade_api.main import create_app


@pytest.fixture
def client():
    """Create a test client."""
    app = create_app()
    return TestClient(app)


def test_new_endpoint_integration(client):
    """Test /new endpoint returns trade data."""
    response = client.get("/api/v1/trades/new?trade_type=ir-swap")

    assert response.status_code == 200
    data = response.json()
    assert data["success"] is True
    assert data["trade_data"] is not None
    assert data["metadata"] is not None
    assert "trade_id" in data["metadata"]
    assert "documentId" in data["metadata"]
    assert "correlationId" in data["metadata"]
    assert data["metadata"]["trade_type"] == "ir-swap"


def test_new_endpoint_invalid_type(client):
    """Test /new endpoint with invalid trade type."""
    response = client.get("/api/v1/trades/new?trade_type=invalid-type")

    # Should return error status code
    assert response.status_code in [400, 500]


def test_validate_endpoint_integration(client):
    """Test /validate endpoint validates trade data."""
    # First create a trade
    create_response = client.get("/api/v1/trades/new?trade_type=ir-swap")
    assert create_response.status_code == 200
    trade_data = create_response.json()["trade_data"]

    # Now validate it
    validate_response = client.post(
        "/api/v1/trades/validate",
        json={"trade_data": trade_data}
    )

    assert validate_response.status_code == 200
    data = validate_response.json()
    assert "success" in data
    assert isinstance(data["success"], bool)
    assert "errors" in data
    assert "warnings" in data
    assert "metadata" in data
    assert "documentId" in data["metadata"]
    assert "correlationId" in data["metadata"]


def test_validate_endpoint_invalid_data(client):
    """Test /validate endpoint with invalid data."""
    response = client.post(
        "/api/v1/trades/validate",
        json={"trade_data": {"invalid": "data"}}
    )

    assert response.status_code == 200
    data = response.json()
    assert data["success"] is False
    assert len(data["errors"]) > 0


def test_save_endpoint_placeholder(client):
    """Test /save endpoint placeholder."""
    response = client.post(
        "/api/v1/trades/save",
        json={"trade_data": {"test": "data"}}
    )

    assert response.status_code == 200
    data = response.json()
    assert data["success"] is True
    assert "warnings" in data


def test_validate_endpoint_with_metadata(client):
    """Test /validate endpoint with metadata in request."""
    # First create a trade
    create_response = client.get("/api/v1/trades/new?trade_type=ir-swap")
    assert create_response.status_code == 200
    trade_data = create_response.json()["trade_data"]

    # Validate with provided metadata
    validate_response = client.post(
        "/api/v1/trades/validate",
        json={
            "trade_data": trade_data,
            "metadata": {
                "documentId": "12345678-1234-1234-1234-123456789012",
                "correlationId": "87654321-4321-4321-4321-210987654321"
            }
        }
    )

    assert validate_response.status_code == 200
    data = validate_response.json()
    assert data["metadata"]["documentId"] == "12345678-1234-1234-1234-123456789012"
    assert data["metadata"]["correlationId"] == "87654321-4321-4321-4321-210987654321"


def test_validate_endpoint_without_metadata(client):
    """Test /validate endpoint generates metadata when not provided."""
    # First create a trade
    create_response = client.get("/api/v1/trades/new?trade_type=ir-swap")
    assert create_response.status_code == 200
    trade_data = create_response.json()["trade_data"]

    # Validate without metadata
    validate_response = client.post(
        "/api/v1/trades/validate",
        json={"trade_data": trade_data}
    )

    assert validate_response.status_code == 200
    data = validate_response.json()
    assert "documentId" in data["metadata"]
    assert "correlationId" in data["metadata"]
    # Both should be valid UUIDs
    assert len(data["metadata"]["documentId"]) == 36
    assert len(data["metadata"]["correlationId"]) == 36


def test_validate_endpoint_with_partial_metadata(client):
    """Test /validate endpoint with only correlationId provided."""
    # First create a trade
    create_response = client.get("/api/v1/trades/new?trade_type=ir-swap")
    assert create_response.status_code == 200
    trade_data = create_response.json()["trade_data"]

    # Validate with only correlationId
    validate_response = client.post(
        "/api/v1/trades/validate",
        json={
            "trade_data": trade_data,
            "metadata": {
                "correlationId": "87654321-4321-4321-4321-210987654321"
            }
        }
    )

    assert validate_response.status_code == 200
    data = validate_response.json()
    # documentId should be generated
    assert "documentId" in data["metadata"]
    assert len(data["metadata"]["documentId"]) == 36
    # correlationId should be the one provided
    assert data["metadata"]["correlationId"] == "87654321-4321-4321-4321-210987654321"

<File--- tcs-poc/tcs-api/tests/test_validation_business_rules.py --->
"""Tests for business rule validation.

This module tests business rules that should be validated across all trades.
Includes date logic, notional matching, currency validation, and rate validation.
"""

import pytest
from datetime import datetime, timedelta

from trade_api.models.trade import Trade, ReadOnlyTrade
from trade_api.validation import ValidationFactory


# ========== FIXTURES ==========

@pytest.fixture
def validation_factory():
    """Create a ValidationFactory for testing."""
    return ValidationFactory()


# ========== DATE BUSINESS RULES ==========

class TestDateBusinessRules:
    """Test date-related business rules."""

    def test_trade_date_not_in_future(self):
        """Test that trade date cannot be in the future."""
        future_date = (datetime.now() + timedelta(days=30)).strftime("%Y-%m-%d")
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": future_date,
                "counterparty": "CP-001",
                "inputDate": future_date
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        # This test documents expected behavior
        # Current validators may not enforce this yet
        trade_date_str = readonly_trade.jmesget("common.tradeDate")
        trade_date = datetime.strptime(trade_date_str, "%Y-%m-%d")
        today = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0)

        # Future dates should ideally be flagged
        # This test will pass for now, but documents the requirement
        is_future = trade_date > today
        assert isinstance(is_future, bool)  # Just verify we can check it

    def test_input_date_on_or_after_trade_date(self):
        """Test that input date is on or after trade date."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        trade_date = datetime.strptime(readonly_trade.jmesget("common.tradeDate"), "%Y-%m-%d")
        input_date = datetime.strptime(readonly_trade.jmesget("common.inputDate"), "%Y-%m-%d")

        assert input_date >= trade_date

    def test_input_date_before_trade_date_should_fail(self):
        """Test that input date before trade date should be invalid."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-10"  # Before trade date
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        trade_date = datetime.strptime(readonly_trade.jmesget("common.tradeDate"), "%Y-%m-%d")
        input_date = datetime.strptime(readonly_trade.jmesget("common.inputDate"), "%Y-%m-%d")

        # Document that this should be invalid
        assert input_date < trade_date  # This is the invalid condition

    def test_swap_start_date_on_or_after_trade_date(self):
        """Test that swap start date is on or after trade date."""
        trade_data = {
            "common": {
                "tradeDate": "2026-01-15"
            },
            "swapLegs": [
                {
                    "startDate": "2026-01-16"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        trade_date = datetime.strptime(readonly_trade.jmesget("common.tradeDate"), "%Y-%m-%d")
        start_date = datetime.strptime(readonly_trade.jmesget("swapLegs[0].startDate"), "%Y-%m-%d")

        assert start_date >= trade_date

    def test_swap_end_date_after_start_date(self):
        """Test that swap end date is after start date."""
        trade_data = {
            "swapLegs": [
                {
                    "startDate": "2026-01-16",
                    "endDate": "2026-03-16"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        start_date = datetime.strptime(readonly_trade.jmesget("swapLegs[0].startDate"), "%Y-%m-%d")
        end_date = datetime.strptime(readonly_trade.jmesget("swapLegs[0].endDate"), "%Y-%m-%d")

        assert end_date > start_date


# ========== NOTIONAL BUSINESS RULES ==========

class TestNotionalBusinessRules:
    """Test notional-related business rules for swaps."""

    def test_matching_notionals_between_legs(self):
        """Test that both swap legs have matching notionals (equal magnitude)."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay",
                    "notional": 1000
                },
                {
                    "direction": "receive",
                    "notional": 1000
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        leg0_notional = readonly_trade.jmesget("swapLegs[0].notional")
        leg1_notional = readonly_trade.jmesget("swapLegs[1].notional")

        assert abs(leg0_notional) == abs(leg1_notional)

    def test_mismatched_notionals_should_fail(self):
        """Test that mismatched notionals should be invalid."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay",
                    "notional": 1000
                },
                {
                    "direction": "receive",
                    "notional": 2000  # Mismatch!
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        leg0_notional = readonly_trade.jmesget("swapLegs[0].notional")
        leg1_notional = readonly_trade.jmesget("swapLegs[1].notional")

        # Document that this should be invalid
        assert abs(leg0_notional) != abs(leg1_notional)

    def test_notional_greater_than_zero(self):
        """Test that notional amount is greater than zero."""
        trade_data = {
            "swapLegs": [
                {
                    "notional": 1000
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        notional = readonly_trade.jmesget("swapLegs[0].notional")
        assert abs(notional) > 0

    def test_zero_notional_should_fail(self):
        """Test that zero notional should be invalid."""
        trade_data = {
            "swapLegs": [
                {
                    "notional": 0
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        notional = readonly_trade.jmesget("swapLegs[0].notional")
        # Document that zero notional should be invalid
        assert notional == 0


# ========== CURRENCY BUSINESS RULES ==========

class TestCurrencyBusinessRules:
    """Test currency-related business rules."""

    def test_matching_currencies_between_legs(self):
        """Test that both legs have matching currencies (for standard IRS)."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD"
            },
            "swapLegs": [
                {
                    "currency": "USD"
                },
                {
                    "currency": "USD"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        leg0_currency = readonly_trade.jmesget("swapLegs[0].currency")
        leg1_currency = readonly_trade.jmesget("swapLegs[1].currency")
        underlying = readonly_trade.jmesget("swapDetails.underlying")

        assert leg0_currency == leg1_currency == underlying

    def test_valid_iso_currency_codes(self):
        """Test that currencies are valid ISO codes (3 letters)."""
        valid_currencies = ["USD", "EUR", "GBP", "JPY", "CHF", "AUD", "CAD"]

        for ccy in valid_currencies:
            trade_data = {
                "swapDetails": {
                    "underlying": ccy
                },
                "swapLegs": [
                    {
                        "currency": ccy
                    }
                ]
            }
            trade = Trade(trade_data)
            readonly_trade = ReadOnlyTrade(trade)

            currency = readonly_trade.jmesget("swapLegs[0].currency")
            assert len(currency) == 3
            assert currency.isupper()

    def test_invalid_currency_code_format(self):
        """Test detection of invalid currency code formats."""
        invalid_currencies = ["US", "USDD", "usd", "123"]

        for ccy in invalid_currencies:
            trade_data = {
                "swapLegs": [
                    {
                        "currency": ccy
                    }
                ]
            }
            trade = Trade(trade_data)
            readonly_trade = ReadOnlyTrade(trade)

            currency = readonly_trade.jmesget("swapLegs[0].currency")
            # Document invalid formats
            is_valid_format = len(currency) == 3 and currency.isupper() and currency.isalpha()
            if not is_valid_format:
                # Expected - these are invalid
                assert True


# ========== RATE BUSINESS RULES ==========

class TestRateBusinessRules:
    """Test rate-related business rules."""

    def test_fixed_rate_positive(self):
        """Test that fixed interest rate is positive."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "fixed",
                    "interestRate": 3.0
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        interest_rate = readonly_trade.jmesget("swapLegs[0].interestRate")
        assert interest_rate > 0

    def test_fixed_rate_reasonable_range(self):
        """Test that fixed rate is in reasonable range (0-100%)."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "fixed",
                    "interestRate": 3.0
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        interest_rate = readonly_trade.jmesget("swapLegs[0].interestRate")
        # Reasonable range for interest rates
        assert 0 < interest_rate < 100

    def test_negative_rate_should_fail(self):
        """Test that negative rates should be flagged (in most cases)."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "fixed",
                    "interestRate": -1.0
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        interest_rate = readonly_trade.jmesget("swapLegs[0].interestRate")
        # Negative rates exist but should be flagged as unusual
        is_negative = interest_rate < 0
        assert isinstance(is_negative, bool)

    def test_valid_rate_index_for_floating_leg(self):
        """Test that floating leg has valid rate index."""
        valid_indices = ["SOFR", "LIBOR", "EURIBOR", "SONIA", "ESTR"]

        for index in valid_indices:
            trade_data = {
                "swapLegs": [
                    {
                        "rateType": "floating",
                        "ratesetRef": index
                    }
                ]
            }
            trade = Trade(trade_data)
            readonly_trade = ReadOnlyTrade(trade)

            rate_index = readonly_trade.jmesget("swapLegs[0].ratesetRef")
            assert rate_index in valid_indices

    def test_valid_tenor_for_floating_leg(self):
        """Test that floating leg has valid tenor."""
        valid_tenors = ["1D", "1W", "1M", "3M", "6M", "12M"]

        for tenor in valid_tenors:
            trade_data = {
                "swapLegs": [
                    {
                        "rateType": "floating",
                        "schedule": [
                            {
                                "tenor": tenor
                            }
                        ]
                    }
                ]
            }
            trade = Trade(trade_data)
            readonly_trade = ReadOnlyTrade(trade)

            leg_tenor = readonly_trade.jmesget("swapLegs[0].schedule[0].tenor")
            assert leg_tenor in valid_tenors


# ========== DIRECTION BUSINESS RULES ==========

class TestDirectionBusinessRules:
    """Test direction-related business rules for swap legs."""

    def test_one_pay_one_receive_leg(self):
        """Test that swap has one pay and one receive leg."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay"
                },
                {
                    "direction": "receive"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        directions = [readonly_trade.jmesget(f"swapLegs[{i}].direction") for i in range(2)]
        assert "pay" in directions
        assert "receive" in directions

    def test_invalid_two_pay_legs(self):
        """Test that two pay legs should be invalid."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay"
                },
                {
                    "direction": "pay"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        directions = [readonly_trade.jmesget(f"swapLegs[{i}].direction") for i in range(2)]
        # Document that this should be invalid
        has_pay = "pay" in directions
        has_receive = "receive" in directions
        assert has_pay and not has_receive  # Invalid configuration

    def test_direction_values_are_valid(self):
        """Test that direction values are from valid set."""
        valid_directions = ["pay", "receive"]

        for direction in valid_directions:
            trade_data = {
                "swapLegs": [
                    {
                        "direction": direction
                    }
                ]
            }
            trade = Trade(trade_data)
            readonly_trade = ReadOnlyTrade(trade)

            leg_direction = readonly_trade.jmesget("swapLegs[0].direction")
            assert leg_direction in valid_directions


# ========== INTEGRATION WITH VALIDATION PIPELINE ==========

class TestBusinessRulesInPipeline:
    """Test business rules through the validation pipeline."""

    def test_valid_trade_passes_all_rules(self, validation_factory):
        """Test that a fully valid trade passes all business rules."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            },
            "swapDetails": {
                "underlying": "USD",
                "swapType": "irsOis"
            },
            "swapLegs": [
                {
                    "direction": "pay",
                    "currency": "USD",
                    "rateType": "fixed",
                    "notional": 1000,
                    "interestRate": 3.0,
                    "startDate": "2026-01-16",
                    "endDate": "2026-03-16"
                },
                {
                    "direction": "receive",
                    "currency": "USD",
                    "rateType": "floating",
                    "notional": 1000,
                    "startDate": "2026-01-16",
                    "endDate": "2026-03-16"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        pipeline = validation_factory.create_pipeline(readonly_trade)
        result = pipeline.validate(readonly_trade)

        assert result.success is True
        assert len(result.errors) == 0

    def test_invalid_date_order_detected(self, validation_factory):
        """Test that invalid date ordering is detected."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-10"  # Before trade date - invalid!
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        # Check the date order
        trade_date = datetime.strptime(readonly_trade.jmesget("common.tradeDate"), "%Y-%m-%d")
        input_date = datetime.strptime(readonly_trade.jmesget("common.inputDate"), "%Y-%m-%d")

        # Document that this is invalid
        assert input_date < trade_date


# ========== WARNING SCENARIOS ==========

class TestWarningScenarios:
    """Test scenarios that should generate warnings (not errors)."""

    def test_off_market_rate_warning(self):
        """Test that off-market rates generate warnings."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "fixed",
                    "interestRate": 25.0  # Unusually high rate
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        interest_rate = readonly_trade.jmesget("swapLegs[0].interestRate")
        # Rates above 10% might warrant a warning
        is_off_market = interest_rate > 10.0
        assert isinstance(is_off_market, bool)

    def test_long_dated_trade_warning(self):
        """Test that very long-dated trades generate warnings."""
        trade_data = {
            "swapLegs": [
                {
                    "startDate": "2026-01-16",
                    "endDate": "2056-01-16"  # 30 year swap
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        start_date = datetime.strptime(readonly_trade.jmesget("swapLegs[0].startDate"), "%Y-%m-%d")
        end_date = datetime.strptime(readonly_trade.jmesget("swapLegs[0].endDate"), "%Y-%m-%d")

        years = (end_date - start_date).days / 365.25
        is_long_dated = years > 20
        assert isinstance(is_long_dated, bool)

    def test_large_notional_warning(self):
        """Test that very large notionals generate warnings."""
        trade_data = {
            "swapLegs": [
                {
                    "notional": 1000000000  # 1 billion
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        notional = readonly_trade.jmesget("swapLegs[0].notional")
        is_large = abs(notional) > 100000000  # Over 100 million
        assert isinstance(is_large, bool)


# ========== EDGE CASES ==========

class TestBusinessRuleEdgeCases:
    """Test edge cases for business rules."""

    def test_same_day_start_and_trade_date(self):
        """Test that start date can equal trade date."""
        trade_data = {
            "common": {
                "tradeDate": "2026-01-15"
            },
            "swapLegs": [
                {
                    "startDate": "2026-01-15"  # Same day
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        trade_date = datetime.strptime(readonly_trade.jmesget("common.tradeDate"), "%Y-%m-%d")
        start_date = datetime.strptime(readonly_trade.jmesget("swapLegs[0].startDate"), "%Y-%m-%d")

        # Should be valid
        assert start_date >= trade_date

    def test_weekend_trade_date(self):
        """Test handling of weekend trade dates."""
        # 2026-01-17 is a Saturday
        trade_data = {
            "common": {
                "tradeDate": "2026-01-17"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        trade_date = datetime.strptime(readonly_trade.jmesget("common.tradeDate"), "%Y-%m-%d")
        is_weekend = trade_date.weekday() >= 5

        # Weekend dates might be flagged as warnings
        assert isinstance(is_weekend, bool)

    def test_very_small_notional(self):
        """Test handling of very small notionals."""
        trade_data = {
            "swapLegs": [
                {
                    "notional": 1  # Very small notional
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        notional = readonly_trade.jmesget("swapLegs[0].notional")
        is_very_small = abs(notional) < 100
        assert isinstance(is_very_small, bool)

<File--- tcs-poc/tcs-api/tests/test_setup.py --->
"""Basic setup tests to verify project structure."""

import pytest
from fastapi.testclient import TestClient
from trade_api.main import create_app


def test_app_creation():
    """Test that the FastAPI app can be created successfully."""
    app = create_app()
    assert app is not None
    assert app.title == "Trade API"


def test_api_endpoints_exist():
    """Test that the basic API endpoints are accessible."""
    app = create_app()
    client = TestClient(app)
    
    # Test GET /new endpoint (implemented)
    response = client.get("/api/v1/trades/new?trade_type=irswap&trade_subtype=vanilla")
    assert response.status_code == 200
    assert response.json()["success"] is True
    
    # Test POST endpoints (placeholders)
    response = client.post("/api/v1/trades/save", json={"trade_data": {}})
    assert response.status_code == 200
    
    response = client.post("/api/v1/trades/validate", json={"trade_data": {}})
    assert response.status_code == 200


def test_config_loading():
    """Test that configuration can be loaded."""
    from trade_api.config import get_settings
    
    settings = get_settings()
    assert settings is not None
    assert settings.api_title == "Trade API"

<File--- tcs-poc/tcs-api/tests/conftest.py --->
"""Pytest configuration and shared fixtures."""

import os
from hypothesis import settings, Verbosity


# Register Hypothesis profiles for different testing scenarios
settings.register_profile(
    "quick",
    max_examples=10,
    deadline=500
)

settings.register_profile(
    "thorough",
    max_examples=1000,
    deadline=2000
)

settings.register_profile(
    "debug",
    max_examples=10,
    verbosity=Verbosity.verbose
)

# Load profile from environment or default to quick
settings.load_profile(os.getenv("HYPOTHESIS_PROFILE", "quick"))

<File--- tcs-poc/tcs-api/tests/test_trade.py --->
"""Tests for Trade class."""

import pytest
from trade_api.models import Trade


def test_trade_initialization():
    """Test basic Trade initialization."""
    data = {
        "tradeId": "SWAP-20260114-IRS-0001",
        "tradeType": "InterestRateSwap",
        "version": 1
    }
    trade = Trade(data)
    
    assert trade.trade_id == "SWAP-20260114-IRS-0001"
    assert trade.trade_type == "InterestRateSwap"
    assert trade.version == 1


def test_trade_data_access():
    """Test direct data property access."""
    data = {"tradeId": "TEST-001", "tradeType": "TestType"}
    trade = Trade(data)
    
    assert trade.data == data
    assert trade.data is trade._data  # Direct reference


def test_trade_get_simple_property():
    """Test getting simple properties."""
    data = {
        "tradeId": "SWAP-001",
        "tradeType": "InterestRateSwap",
        "notional": 1000000
    }
    trade = Trade(data)
    
    assert trade.get("tradeId") == "SWAP-001"
    assert trade.get("tradeType") == "InterestRateSwap"
    assert trade.get("notional") == 1000000


def test_trade_get_nested_property():
    """Test getting nested properties with dot notation."""
    data = {
        "tradeId": "SWAP-001",
        "specific": {
            "rateFamily": "VanillaIRS",
            "compounding": "None"
        },
        "legs": [
            {"legId": "FIXED", "legType": "Fixed"},
            {"legId": "FLOAT", "legType": "Floating"}
        ]
    }
    trade = Trade(data)
    
    assert trade.get("specific.rateFamily") == "VanillaIRS"
    assert trade.get("specific.compounding") == "None"
    assert trade.get("legs.0.legId") == "FIXED"
    assert trade.get("legs.1.legType") == "Floating"


def test_trade_get_with_default():
    """Test getting properties with default values."""
    data = {"tradeId": "SWAP-001"}
    trade = Trade(data)
    
    assert trade.get("nonexistent") is None
    assert trade.get("nonexistent", "default") == "default"
    assert trade.get("nested.property", 42) == 42


def test_trade_set_simple_property():
    """Test setting simple properties."""
    data = {"tradeId": "SWAP-001"}
    trade = Trade(data)
    
    trade.set("tradeType", "InterestRateSwap")
    assert trade.get("tradeType") == "InterestRateSwap"
    assert trade.data["tradeType"] == "InterestRateSwap"


def test_trade_set_nested_property():
    """Test setting nested properties with dot notation."""
    data = {"tradeId": "SWAP-001"}
    trade = Trade(data)
    
    trade.set("specific.rateFamily", "VanillaIRS")
    assert trade.get("specific.rateFamily") == "VanillaIRS"
    assert "specific" in trade.data
    assert trade.data["specific"]["rateFamily"] == "VanillaIRS"


def test_trade_set_list_property():
    """Test setting properties in existing lists."""
    data = {
        "tradeId": "SWAP-001",
        "legs": [
            {"legId": "FIXED"},
            {"legId": "FLOAT"}
        ]
    }
    trade = Trade(data)
    
    trade.set("legs.0.legType", "Fixed")
    assert trade.get("legs.0.legType") == "Fixed"


def test_trade_equality():
    """Test Trade equality comparison."""
    data1 = {"tradeId": "SWAP-001", "tradeType": "IRS"}
    data2 = {"tradeId": "SWAP-001", "tradeType": "IRS"}
    data3 = {"tradeId": "SWAP-002", "tradeType": "IRS"}
    
    trade1 = Trade(data1)
    trade2 = Trade(data2)
    trade3 = Trade(data3)
    
    assert trade1 == trade2
    assert trade1 != trade3


def test_trade_repr():
    """Test Trade string representation."""
    data = {"tradeId": "SWAP-001", "tradeType": "InterestRateSwap"}
    trade = Trade(data)
    
    repr_str = repr(trade)
    assert "SWAP-001" in repr_str
    assert "InterestRateSwap" in repr_str


def test_trade_preserves_json_flexibility():
    """Test that Trade preserves arbitrary JSON structures."""
    # Complex nested structure with various types
    data = {
        "tradeId": "SWAP-001",
        "customField": "custom_value",
        "nested": {
            "deep": {
                "property": "value"
            }
        },
        "array": [1, 2, 3],
        "mixed": {
            "numbers": [10, 20],
            "strings": ["a", "b"]
        }
    }
    trade = Trade(data)
    
    # All properties should be accessible
    assert trade.get("customField") == "custom_value"
    assert trade.get("nested.deep.property") == "value"
    assert trade.get("array.0") == 1
    assert trade.get("mixed.numbers.1") == 20
    
    # Original structure preserved
    assert trade.data == data

<File--- tcs-poc/tcs-api/tests/performance_test.py --->
"""Performance testing for /new and /validate endpoints.

This script measures endpoint performance after a warm-up period to account for:
- FastAPI startup overhead
- Template loading and caching
- Validation factory initialization
- First-time JIT compilation
"""

import requests
import time
import json
import statistics
from pathlib import Path
from typing import List, Dict, Any


BASE_URL = "http://localhost:8000/api/v1/trades"
WARMUP_REQUESTS = 50  # Number of requests to warm up the system
TEST_REQUESTS = 1000  # Number of requests for actual measurement


def load_test_trade_data() -> Dict[str, Any]:
    """Load IR swap test data for /validate endpoint."""
    test_file = Path(__file__).parent.parent.parent / "json-examples" / "polar" / "ir-swap-presave-flattened.json"
    with open(test_file, 'r') as f:
        return json.load(f)


def test_new_endpoint_warmup(num_requests: int) -> None:
    """Warm up the /new endpoint."""
    print(f"Warming up /new endpoint with {num_requests} requests...")
    for _ in range(num_requests):
        requests.get(f"{BASE_URL}/new", params={"trade_type": "ir-swap"})
    print(" /new endpoint warmed up")


def test_validate_endpoint_warmup(num_requests: int, trade_data: Dict[str, Any]) -> None:
    """Warm up the /validate endpoint."""
    print(f"Warming up /validate endpoint with {num_requests} requests...")
    for _ in range(num_requests):
        requests.post(f"{BASE_URL}/validate", json={"trade_data": trade_data})
    print(" /validate endpoint warmed up")


def measure_new_endpoint_performance(num_requests: int) -> List[float]:
    """Measure /new endpoint performance after warm-up.

    Returns:
        List of response times in milliseconds
    """
    print(f"\nMeasuring /new endpoint performance ({num_requests} requests)...")
    response_times = []

    for i in range(num_requests):
        start_time = time.perf_counter()
        response = requests.get(f"{BASE_URL}/new", params={"trade_type": "ir-swap"})
        end_time = time.perf_counter()

        if response.status_code == 200:
            response_times.append((end_time - start_time) * 1000)  # Convert to ms

        if (i + 1) % 100 == 0:
            print(f"  Progress: {i + 1}/{num_requests}")

    return response_times


def measure_validate_endpoint_performance(num_requests: int, trade_data: Dict[str, Any]) -> List[float]:
    """Measure /validate endpoint performance after warm-up.

    Returns:
        List of response times in milliseconds
    """
    print(f"\nMeasuring /validate endpoint performance ({num_requests} requests)...")
    response_times = []

    for i in range(num_requests):
        start_time = time.perf_counter()
        response = requests.post(f"{BASE_URL}/validate", json={"trade_data": trade_data})
        end_time = time.perf_counter()

        if response.status_code == 200:
            response_times.append((end_time - start_time) * 1000)  # Convert to ms

        if (i + 1) % 100 == 0:
            print(f"  Progress: {i + 1}/{num_requests}")

    return response_times


def calculate_statistics(response_times: List[float]) -> Dict[str, float]:
    """Calculate performance statistics from response times."""
    return {
        "min": min(response_times),
        "max": max(response_times),
        "mean": statistics.mean(response_times),
        "median": statistics.median(response_times),
        "p95": statistics.quantiles(response_times, n=20)[18],  # 95th percentile
        "p99": statistics.quantiles(response_times, n=100)[98],  # 99th percentile
        "stdev": statistics.stdev(response_times) if len(response_times) > 1 else 0,
    }


def print_performance_report(endpoint: str, stats: Dict[str, float], num_requests: int) -> None:
    """Print formatted performance report."""
    print(f"\n{'='*60}")
    print(f"Performance Report: {endpoint}")
    print(f"{'='*60}")
    print(f"Total Requests: {num_requests}")
    print(f"Min:            {stats['min']:>8.2f} ms")
    print(f"Max:            {stats['max']:>8.2f} ms")
    print(f"Mean:           {stats['mean']:>8.2f} ms")
    print(f"Median:         {stats['median']:>8.2f} ms")
    print(f"95th %ile:      {stats['p95']:>8.2f} ms")
    print(f"99th %ile:      {stats['p99']:>8.2f} ms")
    print(f"Std Dev:        {stats['stdev']:>8.2f} ms")
    print(f"\nThroughput:     {1000 / stats['mean']:>8.2f} req/sec (based on mean)")
    print(f"{'='*60}\n")


def main():
    """Run performance tests."""
    print("="*60)
    print("API Endpoint Performance Testing")
    print("="*60)
    print(f"Base URL: {BASE_URL}")
    print(f"Warm-up requests: {WARMUP_REQUESTS}")
    print(f"Test requests: {TEST_REQUESTS}")
    print("="*60)

    # Load test data
    trade_data = load_test_trade_data()

    # Phase 1: Warm-up
    print("\n[Phase 1: Warm-up]")
    test_new_endpoint_warmup(WARMUP_REQUESTS)
    test_validate_endpoint_warmup(WARMUP_REQUESTS, trade_data)

    # Phase 2: Performance measurement
    print("\n[Phase 2: Performance Measurement]")

    # Test /new endpoint
    new_response_times = measure_new_endpoint_performance(TEST_REQUESTS)
    new_stats = calculate_statistics(new_response_times)
    print_performance_report("GET /api/v1/trades/new", new_stats, TEST_REQUESTS)

    # Test /validate endpoint
    validate_response_times = measure_validate_endpoint_performance(TEST_REQUESTS, trade_data)
    validate_stats = calculate_statistics(validate_response_times)
    print_performance_report("POST /api/v1/trades/validate", validate_stats, TEST_REQUESTS)

    # Comparison
    print("="*60)
    print("Performance Comparison")
    print("="*60)
    print(f"/new is {validate_stats['mean'] / new_stats['mean']:.2f}x {'faster' if new_stats['mean'] < validate_stats['mean'] else 'slower'} than /validate")
    print(f"  /new mean:      {new_stats['mean']:.2f} ms")
    print(f"  /validate mean: {validate_stats['mean']:.2f} ms")
    print("="*60)


if __name__ == "__main__":
    main()

<File--- tcs-poc/tcs-api/tests/test_validation_examples.py --->
"""Tests for validating JSON example files.

This module loads and validates all JSON example files from the json-examples directory.
It ensures that real-world trade structures pass validation and documents any issues.
"""

import pytest
import json
from pathlib import Path
from typing import List, Tuple

from trade_api.models.trade import Trade, ReadOnlyTrade
from trade_api.validation import ValidationFactory


# ========== TEST DATA DISCOVERY ==========

def discover_json_examples() -> List[Tuple[str, Path]]:
    """Discover all JSON example files in the json-examples directory.

    Returns:
        List of tuples (test_id, file_path) for parameterization
    """
    # Find json-examples directory
    test_dir = Path(__file__).resolve().parent
    project_root = test_dir.parent.parent
    json_examples_dir = project_root / "json-examples"

    if not json_examples_dir.exists():
        return []

    examples = []

    # Find all JSON files
    for json_file in json_examples_dir.rglob("*.json"):
        # Create a readable test ID from the file path
        relative_path = json_file.relative_to(json_examples_dir)
        test_id = str(relative_path).replace("/", "_").replace(".json", "")
        examples.append((test_id, json_file))

    return examples


# Discover examples at module load time
JSON_EXAMPLES = discover_json_examples()


# ========== FIXTURES ==========

@pytest.fixture
def validation_factory():
    """Create a ValidationFactory for testing."""
    return ValidationFactory()


# ========== JSON EXAMPLE TESTS ==========

class TestIRSwapExamples:
    """Test validation of IR swap JSON examples."""

    @pytest.mark.parametrize("test_id,file_path",
                            [(tid, fp) for tid, fp in JSON_EXAMPLES if "irswap" in str(fp) or "ir-swap" in str(fp)])
    def test_ir_swap_examples_validate(self, test_id, file_path, validation_factory):
        """Test that IR swap examples pass validation."""
        # Load JSON file
        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        # Create trade and validate
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        # Create validation pipeline
        pipeline = validation_factory.create_pipeline(readonly_trade)
        result = pipeline.validate(readonly_trade)

        # Assert validation passes
        if not result.success:
            pytest.fail(
                f"Validation failed for {test_id}:\n"
                f"Errors: {result.errors}\n"
                f"Warnings: {result.warnings}\n"
                f"File: {file_path}"
            )

        assert result.success is True
        assert isinstance(result.errors, list)
        assert isinstance(result.warnings, list)


class TestPolarSystemExamples:
    """Test validation of Polar system lifecycle examples."""

    @pytest.mark.parametrize("test_id,file_path",
                            [(tid, fp) for tid, fp in JSON_EXAMPLES if "polar" in str(fp)])
    def test_polar_examples_structure(self, test_id, file_path):
        """Test that Polar examples have valid JSON structure."""
        # Load JSON file
        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        # Verify basic structure
        assert isinstance(trade_data, dict), f"Expected dict, got {type(trade_data)}"

        # Check for expected top-level keys based on trade type
        if "ir-swap" in test_id:
            assert "swapDetails" in trade_data or "general" in trade_data, \
                f"IR swap should have swapDetails or general: {file_path}"
        elif "commodity-option" in test_id:
            assert "commodityDetails" in trade_data or "general" in trade_data, \
                f"Commodity option should have commodityDetails or general: {file_path}"
        elif "index-swap" in test_id:
            assert "leg" in trade_data or "general" in trade_data, \
                f"Index swap should have leg or general: {file_path}"

    def test_ir_swap_presave_flattened_comprehensive(self, validation_factory):
        """Comprehensive test of the UI payload (ir-swap-presave-flattened.json)."""
        # This is the key file analyzed in the plan
        test_dir = Path(__file__).resolve().parent
        project_root = test_dir.parent.parent
        file_path = project_root / "json-examples" / "polar" / "ir-swap-presave-flattened.json"

        if not file_path.exists():
            pytest.skip(f"File not found: {file_path}")

        # Load JSON
        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        # Create trade
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        # Test core fields are present
        assert readonly_trade.jmesget("general.transactionRoles.priceMaker") == "kbagci"
        assert readonly_trade.jmesget("common.book") == "MEWEST01HS"
        assert readonly_trade.jmesget("common.counterparty") == "02519916"
        assert readonly_trade.jmesget("common.tradeDate") == "2026-01-15"

        # Test swap details
        assert readonly_trade.jmesget("swapDetails.underlying") == "USD"
        assert readonly_trade.jmesget("swapDetails.swapType") == "irsOis"
        assert readonly_trade.jmesget("swapDetails.settlementType") == "physical"

        # Test swap legs structure
        legs = readonly_trade.jmesget("swapLegs")
        assert legs is not None
        assert len(legs) == 2

        # Test leg 0 (pay leg)
        assert readonly_trade.jmesget("swapLegs[0].direction") == "pay"
        assert readonly_trade.jmesget("swapLegs[0].currency") == "USD"
        assert readonly_trade.jmesget("swapLegs[0].rateType") == "fixed"

        # Test leg 1 (receive leg)
        assert readonly_trade.jmesget("swapLegs[1].direction") == "receive"
        assert readonly_trade.jmesget("swapLegs[1].currency") == "USD"

        # Test schedules exist
        leg0_schedule = readonly_trade.jmesget("swapLegs[0].schedule")
        leg1_schedule = readonly_trade.jmesget("swapLegs[1].schedule")
        assert leg0_schedule is not None
        assert leg1_schedule is not None
        assert len(leg0_schedule) > 0
        assert len(leg1_schedule) > 0

        # Validate through pipeline
        pipeline = validation_factory.create_pipeline(readonly_trade)
        result = pipeline.validate(readonly_trade)

        # Should pass validation (or document why it doesn't)
        if not result.success:
            # Document failures for analysis
            print(f"Validation errors: {result.errors}")
            print(f"Validation warnings: {result.warnings}")


class TestOtherTradeTypes:
    """Test validation of other trade type examples."""

    @pytest.mark.parametrize("test_id,file_path",
                            [(tid, fp) for tid, fp in JSON_EXAMPLES
                             if "basis-swap" in str(fp) or "oi-swap" in str(fp) or "xcur-swap" in str(fp)])
    def test_other_trade_types_structure(self, test_id, file_path):
        """Test that other trade type examples have valid structure."""
        # Load JSON file
        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        # Verify basic structure
        assert isinstance(trade_data, dict), f"Expected dict, got {type(trade_data)}"

        # All trades should have either general or common sections
        # (or be trade-specific sections)
        assert len(trade_data) > 0, f"Empty trade data: {file_path}"


# ========== MULTI-CURRENCY TESTS ==========

class TestMultiCurrencySwaps:
    """Test validation of multi-currency IR swap examples."""

    def test_usd_swap_validation(self, validation_factory):
        """Test USD vanilla IRS validation."""
        test_dir = Path(__file__).resolve().parent
        project_root = test_dir.parent.parent
        file_path = project_root / "json-examples" / "irswap" / "usd-vanilla-irs.json"

        if not file_path.exists():
            pytest.skip(f"File not found: {file_path}")

        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        pipeline = validation_factory.create_pipeline(readonly_trade)
        result = pipeline.validate(readonly_trade)

        if not result.success:
            print(f"USD swap validation errors: {result.errors}")

    def test_eur_swap_validation(self, validation_factory):
        """Test EUR vanilla IRS validation."""
        test_dir = Path(__file__).resolve().parent
        project_root = test_dir.parent.parent
        file_path = project_root / "json-examples" / "irswap" / "eur-vanilla-irs.json"

        if not file_path.exists():
            pytest.skip(f"File not found: {file_path}")

        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        pipeline = validation_factory.create_pipeline(readonly_trade)
        result = pipeline.validate(readonly_trade)

        if not result.success:
            print(f"EUR swap validation errors: {result.errors}")

    def test_gbp_swap_validation(self, validation_factory):
        """Test GBP vanilla IRS validation."""
        test_dir = Path(__file__).resolve().parent
        project_root = test_dir.parent.parent
        file_path = project_root / "json-examples" / "irswap" / "gbp-vanilla-irs.json"

        if not file_path.exists():
            pytest.skip(f"File not found: {file_path}")

        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        pipeline = validation_factory.create_pipeline(readonly_trade)
        result = pipeline.validate(readonly_trade)

        if not result.success:
            print(f"GBP swap validation errors: {result.errors}")


# ========== EXOTIC SWAP TESTS ==========

class TestExoticSwapVariants:
    """Test validation of exotic swap variants."""

    @pytest.mark.parametrize("swap_type,filename", [
        ("basis_swap", "basis-swap.json"),
        ("ois", "ois.json"),
        ("amortizing", "amortizing-irs.json"),
        ("forward_starting", "forward-starting-irs.json"),
        ("zero_coupon", "zero-coupon-swap.json"),
        ("cpi", "cpi-swap.json"),
        ("yoy_inflation", "year-on-year-inflation-swap.json"),
        ("nonstandard", "nonstandard-irs.json"),
        ("digital_cms", "digital-cms-spread-swap.json")
    ])
    def test_exotic_swap_structure(self, swap_type, filename):
        """Test that exotic swap examples have valid structure."""
        test_dir = Path(__file__).resolve().parent
        project_root = test_dir.parent.parent
        file_path = project_root / "json-examples" / "irswap" / filename

        if not file_path.exists():
            pytest.skip(f"File not found: {file_path}")

        # Load and verify structure
        with open(file_path, 'r') as f:
            trade_data = json.load(f)

        assert isinstance(trade_data, dict), f"Expected dict for {swap_type}"

        # Create trade to test object creation
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        # Verify it's a swap
        swap_details = readonly_trade.jmesget("swapDetails")
        swap_legs = readonly_trade.jmesget("swapLegs")

        # At minimum, should have some swap-related fields
        assert swap_details is not None or swap_legs is not None, \
            f"{swap_type} should have swapDetails or swapLegs"


# ========== SUMMARY STATISTICS ==========

class TestExampleCoverage:
    """Test to document the coverage of JSON examples."""

    def test_document_example_count(self):
        """Document how many example files are being tested."""
        ir_swap_count = len([fp for _, fp in JSON_EXAMPLES if "irswap" in str(fp) or "ir-swap" in str(fp)])
        polar_count = len([fp for _, fp in JSON_EXAMPLES if "polar" in str(fp)])
        other_count = len(JSON_EXAMPLES) - ir_swap_count - polar_count

        print(f"\n=== JSON Example Coverage ===")
        print(f"Total examples: {len(JSON_EXAMPLES)}")
        print(f"IR Swap examples: {ir_swap_count}")
        print(f"Polar lifecycle examples: {polar_count}")
        print(f"Other examples: {other_count}")
        print(f"=============================\n")

        # Ensure we have examples to test
        assert len(JSON_EXAMPLES) > 0, "No JSON examples found"

    def test_document_example_paths(self):
        """Document all example file paths for reference."""
        print(f"\n=== All JSON Example Files ===")
        for test_id, file_path in sorted(JSON_EXAMPLES):
            print(f"{test_id}: {file_path}")
        print(f"==============================\n")

<File--- tcs-poc/tcs-api/tests/test_trade_service.py --->
"""Tests for the TradeService layer."""

import pytest
from unittest.mock import Mock, MagicMock
from pathlib import Path

from trade_api.services import TradeService
from trade_api.models import TradeTemplateFactory, Trade
from trade_api.validation import ValidationFactory


@pytest.fixture
def template_factory():
    """Create a real TradeTemplateFactory for testing."""
    # Find the templates directory
    test_dir = Path(__file__).resolve().parent
    project_root = test_dir.parent
    template_dir = project_root / "templates"

    return TradeTemplateFactory(template_dir=str(template_dir), schema_version="v1")


@pytest.fixture
def validation_factory():
    """Create a real ValidationFactory for testing."""
    return ValidationFactory()


@pytest.fixture
def trade_service(template_factory, validation_factory):
    """Create a TradeService instance with real factories."""
    return TradeService(template_factory, validation_factory)


def test_create_new_trade_success(trade_service):
    """Test creating a new trade successfully."""
    result = trade_service.create_new_trade("ir-swap")

    assert result.success is True
    assert result.trade_data is not None
    assert result.metadata is not None
    assert "trade_id" in result.metadata
    assert "trade_type" in result.metadata
    assert "documentId" in result.metadata
    assert "correlationId" in result.metadata
    assert result.metadata["trade_type"] == "ir-swap"
    assert len(result.errors) == 0


def test_create_new_trade_invalid_type(trade_service):
    """Test creating a trade with invalid trade type."""
    result = trade_service.create_new_trade("invalid-type")

    assert result.success is False
    assert result.trade_data is None
    assert len(result.errors) > 0


def test_validate_trade_success(trade_service):
    """Test validating a trade successfully."""
    # First create a trade to validate
    create_result = trade_service.create_new_trade("ir-swap")
    assert create_result.success is True

    # Now validate it
    validate_result = trade_service.validate_trade(create_result.trade_data)

    assert validate_result is not None
    assert isinstance(validate_result.success, bool)
    assert isinstance(validate_result.errors, list)
    assert isinstance(validate_result.warnings, list)
    assert validate_result.metadata is not None
    assert "documentId" in validate_result.metadata
    assert "correlationId" in validate_result.metadata


def test_validate_trade_invalid_data(trade_service):
    """Test validating invalid trade data."""
    invalid_data = {"invalid": "data"}

    result = trade_service.validate_trade(invalid_data)

    assert result.success is False
    assert len(result.errors) > 0


def test_save_trade_placeholder(trade_service):
    """Test save trade placeholder implementation."""
    trade_data = {"test": "data"}

    result = trade_service.save_trade(trade_data)

    assert result.success is True
    assert result.trade_data is not None
    assert len(result.warnings) > 0
    assert "Placeholder" in result.warnings[0]


def test_trade_service_dependency_injection():
    """Test that TradeService can be instantiated with dependencies."""
    mock_template_factory = Mock()
    mock_validation_factory = Mock()

    service = TradeService(mock_template_factory, mock_validation_factory)

    assert service.template_factory == mock_template_factory
    assert service.validation_factory == mock_validation_factory


# ========== ADDITIONAL VALIDATION SCENARIOS ==========

def test_validate_trade_with_complete_ir_swap(trade_service):
    """Test validating a complete IR swap with all required fields."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD",
            "swapType": "irsOis"
        },
        "swapLegs": [
            {
                "direction": "pay",
                "currency": "USD",
                "rateType": "fixed"
            },
            {
                "direction": "receive",
                "currency": "USD",
                "rateType": "floating"
            }
        ]
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is True
    assert len(result.errors) == 0
    assert result.metadata is not None
    assert result.metadata.get("trade_type") == "ir-swap"
    assert "documentId" in result.metadata
    assert "correlationId" in result.metadata


def test_validate_trade_missing_core_fields(trade_service):
    """Test validation fails when core required fields are missing."""
    trade_data = {
        "general": {},
        "common": {
            "book": "BOOK-001"
            # Missing tradeDate, counterparty, inputDate
        },
        "swapDetails": {
            "underlying": "USD"
        }
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    assert len(result.errors) > 0
    # Should have errors for missing tradeId, tradeDate, counterparty, inputDate
    assert any("tradeId" in error for error in result.errors)
    assert any("tradeDate" in error for error in result.errors)


def test_validate_trade_missing_swap_details(trade_service):
    """Test validation fails when IR swap is missing swapDetails."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapLegs": [
            {
                "direction": "pay",
                "currency": "USD"
            }
        ]
        # Missing swapDetails
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    assert any("swapDetails" in error for error in result.errors)


def test_validate_trade_missing_swap_legs(trade_service):
    """Test validation fails when IR swap is missing swapLegs."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        }
        # Missing swapLegs
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    assert any("swapLegs" in error for error in result.errors)


def test_validate_trade_empty_swap_legs(trade_service):
    """Test validation fails when swapLegs array is empty."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": []  # Empty array
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    assert any("at least one leg" in error for error in result.errors)


def test_validate_trade_leg_missing_direction(trade_service):
    """Test validation fails when swap leg is missing direction."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": [
            {
                "currency": "USD"
                # Missing direction
            }
        ]
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    assert any("direction" in error for error in result.errors)


def test_validate_trade_leg_missing_currency(trade_service):
    """Test validation fails when swap leg is missing currency."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": [
            {
                "direction": "pay"
                # Missing currency
            }
        ]
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    assert any("currency" in error for error in result.errors)


def test_validate_trade_invalid_date_format(trade_service):
    """Test validation fails with invalid date format."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "15-01-2026",  # Wrong format
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        }
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    assert any("Invalid tradeDate format" in error or "tradeDate" in error for error in result.errors)


def test_validate_multiple_trade_types(trade_service):
    """Test validation works for different trade types."""
    # Test commodity option
    commodity_data = {
        "general": {
            "tradeId": "TRADE-002"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "commodityDetails": {
            "commodity": "Gold"
        }
    }

    result = trade_service.validate_trade(commodity_data)

    # Should pass structural validation
    assert result.success is True or len(result.errors) < 5  # May have some validation errors


def test_validate_trade_with_warnings(trade_service):
    """Test that validation can return warnings without errors."""
    # Create a valid trade that might generate warnings
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": [
            {
                "direction": "pay",
                "currency": "USD"
            }
        ]
    }

    result = trade_service.validate_trade(trade_data)

    # Verify warnings list exists
    assert isinstance(result.warnings, list)


def test_validate_trade_null_values(trade_service):
    """Test validation handles null values appropriately."""
    trade_data = {
        "general": {
            "tradeId": None
        },
        "common": {
            "book": None,
            "tradeDate": None,
            "counterparty": None,
            "inputDate": None
        },
        "swapDetails": {
            "underlying": "USD"
        }
    }

    result = trade_service.validate_trade(trade_data)

    assert result.success is False
    # Should report multiple missing/invalid fields
    assert len(result.errors) >= 4


def test_validate_trade_metadata_includes_trade_type(trade_service):
    """Test that validation result metadata includes trade type."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": [
            {
                "direction": "pay",
                "currency": "USD"
            }
        ]
    }

    result = trade_service.validate_trade(trade_data)

    assert result.metadata is not None
    assert "trade_type" in result.metadata
    assert "documentId" in result.metadata
    assert "correlationId" in result.metadata


def test_create_and_validate_workflow(trade_service):
    """Test complete workflow: create a trade, then validate it."""
    # Step 1: Create a new trade
    create_result = trade_service.create_new_trade("ir-swap")
    assert create_result.success is True

    # Step 2: Validate the created trade
    validate_result = trade_service.validate_trade(create_result.trade_data)

    # The newly created trade should pass validation
    # (or have documented validation errors if template is incomplete)
    assert validate_result is not None
    assert isinstance(validate_result.success, bool)
    assert isinstance(validate_result.errors, list)
    assert isinstance(validate_result.warnings, list)


def test_validate_trade_with_provided_metadata(trade_service):
    """Test validation with provided documentId and correlationId."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": [
            {
                "direction": "pay",
                "currency": "USD"
            }
        ]
    }

    # Provide specific metadata
    metadata = {
        "documentId": "12345678-1234-1234-1234-123456789012",
        "correlationId": "87654321-4321-4321-4321-210987654321"
    }

    result = trade_service.validate_trade(trade_data, metadata=metadata)

    assert result.metadata is not None
    assert result.metadata["documentId"] == "12345678-1234-1234-1234-123456789012"
    assert result.metadata["correlationId"] == "87654321-4321-4321-4321-210987654321"


def test_validate_trade_generates_document_id_if_missing(trade_service):
    """Test validation generates documentId if not provided."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": [
            {
                "direction": "pay",
                "currency": "USD"
            }
        ]
    }

    # Don't provide metadata
    result = trade_service.validate_trade(trade_data)

    assert result.metadata is not None
    assert "documentId" in result.metadata
    assert "correlationId" in result.metadata
    # Both should be valid UUIDs (36 characters with hyphens)
    assert len(result.metadata["documentId"]) == 36
    assert len(result.metadata["correlationId"]) == 36


def test_validate_trade_with_partial_metadata(trade_service):
    """Test validation with only correlationId provided."""
    trade_data = {
        "general": {
            "tradeId": "TRADE-001"
        },
        "common": {
            "book": "BOOK-001",
            "tradeDate": "2026-01-15",
            "counterparty": "CP-001",
            "inputDate": "2026-01-15"
        },
        "swapDetails": {
            "underlying": "USD"
        },
        "swapLegs": [
            {
                "direction": "pay",
                "currency": "USD"
            }
        ]
    }

    # Provide only correlationId
    metadata = {
        "correlationId": "87654321-4321-4321-4321-210987654321"
    }

    result = trade_service.validate_trade(trade_data, metadata=metadata)

    assert result.metadata is not None
    # documentId should be generated
    assert "documentId" in result.metadata
    assert len(result.metadata["documentId"]) == 36
    # correlationId should be the one provided
    assert result.metadata["correlationId"] == "87654321-4321-4321-4321-210987654321"

<File--- tcs-poc/tcs-api/tests/health_performance_test.py --->
"""Performance testing for health check endpoints."""

import requests
import time
import statistics
from typing import List, Dict

BASE_URL = "http://localhost:8000"
WARMUP_REQUESTS = 20
TEST_REQUESTS = 500


def measure_endpoint_performance(endpoint: str, num_requests: int) -> List[float]:
    """Measure endpoint performance.

    Returns:
        List of response times in milliseconds
    """
    response_times = []

    for _ in range(num_requests):
        start_time = time.perf_counter()
        response = requests.get(f"{BASE_URL}{endpoint}")
        end_time = time.perf_counter()

        if response.status_code == 200:
            response_times.append((end_time - start_time) * 1000)

    return response_times


def calculate_statistics(response_times: List[float]) -> Dict[str, float]:
    """Calculate performance statistics."""
    return {
        "min": min(response_times),
        "max": max(response_times),
        "mean": statistics.mean(response_times),
        "median": statistics.median(response_times),
        "p95": statistics.quantiles(response_times, n=20)[18],
        "p99": statistics.quantiles(response_times, n=100)[98],
    }


def main():
    """Run health endpoint performance tests."""
    print("="*60)
    print("Health Endpoint Performance Testing")
    print("="*60)

    endpoints = ["/health", "/health/live", "/health/ready"]

    for endpoint in endpoints:
        # Warmup
        print(f"\nWarming up {endpoint}...")
        measure_endpoint_performance(endpoint, WARMUP_REQUESTS)

        # Test
        print(f"Testing {endpoint} ({TEST_REQUESTS} requests)...")
        times = measure_endpoint_performance(endpoint, TEST_REQUESTS)
        stats = calculate_statistics(times)

        print(f"\nResults for {endpoint}:")
        print(f"  Min:       {stats['min']:>6.2f} ms")
        print(f"  Max:       {stats['max']:>6.2f} ms")
        print(f"  Mean:      {stats['mean']:>6.2f} ms")
        print(f"  Median:    {stats['median']:>6.2f} ms")
        print(f"  95th:      {stats['p95']:>6.2f} ms")
        print(f"  99th:      {stats['p99']:>6.2f} ms")
        print(f"  Throughput: {1000/stats['mean']:>6.0f} req/sec")

    print("\n" + "="*60)


if __name__ == "__main__":
    main()

<File--- tcs-poc/tcs-api/tests/__init__.py --->
"""Test package for Trade API."""

<File--- tcs-poc/tcs-api/tests/test_schedule_validation.py --->
"""Tests for schedule validation logic.

This module tests validation of UI-generated cashflow schedules.
It covers schedule structure, period continuity, payment date calculations,
and interest calculations for IR swaps.
"""

import pytest
from datetime import datetime, timedelta
from decimal import Decimal

from trade_api.models.trade import Trade, ReadOnlyTrade


# ========== SCHEDULE STRUCTURE TESTS ==========

class TestScheduleStructure:
    """Test basic schedule structure validation."""

    def test_schedule_exists_on_swap_legs(self):
        """Test that schedules exist on swap legs."""
        trade_data = {
            "swapLegs": [
                {
                    "legIndex": 0,
                    "direction": "pay",
                    "currency": "USD",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        schedule = readonly_trade.jmesget("swapLegs[0].schedule")
        assert schedule is not None
        assert len(schedule) == 1

    def test_schedule_has_required_fields(self):
        """Test that schedule periods have required fields."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "paymentDate": "2026-02-19"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")
        assert period["periodIndex"] == 0
        assert "startDate" in period
        assert "endDate" in period
        assert "paymentDate" in period

    def test_fixed_leg_schedule_structure(self):
        """Test fixed leg schedule has rate and interest fields."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "fixed",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "paymentDate": "2026-02-19",
                            "rate": 3.0,
                            "notional": -1000,
                            "interest": -2.67
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")
        assert "rate" in period
        assert "notional" in period
        assert "interest" in period
        assert period["rate"] == 3.0
        assert period["interest"] == -2.67

    def test_floating_leg_schedule_structure(self):
        """Test floating leg schedule has index and tenor fields."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "floating",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "ratesetDate": "2026-02-17",
                            "paymentDate": "2026-02-19",
                            "notional": 1000,
                            "margin": 0,
                            "index": "SOFR",
                            "tenor": "1D"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")
        assert "index" in period
        assert "tenor" in period
        assert "ratesetDate" in period
        assert period["index"] == "SOFR"
        assert period["tenor"] == "1D"


# ========== PERIOD CONTINUITY TESTS ==========

class TestPeriodContinuity:
    """Test that schedule periods are continuous and properly ordered."""

    def test_periods_are_ordered(self):
        """Test that period indices are sequential."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {"periodIndex": 0, "startDate": "2026-01-16", "endDate": "2026-02-17"},
                        {"periodIndex": 1, "startDate": "2026-02-17", "endDate": "2026-03-16"}
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        schedule = readonly_trade.jmesget("swapLegs[0].schedule")
        assert schedule[0]["periodIndex"] == 0
        assert schedule[1]["periodIndex"] == 1

    def test_periods_are_contiguous(self):
        """Test that end date of period N equals start date of period N+1."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {"periodIndex": 0, "startDate": "2026-01-16", "endDate": "2026-02-17"},
                        {"periodIndex": 1, "startDate": "2026-02-17", "endDate": "2026-03-16"}
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        schedule = readonly_trade.jmesget("swapLegs[0].schedule")
        # Period 0 end date should equal period 1 start date
        assert schedule[0]["endDate"] == schedule[1]["startDate"]

    def test_detect_gap_in_periods(self):
        """Test detection of gaps between periods."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {"periodIndex": 0, "startDate": "2026-01-16", "endDate": "2026-02-17"},
                        {"periodIndex": 1, "startDate": "2026-02-20", "endDate": "2026-03-16"}  # Gap!
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        schedule = readonly_trade.jmesget("swapLegs[0].schedule")
        # There's a 3-day gap
        period0_end = schedule[0]["endDate"]
        period1_start = schedule[1]["startDate"]
        assert period0_end != period1_start  # Gap detected

    def test_dates_are_chronological(self):
        """Test that start date < end date for each period."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {"periodIndex": 0, "startDate": "2026-01-16", "endDate": "2026-02-17"}
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")
        start = datetime.strptime(period["startDate"], "%Y-%m-%d")
        end = datetime.strptime(period["endDate"], "%Y-%m-%d")
        assert start < end


# ========== PAYMENT DATE VALIDATION ==========

class TestPaymentDates:
    """Test payment date calculation and validation."""

    def test_payment_date_follows_end_date(self):
        """Test that payment date is on or after end date."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "paymentDate": "2026-02-19"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")
        end_date = datetime.strptime(period["endDate"], "%Y-%m-%d")
        payment_date = datetime.strptime(period["paymentDate"], "%Y-%m-%d")
        assert payment_date >= end_date

    def test_payment_date_settlement_offset(self):
        """Test typical T+2 settlement offset for payment dates."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "paymentDate": "2026-02-19"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")
        end_date = datetime.strptime(period["endDate"], "%Y-%m-%d")
        payment_date = datetime.strptime(period["paymentDate"], "%Y-%m-%d")

        # Payment is typically 2 business days after end date
        # This is a simplified check (doesn't account for holidays)
        days_diff = (payment_date - end_date).days
        assert 0 <= days_diff <= 5  # Reasonable settlement window

    def test_multiple_periods_payment_dates(self):
        """Test payment dates across multiple periods."""
        trade_data = {
            "swapLegs": [
                {
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "paymentDate": "2026-02-19"
                        },
                        {
                            "periodIndex": 1,
                            "startDate": "2026-02-17",
                            "endDate": "2026-03-16",
                            "paymentDate": "2026-03-18"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        schedule = readonly_trade.jmesget("swapLegs[0].schedule")
        for period in schedule:
            end_date = datetime.strptime(period["endDate"], "%Y-%m-%d")
            payment_date = datetime.strptime(period["paymentDate"], "%Y-%m-%d")
            assert payment_date >= end_date


# ========== INTEREST CALCULATION VALIDATION ==========

class TestInterestCalculations:
    """Test interest calculation validation for fixed legs."""

    def test_fixed_leg_interest_sign_convention(self):
        """Test that pay leg has negative notional and interest."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay",
                    "rateType": "fixed",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "rate": 3.0,
                            "notional": -1000,
                            "interest": -2.67
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        leg_direction = readonly_trade.jmesget("swapLegs[0].direction")
        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")

        assert leg_direction == "pay"
        assert period["notional"] < 0
        assert period["interest"] < 0

    def test_receive_leg_interest_sign_convention(self):
        """Test that receive leg has positive notional."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "receive",
                    "rateType": "floating",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "notional": 1000
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        leg_direction = readonly_trade.jmesget("swapLegs[0].direction")
        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")

        assert leg_direction == "receive"
        assert period["notional"] > 0

    def test_interest_calculation_reasonableness(self):
        """Test that interest calculation is reasonable (order of magnitude check)."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay",
                    "rateType": "fixed",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "rate": 3.0,  # 3% annual
                            "notional": -1000,
                            "interest": -2.67  # For ~1 month period
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")

        # Calculate expected interest (simplified)
        # For 1 month at 3% annual: 1000 * 0.03 * (32/360)  2.67
        rate = period["rate"] / 100  # Convert to decimal
        notional = abs(period["notional"])

        start = datetime.strptime(period["startDate"], "%Y-%m-%d")
        end = datetime.strptime(period["endDate"], "%Y-%m-%d")
        days = (end - start).days

        # Simplified day count (actual would use 30/360 or ACT/360)
        expected_interest = notional * rate * (days / 360)
        actual_interest = abs(period["interest"])

        # Check if interest is within reasonable range (20%)
        assert 0.8 * expected_interest <= actual_interest <= 1.2 * expected_interest


# ========== SCHEDULE CONSISTENCY TESTS ==========

class TestScheduleConsistency:
    """Test consistency between swap leg dates and schedule dates."""

    def test_schedule_covers_leg_period(self):
        """Test that schedule covers the entire leg period."""
        trade_data = {
            "swapLegs": [
                {
                    "startDate": "2026-01-16",
                    "endDate": "2026-03-16",
                    "schedule": [
                        {"periodIndex": 0, "startDate": "2026-01-16", "endDate": "2026-02-17"},
                        {"periodIndex": 1, "startDate": "2026-02-17", "endDate": "2026-03-16"}
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        leg_start = readonly_trade.jmesget("swapLegs[0].startDate")
        leg_end = readonly_trade.jmesget("swapLegs[0].endDate")
        schedule = readonly_trade.jmesget("swapLegs[0].schedule")

        # First period should start on leg start date
        assert schedule[0]["startDate"] == leg_start
        # Last period should end on leg end date
        assert schedule[-1]["endDate"] == leg_end

    def test_matching_notionals_across_legs(self):
        """Test that both legs have matching notionals (opposite signs)."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay",
                    "schedule": [
                        {"periodIndex": 0, "notional": -1000}
                    ]
                },
                {
                    "direction": "receive",
                    "schedule": [
                        {"periodIndex": 0, "notional": 1000}
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        leg0_notional = readonly_trade.jmesget("swapLegs[0].schedule[0].notional")
        leg1_notional = readonly_trade.jmesget("swapLegs[1].schedule[0].notional")

        # Notionals should be equal in magnitude but opposite in sign
        assert abs(leg0_notional) == abs(leg1_notional)
        assert leg0_notional == -leg1_notional


# ========== RATESET DATE VALIDATION ==========

class TestRatesetDates:
    """Test rateset date validation for floating legs."""

    def test_floating_leg_has_rateset_dates(self):
        """Test that floating leg periods have rateset dates."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "floating",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "ratesetDate": "2026-02-17"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")
        assert "ratesetDate" in period
        assert period["ratesetDate"] is not None

    def test_rateset_date_timing(self):
        """Test that rateset date is at or near period end."""
        trade_data = {
            "swapLegs": [
                {
                    "rateType": "floating",
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "ratesetDate": "2026-02-17"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        period = readonly_trade.jmesget("swapLegs[0].schedule[0]")

        # Rateset date is typically at period end for arrears fixing
        # or at period start for advance fixing
        rateset = datetime.strptime(period["ratesetDate"], "%Y-%m-%d")
        start = datetime.strptime(period["startDate"], "%Y-%m-%d")
        end = datetime.strptime(period["endDate"], "%Y-%m-%d")

        # Rateset should be between start and end (inclusive)
        assert start <= rateset <= end


# ========== REAL-WORLD SCHEDULE TEST ==========

class TestRealWorldSchedule:
    """Test with real-world schedule data from ir-swap-presave-flattened.json."""

    def test_presave_flattened_schedule_structure(self):
        """Test the actual schedule from the UI payload."""
        # Simulating the structure from ir-swap-presave-flattened.json
        trade_data = {
            "swapLegs": [
                {
                    "legIndex": 0,
                    "direction": "pay",
                    "currency": "USD",
                    "rateType": "fixed",
                    "notional": 1000,
                    "interestRate": 3,
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "paymentDate": "2026-02-19",
                            "rate": 3,
                            "notional": -1000,
                            "interest": -2.67
                        },
                        {
                            "periodIndex": 1,
                            "startDate": "2026-02-17",
                            "endDate": "2026-03-16",
                            "paymentDate": "2026-03-18",
                            "rate": 3,
                            "notional": -1000,
                            "interest": -2.33
                        }
                    ]
                },
                {
                    "legIndex": 1,
                    "direction": "receive",
                    "currency": "USD",
                    "rateType": "floating",
                    "notional": 1000,
                    "schedule": [
                        {
                            "periodIndex": 0,
                            "startDate": "2026-01-16",
                            "endDate": "2026-02-17",
                            "ratesetDate": "2026-02-17",
                            "paymentDate": "2026-02-19",
                            "notional": 1000,
                            "margin": 0,
                            "index": "SOFR",
                            "tenor": "1D"
                        },
                        {
                            "periodIndex": 1,
                            "startDate": "2026-02-17",
                            "endDate": "2026-03-16",
                            "ratesetDate": "2026-03-16",
                            "paymentDate": "2026-03-18",
                            "notional": 1000,
                            "margin": 0,
                            "index": "SOFR",
                            "tenor": "1D"
                        }
                    ]
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)

        # Verify both legs have schedules
        leg0_schedule = readonly_trade.jmesget("swapLegs[0].schedule")
        leg1_schedule = readonly_trade.jmesget("swapLegs[1].schedule")
        assert len(leg0_schedule) == 2
        assert len(leg1_schedule) == 2

        # Verify period continuity on both legs
        assert leg0_schedule[0]["endDate"] == leg0_schedule[1]["startDate"]
        assert leg1_schedule[0]["endDate"] == leg1_schedule[1]["startDate"]

        # Verify notional consistency
        assert abs(leg0_schedule[0]["notional"]) == abs(leg1_schedule[0]["notional"])

        # Verify payment dates align
        assert leg0_schedule[0]["paymentDate"] == leg1_schedule[0]["paymentDate"]
        assert leg0_schedule[1]["paymentDate"] == leg1_schedule[1]["paymentDate"]

<File--- tcs-poc/tcs-api/tests/test_property_based.py --->
"""Property-based validation tests using Hypothesis.

These tests generate randomized trade data to verify validation invariants
across thousands of generated examples. All randomization happens in-memory
during test execution - no files are saved.
"""

from datetime import date
from hypothesis import given, settings
from tests.strategies.trade_strategies import random_ir_swap
from trade_api.models.trade import Trade, ReadOnlyTrade
from trade_api.validation.factory import ValidationFactory


@given(random_ir_swap())
def test_random_valid_trades_pass_validation(trade_data):
    """Property: Any validly constructed random trade should pass validation.

    This test verifies that our trade generation strategy produces valid trades
    that pass all validation rules. If this test fails, it indicates either:
    1. A bug in the trade generator
    2. A bug in the validation logic
    3. An overly strict validation rule
    """
    trade = Trade(trade_data)
    readonly_trade = ReadOnlyTrade(trade)

    factory = ValidationFactory()
    pipeline = factory.create_pipeline(readonly_trade)
    result = pipeline.validate(readonly_trade)

    assert result.success is True, f"Validation failed: {result.errors}"


@given(random_ir_swap())
def test_date_ordering_invariant(trade_data):
    """Property: tradeDate <= startDate < endDate always holds.

    This fundamental invariant must hold for all trades:
    - Trade date cannot be after the swap starts
    - Swap must have a positive tenor (start before end)
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    trade_date = date.fromisoformat(trade.jmesget("common.tradeDate"))
    start_date = date.fromisoformat(trade.jmesget("swapLegs[0].startDate"))
    end_date = date.fromisoformat(trade.jmesget("swapLegs[0].endDate"))

    assert trade_date <= start_date, f"tradeDate {trade_date} must be <= startDate {start_date}"
    assert start_date < end_date, f"startDate {start_date} must be < endDate {end_date}"


@given(random_ir_swap())
def test_notional_matching_invariant(trade_data):
    """Property: Both legs have equal absolute notionals.

    In an interest rate swap, both legs must have matching notional amounts
    (even though they have opposite signs for pay/receive).
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    leg0_notional = abs(trade.jmesget("swapLegs[0].notional"))
    leg1_notional = abs(trade.jmesget("swapLegs[1].notional"))

    assert leg0_notional == leg1_notional, \
        f"Leg notionals must match: {leg0_notional} != {leg1_notional}"


@given(random_ir_swap())
def test_notional_sign_convention(trade_data):
    """Property: Pay leg has negative notional, receive leg has positive.

    This sign convention is critical for proper P&L calculations:
    - Pay direction: negative notional (cash outflow)
    - Receive direction: positive notional (cash inflow)
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    for leg in trade.jmesget("swapLegs"):
        direction = leg["direction"]
        notional = leg["notional"]

        if direction == "pay":
            assert notional < 0 or all(p["notional"] < 0 for p in leg.get("schedule", [])), \
                f"Pay leg notional must be negative, got {notional}"
        else:  # receive
            assert notional > 0 or all(p["notional"] > 0 for p in leg.get("schedule", [])), \
                f"Receive leg notional must be positive, got {notional}"


@given(random_ir_swap())
def test_schedule_continuity_invariant(trade_data):
    """Property: Schedule periods are contiguous with no gaps.

    Each period's end date must equal the next period's start date.
    Gaps or overlaps in the schedule indicate data quality issues.
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    for leg in trade.jmesget("swapLegs"):
        schedule = leg.get("schedule", [])
        if len(schedule) < 2:
            continue

        for i in range(len(schedule) - 1):
            current_end = schedule[i]["endDate"]
            next_start = schedule[i + 1]["startDate"]
            assert current_end == next_start, \
                f"Gap in schedule at period {i}: {current_end} -> {next_start}"


@given(random_ir_swap())
def test_round_trip_serialization(trade_data):
    """Property: Serialize -> deserialize -> validate still passes.

    This verifies that:
    1. Trades can be serialized to JSON
    2. Trades can be deserialized from JSON
    3. Validation results are consistent across serialization
    """
    # Original
    trade1 = Trade(trade_data)
    readonly1 = ReadOnlyTrade(trade1)

    # Serialize
    json_bytes = trade1.to_json()

    # Deserialize
    trade2 = Trade(json_bytes)
    readonly2 = ReadOnlyTrade(trade2)

    # Validate both
    factory = ValidationFactory()
    result1 = factory.create_pipeline(readonly1).validate(readonly1)
    result2 = factory.create_pipeline(readonly2).validate(readonly2)

    assert result1.success == result2.success, \
        "Validation success should be same after round-trip"
    assert result1.errors == result2.errors, \
        f"Validation errors should be same after round-trip: {result1.errors} != {result2.errors}"


@given(random_ir_swap())
def test_currency_consistency(trade_data):
    """Property: All legs have matching currencies.

    In a single-currency swap, all legs must use the same currency
    as specified in the underlying.
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    underlying = trade.jmesget("swapDetails.underlying")
    leg_currencies = [leg["currency"] for leg in trade.jmesget("swapLegs")]

    assert all(c == underlying for c in leg_currencies), \
        f"Currency mismatch: underlying={underlying}, legs={leg_currencies}"


@given(random_ir_swap())
@settings(max_examples=100)  # Reduce examples for expensive calculations
def test_interest_calculation_reasonableness(trade_data):
    """Property: Calculated interest is within reasonable bounds.

    Interest amounts should be proportional to:
    - Notional amount
    - Interest rate
    - Period length

    This test catches calculation errors or unrealistic inputs.
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    for leg in trade.jmesget("swapLegs"):
        if leg.get("rateType") != "fixed":
            continue

        schedule = leg.get("schedule", [])
        for period in schedule:
            if "interest" not in period:
                continue

            rate = period.get("rate", 0)
            notional = period.get("notional", 0)
            interest = period.get("interest", 0)

            # Very rough approximation (ignoring day count)
            # interest  notional * rate / 100 / periods_per_year
            expected_magnitude = abs(notional * rate / 100 / 12)  # Assume monthly

            actual_magnitude = abs(interest)

            # Allow 10x tolerance for day count differences
            assert actual_magnitude < expected_magnitude * 10, \
                f"Interest too large: {interest} for notional={notional}, rate={rate}"


@given(random_ir_swap())
def test_schedule_notional_matches_leg_notional(trade_data):
    """Property: Each schedule period has the same notional as its parent leg.

    All periods in a leg's schedule should inherit the leg's notional amount.
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    for leg in trade.jmesget("swapLegs"):
        leg_notional = leg["notional"]
        schedule = leg.get("schedule", [])

        for period in schedule:
            period_notional = period["notional"]
            assert period_notional == leg_notional, \
                f"Period notional {period_notional} must match leg notional {leg_notional}"


@given(random_ir_swap())
def test_schedule_dates_within_leg_bounds(trade_data):
    """Property: All schedule periods fall within leg start/end dates.

    Schedule period dates must be contained within the leg's start and end dates.
    """
    trade = ReadOnlyTrade(Trade(trade_data))

    for leg in trade.jmesget("swapLegs"):
        leg_start = date.fromisoformat(leg["startDate"])
        leg_end = date.fromisoformat(leg["endDate"])
        schedule = leg.get("schedule", [])

        for period in schedule:
            period_start = date.fromisoformat(period["startDate"])
            period_end = date.fromisoformat(period["endDate"])

            assert period_start >= leg_start, \
                f"Period start {period_start} must be >= leg start {leg_start}"
            assert period_end <= leg_end, \
                f"Period end {period_end} must be <= leg end {leg_end}"

<File--- tcs-poc/tcs-api/tests/test_validators_unit.py --->
"""Unit tests for individual validators.

This module tests each validator in isolation to ensure proper validation logic.
Tests cover success cases, error paths, and edge cases for all validators.
"""

import pytest
from datetime import datetime, timedelta

from trade_api.models.trade import Trade, ReadOnlyTrade
from trade_api.validation.validators import (
    CoreStructuralValidator,
    CoreBusinessRuleValidator,
    IRSwapStructuralValidator,
    IRSwapBusinessRuleValidator,
    CommodityOptionStructuralValidator,
    CommodityOptionBusinessRuleValidator,
    IndexSwapStructuralValidator,
    IndexSwapBusinessRuleValidator
)


# ========== CORE VALIDATORS ==========

class TestCoreStructuralValidator:
    """Test CoreStructuralValidator in isolation."""

    def test_valid_core_fields(self):
        """Test validation passes with all required core fields present."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is True
        assert len(result.errors) == 0
        assert len(result.warnings) == 0

    def test_missing_trade_id(self):
        """Test validation fails when tradeId is missing."""
        trade_data = {
            "general": {},
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("general.tradeId" in error for error in result.errors)

    def test_empty_trade_id_allowed(self):
        """Test validation passes when tradeId is empty (backend generates it)."""
        trade_data = {
            "general": {
                "tradeId": ""
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        # Empty tradeId should be allowed for presave payloads
        assert result.success is True
        assert len(result.errors) == 0

    def test_missing_book(self):
        """Test validation fails when book is missing."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("common.book" in error for error in result.errors)

    def test_missing_trade_date(self):
        """Test validation fails when tradeDate is missing."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("common.tradeDate" in error for error in result.errors)

    def test_missing_counterparty(self):
        """Test validation fails when counterparty is missing."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("common.counterparty" in error for error in result.errors)

    def test_missing_input_date(self):
        """Test validation fails when inputDate is missing."""
        trade_data = {
            "general": {
                "tradeId": "TRADE-001"
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("common.inputDate" in error for error in result.errors)

    def test_multiple_missing_fields(self):
        """Test validation reports all missing required fields."""
        trade_data = {
            "general": {},
            "common": {}
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert len(result.errors) == 5  # All 5 required fields missing


class TestCoreBusinessRuleValidator:
    """Test CoreBusinessRuleValidator in isolation."""

    def test_valid_date_format(self):
        """Test validation passes with valid date format."""
        trade_data = {
            "common": {
                "tradeDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreBusinessRuleValidator()

        result = validator.validate(readonly_trade)

        assert result.success is True
        assert len(result.errors) == 0

    def test_invalid_date_format(self):
        """Test validation fails with invalid date format."""
        trade_data = {
            "common": {
                "tradeDate": "15-01-2026"  # Wrong format
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreBusinessRuleValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("Invalid tradeDate format" in error for error in result.errors)

    def test_invalid_date_value(self):
        """Test validation fails with invalid date value."""
        trade_data = {
            "common": {
                "tradeDate": "2026-13-45"  # Invalid month and day
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreBusinessRuleValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("Invalid tradeDate format" in error for error in result.errors)

    def test_missing_trade_date(self):
        """Test validation passes when tradeDate is missing (structural validator handles this)."""
        trade_data = {
            "common": {}
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreBusinessRuleValidator()

        result = validator.validate(readonly_trade)

        # Business rule validator should not fail if field is missing
        # That's the structural validator's job
        assert result.success is True


# ========== IR SWAP VALIDATORS ==========

class TestIRSwapStructuralValidator:
    """Test IRSwapStructuralValidator in isolation."""

    def test_valid_ir_swap_structure(self):
        """Test validation passes with valid IR swap structure."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD",
                "swapType": "irsOis"
            },
            "swapLegs": [
                {
                    "direction": "pay",
                    "currency": "USD"
                },
                {
                    "direction": "receive",
                    "currency": "USD"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is True
        assert len(result.errors) == 0

    def test_missing_swap_details(self):
        """Test validation fails when swapDetails is missing."""
        trade_data = {
            "swapLegs": [
                {
                    "direction": "pay",
                    "currency": "USD"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("swapDetails" in error for error in result.errors)

    def test_missing_swap_legs(self):
        """Test validation fails when swapLegs is missing."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("swapLegs" in error for error in result.errors)

    def test_empty_swap_legs_array(self):
        """Test validation fails when swapLegs array is empty."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD"
            },
            "swapLegs": []
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("at least one leg" in error for error in result.errors)

    def test_leg_missing_direction(self):
        """Test validation fails when leg is missing direction."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD"
            },
            "swapLegs": [
                {
                    "currency": "USD"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("swapLegs[0]" in error and "direction" in error for error in result.errors)

    def test_leg_missing_currency(self):
        """Test validation fails when leg is missing currency."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD"
            },
            "swapLegs": [
                {
                    "direction": "pay"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("swapLegs[0]" in error and "currency" in error for error in result.errors)

    def test_multiple_legs_validation(self):
        """Test validation checks all legs."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD"
            },
            "swapLegs": [
                {
                    "direction": "pay",
                    "currency": "USD"
                },
                {
                    "direction": "receive"
                    # Missing currency on second leg
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("swapLegs[1]" in error and "currency" in error for error in result.errors)


class TestIRSwapBusinessRuleValidator:
    """Test IRSwapBusinessRuleValidator in isolation."""

    def test_placeholder_passes(self):
        """Test business rule validator currently acts as placeholder."""
        trade_data = {
            "swapDetails": {
                "underlying": "USD"
            },
            "swapLegs": [
                {
                    "direction": "pay",
                    "currency": "USD"
                }
            ]
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IRSwapBusinessRuleValidator()

        result = validator.validate(readonly_trade)

        # Currently placeholder, should always pass
        assert result.success is True
        assert len(result.errors) == 0


# ========== COMMODITY OPTION VALIDATORS ==========

class TestCommodityOptionStructuralValidator:
    """Test CommodityOptionStructuralValidator in isolation."""

    def test_valid_commodity_option_structure(self):
        """Test validation passes with valid commodity option structure."""
        trade_data = {
            "commodityDetails": {
                "commodity": "Gold",
                "optionType": "Call"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CommodityOptionStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is True
        assert len(result.errors) == 0

    def test_missing_commodity_details(self):
        """Test validation fails when commodityDetails is missing."""
        trade_data = {}
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CommodityOptionStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("commodityDetails" in error for error in result.errors)


class TestCommodityOptionBusinessRuleValidator:
    """Test CommodityOptionBusinessRuleValidator in isolation."""

    def test_placeholder_passes(self):
        """Test business rule validator currently acts as placeholder."""
        trade_data = {
            "commodityDetails": {
                "commodity": "Gold"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CommodityOptionBusinessRuleValidator()

        result = validator.validate(readonly_trade)

        # Currently placeholder, should always pass
        assert result.success is True
        assert len(result.errors) == 0


# ========== INDEX SWAP VALIDATORS ==========

class TestIndexSwapStructuralValidator:
    """Test IndexSwapStructuralValidator in isolation."""

    def test_valid_index_swap_structure(self):
        """Test validation passes with valid index swap structure."""
        trade_data = {
            "leg": {
                "index": "S&P500",
                "notional": 1000000
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IndexSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is True
        assert len(result.errors) == 0

    def test_missing_leg(self):
        """Test validation fails when leg is missing."""
        trade_data = {}
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IndexSwapStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        assert any("leg" in error for error in result.errors)


class TestIndexSwapBusinessRuleValidator:
    """Test IndexSwapBusinessRuleValidator in isolation."""

    def test_placeholder_passes(self):
        """Test business rule validator currently acts as placeholder."""
        trade_data = {
            "leg": {
                "index": "S&P500"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = IndexSwapBusinessRuleValidator()

        result = validator.validate(readonly_trade)

        # Currently placeholder, should always pass
        assert result.success is True
        assert len(result.errors) == 0


# ========== EDGE CASES AND NULL HANDLING ==========

class TestEdgeCases:
    """Test edge cases and null handling across validators."""

    def test_null_values_in_core_fields(self):
        """Test handling of null values in required fields."""
        trade_data = {
            "general": {
                "tradeId": None
            },
            "common": {
                "book": None,
                "tradeDate": None,
                "counterparty": None,
                "inputDate": None
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        # All fields should be reported as missing
        assert len(result.errors) == 5

    def test_whitespace_only_strings(self):
        """Test handling of whitespace-only strings."""
        trade_data = {
            "general": {
                "tradeId": "   "  # Whitespace only
            },
            "common": {
                "book": "BOOK-001",
                "tradeDate": "2026-01-15",
                "counterparty": "CP-001",
                "inputDate": "2026-01-15"
            }
        }
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        # Current implementation checks for empty string, not whitespace
        # This is a potential gap, but testing current behavior
        assert result.success is True

    def test_nested_missing_fields(self):
        """Test handling of completely missing nested objects."""
        trade_data = {}
        trade = Trade(trade_data)
        readonly_trade = ReadOnlyTrade(trade)
        validator = CoreStructuralValidator()

        result = validator.validate(readonly_trade)

        assert result.success is False
        # All required fields should be missing
        assert len(result.errors) == 5

<File--- tcs-poc/tcs-api/.hypothesis/constants/3dbb11b758eb2dc0 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/core/business_rules.py
# hypothesis_version: 6.141.1

['%Y-%m-%d', 'common.tradeDate']

<File--- tcs-poc/tcs-api/.hypothesis/constants/9101e81016ab853e --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/irswap/business_rules.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/9adfff7521845320 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators.py
# hypothesis_version: 6.141.1

['%Y-%m-%d', 'commodityDetails', 'common.book', 'common.counterparty', 'common.inputDate', 'common.tradeDate', 'general.tradeId', 'leg', 'swapDetails', 'swapLegs']

<File--- tcs-poc/tcs-api/.hypothesis/constants/55b661584d9c29c5 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/index_swap/structural.py
# hypothesis_version: 6.141.1

['leg']

<File--- tcs-poc/tcs-api/.hypothesis/constants/3c29899c9d3acd25 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/index_swap/__init__.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/bb1abff3dc732e16 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/core/__init__.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/e6ac18814b347202 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/factory.py
# hypothesis_version: 6.141.1

['commodity-option', 'commodityDetails', 'index-swap', 'ir-swap', 'leg', 'premium', 'swapDetails', 'swapLegs']

<File--- tcs-poc/tcs-api/.hypothesis/constants/7f73b2a3fd720cba --->
# file: /home/kbagci/.cache/pypoetry/virtualenvs/trade-api-dGeOS4Hs-py3.12/bin/pytest
# hypothesis_version: 6.141.1

['__main__']

<File--- tcs-poc/tcs-api/.hypothesis/constants/ff73bcdbfd6a7289 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/index_swap/business_rules.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/142cd4216a454abf --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/api/__init__.py
# hypothesis_version: 6.141.1

['/trades', 'trades']

<File--- tcs-poc/tcs-api/.hypothesis/constants/3c8480616796b807 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/main.py
# hypothesis_version: 6.141.1

['*', '/api/v1', '/docs', '/redoc', '0.1.0', 'Trade API', '__main__', 'trade_api.main:app']

<File--- tcs-poc/tcs-api/.hypothesis/constants/867d41d69bafc3bb --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/commodity_option/__init__.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/11187499bd9b20c3 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/models/__init__.py
# hypothesis_version: 6.141.1

['ReadOnlyTrade', 'Trade', 'TradeAssembler', 'TradeTemplateFactory']

<File--- tcs-poc/tcs-api/.hypothesis/constants/7354b50d00065144 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/commodity_option/business_rules.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/1bf2e84de0a30d2d --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/__init__.py
# hypothesis_version: 6.141.1

['ValidationFactory', 'ValidationPipeline', 'ValidationResult', 'Validator']

<File--- tcs-poc/tcs-api/.hypothesis/constants/6e77ec877079b9e2 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/config.py
# hypothesis_version: 6.141.1

[8000, 10000, '.env', '0.1.0', '127.0.0.1', 'TRADE_API_', 'Trade API']

<File--- tcs-poc/tcs-api/.hypothesis/constants/62df012152a330d7 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/commodity_option/structural.py
# hypothesis_version: 6.141.1

['commodityDetails']

<File--- tcs-poc/tcs-api/.hypothesis/constants/b2f5a2bf31f86d78 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/models/factory.py
# hypothesis_version: 6.141.1

[256, '*.json', 'common.json', 'core/common.json', 'core/general.json', 'extend', 'general.json', 'rb', 'templates', 'trade-types', 'v1']

<File--- tcs-poc/tcs-api/.hypothesis/constants/08bf6524cfd2e458 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/irswap/__init__.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/2b1c35263f1410fa --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/models/assembler.py
# hypothesis_version: 6.141.1

['TradeAssembler', 'append', 'extend', 'replace']

<File--- tcs-poc/tcs-api/.hypothesis/constants/9f030ee5da5417e2 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/models/trade.py
# hypothesis_version: 6.141.1

[1024, 'ReadOnlyTrade', 'assetClass', 'commodity-option', 'commodityDetails', 'general', 'index-swap', 'ir-swap', 'leg', 'premium', 'swapDetails', 'swapLegs', 'tradeId', 'unknown', 'version']

<File--- tcs-poc/tcs-api/.hypothesis/constants/99142d79cb9164d2 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/core/structural.py
# hypothesis_version: 6.141.1

['common.book', 'common.counterparty', 'common.inputDate', 'common.tradeDate', 'general.tradeId']

<File--- tcs-poc/tcs-api/.hypothesis/constants/c37c570c92a54a07 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/api/trades.py
# hypothesis_version: 6.141.1

[400, 500, '/new', '/save', '/validate', 'Unknown error', 'ir-swap', 'templates', 'v1']

<File--- tcs-poc/tcs-api/.hypothesis/constants/2e17c380681143f9 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/irswap/structural.py
# hypothesis_version: 6.141.1

['swapDetails', 'swapLegs']

<File--- tcs-poc/tcs-api/.hypothesis/constants/f4e57e56db8e9ff1 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/base.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/cbf23c753d0e5985 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/core/structural.py
# hypothesis_version: 6.141.1

['common.book', 'common.counterparty', 'common.inputDate', 'common.tradeDate', 'general.tradeId']

<File--- tcs-poc/tcs-api/.hypothesis/constants/ac08c8798276ebe8 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/result.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/2aca350b8cae1ffd --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/services/trade_service.py
# hypothesis_version: 6.141.1

['%Y%m%d', '%Y-%m-%d', '-', 'Placeholder', 'Z', 'common', 'executionDateTime', 'executionDetails', 'general', 'inputDate', 'message', 'tradeDate', 'tradeId', 'trade_id', 'trade_type', 'v1', 'validation_timestamp']

<File--- tcs-poc/tcs-api/.hypothesis/constants/642a8eed595bc8e9 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/services/results.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/77fc243ef00a151b --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/__init__.py
# hypothesis_version: 6.141.1

['0.1.0']

<File--- tcs-poc/tcs-api/.hypothesis/constants/dd66aa78f79f332c --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/__init__.py
# hypothesis_version: 6.141.1

['Validator']

<File--- tcs-poc/tcs-api/.hypothesis/constants/c213e66e42f4f4ac --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/services/__init__.py
# hypothesis_version: 6.141.1

['TradeCreationResult', 'TradeSaveResult', 'TradeService']

<File--- tcs-poc/tcs-api/.hypothesis/constants/7821479539445168 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/pipeline.py
# hypothesis_version: 6.141.1

[]

<File--- tcs-poc/tcs-api/.hypothesis/constants/6f0d509eba0af304 --->
# file: /projects/trade-capture-service/tcs-poc/tcs-api/src/trade_api/validation/validators/core/business_rules.py
# hypothesis_version: 6.141.1

['%Y-%m-%d', 'common.tradeDate']

<File--- tcs-poc/tcs-api/tests/helpers/trade_generators.py --->
"""Trade generation helpers for property-based testing."""

from datetime import date, timedelta
from typing import List, Dict, Any, Optional


def generate_schedule(
    start_date: date,
    end_date: date,
    notional: float,
    rate: Optional[float],
    direction: str
) -> List[Dict[str, Any]]:
    """Generate a valid schedule array for a swap leg.

    Args:
        start_date: Leg start date
        end_date: Leg end date
        notional: Leg notional amount
        rate: Fixed rate (None for floating legs)
        direction: "pay" or "receive"

    Returns:
        List of schedule period dicts
    """
    # Determine sign based on direction
    signed_notional = -abs(notional) if direction == "pay" else abs(notional)

    # Generate monthly periods (simplified)
    periods = []
    current = start_date
    period_index = 0

    while current < end_date:
        # Calculate next period end (monthly)
        # Use approximately 30 days, but don't exceed end_date
        next_date = min(
            current + timedelta(days=30),
            end_date
        )

        # Payment date is typically T+2 business days after end
        payment_date = next_date + timedelta(days=2)

        period = {
            "periodIndex": period_index,
            "startDate": str(current),
            "endDate": str(next_date),
            "paymentDate": str(payment_date),
            "notional": signed_notional
        }

        # Add fixed leg specific fields
        if rate is not None:
            period["rate"] = rate
            # Simplified interest calculation (using ACT/360)
            days = (next_date - current).days
            period["interest"] = signed_notional * rate / 100 * days / 360

        # Add floating leg specific fields
        else:
            period["ratesetDate"] = str(next_date)
            period["margin"] = 0.0

        periods.append(period)
        current = next_date
        period_index += 1

    return periods

<File--- tcs-poc/tcs-api/tests/helpers/__init__.py --->
"""Helper modules for test utilities."""

<File--- tcs-poc/tcs-api/tests/strategies/trade_strategies.py --->
"""Hypothesis strategies for generating random trade data."""

from datetime import date, timedelta
from hypothesis import strategies as st
from tests.helpers.trade_generators import generate_schedule


# Date strategies with constraints
past_dates = st.dates(
    min_value=date.today() - timedelta(days=5*365),
    max_value=date.today()
)


@st.composite
def input_date_after_trade_date(draw, trade_date: date):
    """Generate inputDate >= tradeDate."""
    return draw(st.dates(
        min_value=trade_date,
        max_value=trade_date + timedelta(days=30)
    ))


@st.composite
def start_date_after_trade_date(draw, trade_date: date):
    """Generate startDate >= tradeDate (T+0 to T+90)."""
    return draw(st.dates(
        min_value=trade_date,
        max_value=trade_date + timedelta(days=90)
    ))


@st.composite
def end_date_after_start_date(draw, start_date: date):
    """Generate endDate > startDate (1 month to 30 years)."""
    return draw(st.dates(
        min_value=start_date + timedelta(days=30),
        max_value=start_date + timedelta(days=30*365)
    ))


# Notional strategies
notionals = st.integers(min_value=1_000, max_value=1_000_000_000)

# Rate strategies
fixed_rates = st.floats(min_value=0.01, max_value=15.0)

# Currency strategies
currencies = st.sampled_from(["USD", "EUR", "GBP", "JPY", "CHF", "AUD", "CAD"])

# Enum strategies
directions = st.sampled_from(["pay", "receive"])
rate_types = st.sampled_from(["fixed", "floating"])
day_count_bases = st.sampled_from(["ACT/360", "ACT/365", "30/360"])
rate_indices = st.sampled_from(["SOFR", "LIBOR", "EURIBOR", "SONIA"])


@st.composite
def random_ir_swap(draw):
    """Generate a random valid IR swap trade structure.

    Returns a complete IR swap trade dict that matches the structure
    of ir-swap-presave-flattened.json with randomized values.
    """
    # Generate dates with constraints
    trade_date = draw(past_dates)
    input_date = draw(input_date_after_trade_date(trade_date))
    start_date = draw(start_date_after_trade_date(trade_date))
    end_date = draw(end_date_after_start_date(start_date))

    # Generate amounts
    notional = draw(notionals)

    # Generate rates
    fixed_rate = draw(fixed_rates)

    # Generate currencies
    currency = draw(currencies)

    # Generate identifiers
    book = f"BOOK{draw(st.integers(1, 999)):03d}"
    counterparty = f"{draw(st.integers(10000000, 99999999))}"

    # Generate rate index for floating leg
    rate_index = draw(rate_indices)

    # Build trade structure (based on ir-swap-presave-flattened.json)
    return {
        "general": {
            "tradeId": "",  # Empty for presave
            "tradeType": "InterestRateSwap",
            "executionDateTime": f"{trade_date}T10:00:00Z"
        },
        "common": {
            "book": book,
            "counterparty": counterparty,
            "tradeDate": str(trade_date),
            "inputDate": str(input_date)
        },
        "swapDetails": {
            "underlying": currency,
            "swapType": "irsOis",
            "settlementType": "physical"
        },
        "swapLegs": [
            # Pay leg (fixed)
            {
                "legIndex": 0,
                "direction": "pay",
                "currency": currency,
                "rateType": "fixed",
                "notional": -abs(notional),  # Pay leg is negative
                "interestRate": fixed_rate,
                "startDate": str(start_date),
                "endDate": str(end_date),
                "dayCountBasis": "ACT/360",
                "schedule": generate_schedule(start_date, end_date, notional, fixed_rate, "pay")
            },
            # Receive leg (floating)
            {
                "legIndex": 1,
                "direction": "receive",
                "currency": currency,
                "rateType": "floating",
                "notional": abs(notional),  # Receive leg is positive
                "startDate": str(start_date),
                "endDate": str(end_date),
                "dayCountBasis": "ACT/360",
                "ratesetRef": rate_index,
                "schedule": generate_schedule(start_date, end_date, notional, None, "receive")
            }
        ]
    }

<File--- tcs-poc/tcs-api/tests/strategies/__init__.py --->
"""Hypothesis strategies for trade generation."""

<File--- tcs-poc/tcs-api/src/trade_api/main.py --->
"""Main application factory and FastAPI app configuration."""

from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from trade_api.config import get_settings
from trade_api.api import router
from trade_api.api.health import router as health_router


def create_app() -> FastAPI:
    """Create and configure the FastAPI application."""
    settings = get_settings()

    app = FastAPI(
        title="Trade API",
        description="FastAPI-based system for processing financial swap deals",
        version="0.1.0",
        docs_url="/docs" if settings.debug else None,
        redoc_url="/redoc" if settings.debug else None,
    )

    # Configure CORS to allow requests from any source
    app.add_middleware(
        CORSMiddleware,
        allow_origins=["*"],  # Allow all origins
        allow_credentials=True,
        allow_methods=["*"],  # Allow all methods (GET, POST, PUT, DELETE, etc.)
        allow_headers=["*"],  # Allow all headers
    )

    # Include health check routes (no prefix for standard k8s/ArgoCD paths)
    app.include_router(health_router)

    # Include API routes
    app.include_router(router, prefix="/api/v1")

    return app


# Create the app instance for uvicorn
app = create_app()


if __name__ == "__main__":
    import uvicorn
    settings = get_settings()
    uvicorn.run(
        "trade_api.main:app",
        host=settings.host,
        port=settings.port,
        reload=settings.debug,
    )

<File--- tcs-poc/tcs-api/src/trade_api/config.py --->
"""Configuration management for different environments."""

from functools import lru_cache
from pydantic_settings import BaseSettings
from pydantic import ConfigDict
from typing import Optional


class Settings(BaseSettings):
    """Application settings with environment variable support."""
    
    model_config = ConfigDict(
        env_file=".env",
        env_prefix="TRADE_API_"
    )
    
    # Application settings
    debug: bool = True
    host: str = "127.0.0.1"
    port: int = 8000
    
    # API settings
    api_title: str = "Trade API"
    api_version: str = "0.1.0"
    
    # Trade store settings
    max_trades_in_memory: int = 10000


@lru_cache()
def get_settings() -> Settings:
    """Get cached application settings."""
    return Settings()

<File--- tcs-poc/tcs-api/src/trade_api/__init__.py --->
"""Trade API - FastAPI-based system for processing financial swap deals."""

__version__ = "0.1.0"

<File--- tcs-poc/tcs-api/src/trade_api/api/trades.py --->
"""Trade API endpoints for new, save, and validate operations."""

from fastapi import APIRouter, HTTPException, Query, Depends
from typing import Dict, Any, Optional, List
from pydantic import BaseModel, Field
from pathlib import Path

from trade_api.models import TradeTemplateFactory
from trade_api.validation import ValidationFactory
from trade_api.services import TradeService

router = APIRouter()
_template_factory = None
_validation_factory = None

def get_template_factory() -> TradeTemplateFactory:
    global _template_factory
    if _template_factory is None:
        current_file = Path(__file__).resolve()
        project_root = current_file.parent.parent.parent.parent
        template_dir = project_root / "templates"
        _template_factory = TradeTemplateFactory(template_dir=str(template_dir), schema_version="v1")
    return _template_factory

def get_validation_factory() -> ValidationFactory:
    """Get singleton ValidationFactory instance (lazy initialization)."""
    global _validation_factory
    if _validation_factory is None:
        _validation_factory = ValidationFactory()
        # Registry is built on first pipeline creation (lazy)
    return _validation_factory

def get_trade_service(
    template_factory: TradeTemplateFactory = Depends(get_template_factory),
    validation_factory: ValidationFactory = Depends(get_validation_factory)
) -> TradeService:
    """Get TradeService instance with injected dependencies.

    Args:
        template_factory: Factory for creating trade templates
        validation_factory: Factory for creating validation pipelines

    Returns:
        TradeService instance
    """
    return TradeService(template_factory, validation_factory)

class MetadataRequest(BaseModel):
    """Optional metadata for tracking."""
    documentId: Optional[str] = Field(None, description="UUID v4 document identifier")
    correlationId: Optional[str] = Field(None, description="UUID v4 correlation identifier")

class SaveTradeRequest(BaseModel):
    trade_data: Dict[str, Any]

class ValidateTradeRequest(BaseModel):
    trade_data: Dict[str, Any]
    metadata: Optional[MetadataRequest] = None

class TradeResponse(BaseModel):
    success: bool
    trade_data: Optional[Dict[str, Any]] = None
    errors: List[str] = []
    warnings: List[str] = []
    metadata: Optional[Dict[str, Any]] = None

@router.get("/new", response_model=TradeResponse)
async def create_new_trade(
    trade_type: str = Query(..., description="Trade type: 'ir-swap', 'commodity-option', 'index-swap'", examples=["ir-swap"]),
    service: TradeService = Depends(get_trade_service)
) -> TradeResponse:
    """Create a new trade from a template.

    Args:
        trade_type: The type of trade to create
        service: TradeService instance (injected)

    Returns:
        TradeResponse with trade data and metadata

    Raises:
        HTTPException: If trade creation fails
    """
    result = service.create_new_trade(trade_type)

    if not result.success:
        if result.errors and "Invalid configuration" in result.errors[0]:
            raise HTTPException(status_code=400, detail=result.errors[0])
        raise HTTPException(status_code=500, detail=result.errors[0] if result.errors else "Unknown error")

    return TradeResponse(
        success=result.success,
        trade_data=result.trade_data,
        metadata=result.metadata,
        errors=result.errors
    )

@router.post("/save", response_model=TradeResponse)
async def save_trade(
    request: SaveTradeRequest,
    service: TradeService = Depends(get_trade_service)
) -> TradeResponse:
    """Save a trade (placeholder implementation).

    Args:
        request: Request containing trade data to save
        service: TradeService instance (injected)

    Returns:
        TradeResponse with save results
    """
    result = service.save_trade(request.trade_data)

    return TradeResponse(
        success=result.success,
        trade_data=result.trade_data,
        warnings=result.warnings
    )

@router.post("/validate", response_model=TradeResponse)
async def validate_trade(
    request: ValidateTradeRequest,
    service: TradeService = Depends(get_trade_service)
) -> TradeResponse:
    """Validate trade data using validation pipeline.

    Args:
        request: Request containing trade data to validate
        service: TradeService instance (injected)

    Returns:
        TradeResponse with validation results (no trade_data returned)
    """
    # Convert Pydantic metadata to dict
    metadata_dict = None
    if request.metadata:
        metadata_dict = {
            "documentId": request.metadata.documentId,
            "correlationId": request.metadata.correlationId
        }

    # Call service with metadata
    result = service.validate_trade(
        trade_data=request.trade_data,
        metadata=metadata_dict
    )

    return TradeResponse(
        success=result.success,
        trade_data=None,
        errors=result.errors,
        warnings=result.warnings,
        metadata=result.metadata
    )

<File--- tcs-poc/tcs-api/src/trade_api/api/health.py --->
"""Health check endpoints for Kubernetes/ArgoCD monitoring.

This module provides health check endpoints following Kubernetes conventions:
- /health/live: Liveness probe - checks if the application is running
- /health/ready: Readiness probe - checks if the application can serve traffic
"""

from fastapi import APIRouter, Response, status
from pydantic import BaseModel
from datetime import datetime, timezone
from typing import Dict, Any
import sys

router = APIRouter(prefix="/health", tags=["health"])


class HealthResponse(BaseModel):
    """Health check response model."""
    status: str
    timestamp: str
    version: str


class ReadinessResponse(BaseModel):
    """Readiness check response with dependency status."""
    status: str
    timestamp: str
    version: str
    checks: Dict[str, str]


@router.get("/live", response_model=HealthResponse, status_code=status.HTTP_200_OK)
async def liveness() -> HealthResponse:
    """Liveness probe endpoint.

    This endpoint checks if the application process is running.
    Used by Kubernetes to determine if the pod should be restarted.

    Returns:
        200 OK: Application is alive

    Example Response:
        {
            "status": "healthy",
            "timestamp": "2026-01-19T10:30:00.000Z",
            "version": "0.1.0"
        }
    """
    return HealthResponse(
        status="healthy",
        timestamp=datetime.now(timezone.utc).isoformat().replace('+00:00', 'Z'),
        version="0.1.0"
    )


@router.get("/ready", response_model=ReadinessResponse, status_code=status.HTTP_200_OK)
async def readiness(response: Response) -> ReadinessResponse:
    """Readiness probe endpoint.

    This endpoint checks if the application is ready to serve traffic.
    Used by Kubernetes to determine if the pod should receive requests.

    Checks:
    - Application runtime (Python version, dependencies loaded)
    - Template factory can be initialized
    - Validation factory can be initialized

    Returns:
        200 OK: Application is ready to serve traffic
        503 Service Unavailable: Application is not ready

    Example Response (Healthy):
        {
            "status": "ready",
            "timestamp": "2026-01-19T10:30:00.000Z",
            "version": "0.1.0",
            "checks": {
                "runtime": "ok",
                "templates": "ok",
                "validation": "ok"
            }
        }

    Example Response (Unhealthy):
        {
            "status": "not_ready",
            "timestamp": "2026-01-19T10:30:00.000Z",
            "version": "0.1.0",
            "checks": {
                "runtime": "ok",
                "templates": "error",
                "validation": "ok"
            }
        }
    """
    checks: Dict[str, str] = {}
    is_ready = True

    # Check 1: Runtime health
    try:
        # Verify Python version is acceptable
        if sys.version_info >= (3, 10):
            checks["runtime"] = "ok"
        else:
            checks["runtime"] = "error"
            is_ready = False
    except Exception:
        checks["runtime"] = "error"
        is_ready = False

    # Check 2: Template system availability
    try:
        from trade_api.models import TradeTemplateFactory
        checks["templates"] = "ok"
    except Exception as e:
        checks["templates"] = f"error: {str(e)}"
        is_ready = False

    # Check 3: Validation system availability
    try:
        from trade_api.validation import ValidationFactory
        checks["validation"] = "ok"
    except Exception as e:
        checks["validation"] = f"error: {str(e)}"
        is_ready = False

    # Set response status code based on readiness
    if not is_ready:
        response.status_code = status.HTTP_503_SERVICE_UNAVAILABLE

    return ReadinessResponse(
        status="ready" if is_ready else "not_ready",
        timestamp=datetime.now(timezone.utc).isoformat().replace('+00:00', 'Z'),
        version="0.1.0",
        checks=checks
    )


@router.get("", response_model=HealthResponse, status_code=status.HTTP_200_OK)
async def health() -> HealthResponse:
    """Basic health check endpoint.

    Simple health endpoint that returns 200 if the application is running.
    This is an alias to the liveness endpoint for convenience.

    Returns:
        200 OK: Application is healthy

    Example Response:
        {
            "status": "healthy",
            "timestamp": "2026-01-19T10:30:00.000Z",
            "version": "0.1.0"
        }
    """
    return HealthResponse(
        status="healthy",
        timestamp=datetime.now(timezone.utc).isoformat().replace('+00:00', 'Z'),
        version="0.1.0"
    )

<File--- tcs-poc/tcs-api/src/trade_api/api/__init__.py --->
"""API package for FastAPI routes and endpoints."""

from fastapi import APIRouter
from trade_api.api import trades

# Create main router
router = APIRouter()

# Include sub-routers
router.include_router(trades.router, prefix="/trades", tags=["trades"])

<File--- tcs-poc/tcs-api/src/trade_api/services/trade_service.py --->
"""Service layer for trade operations."""

from datetime import datetime
from typing import Dict, Any
import uuid

from trade_api.models import TradeTemplateFactory, Trade
from trade_api.validation import ValidationFactory
from trade_api.services.results import (
    TradeCreationResult,
    TradeValidationResult,
    TradeSaveResult
)


class TradeService:
    """Service for coordinating trade operations.

    This service encapsulates the business logic and orchestration for:
    - Creating new trades from templates
    - Validating trade data
    - Saving trades

    It separates business concerns from HTTP/API concerns.
    """

    def __init__(
        self,
        template_factory: TradeTemplateFactory,
        validation_factory: ValidationFactory
    ):
        """Initialize the service with required factories.

        Args:
            template_factory: Factory for creating trade templates
            validation_factory: Factory for creating validation pipelines
        """
        self.template_factory = template_factory
        self.validation_factory = validation_factory

    def _generate_document_id(self) -> str:
        """Generate a UUID v4 document ID.

        Returns:
            UUID v4 string in standard format (36 characters with hyphens)
        """
        return str(uuid.uuid4())

    def _generate_correlation_id(self) -> str:
        """Generate a UUID v4 correlation ID.

        Returns:
            UUID v4 string in standard format (36 characters with hyphens)
        """
        return str(uuid.uuid4())

    def create_new_trade(self, trade_type: str) -> TradeCreationResult:
        """Create a new trade from a template.

        This method orchestrates the following steps:
        1. Create a template assembler for the trade type
        2. Assemble the template into a trade dictionary
        3. Generate a unique trade ID
        4. Populate date/time fields
        5. Create a Trade object
        6. Return result with trade data and metadata

        Args:
            trade_type: The type of trade (e.g., 'ir-swap', 'commodity-option')

        Returns:
            TradeCreationResult containing the trade data, metadata, and any errors

        Raises:
            ValueError: If the trade type is invalid or template configuration is bad
        """
        try:
            # Step 1-2: Create assembler and assemble template
            assembler = self.template_factory.create_assembler(trade_type=trade_type)
            trade_dict = assembler.assemble()

            # Step 3: Generate unique trade ID
            date_str = datetime.now().strftime("%Y%m%d")
            type_code = trade_type.upper().replace("-", "")
            sequence = str(uuid.uuid4().int)[:4]
            trade_id = f"NEW-{date_str}-{type_code}-{sequence}"

            # Populate trade ID in the trade dictionary
            if "general" in trade_dict:
                trade_dict["general"]["tradeId"] = trade_id

            # Step 4: Populate date/time fields
            today = datetime.now().strftime("%Y-%m-%d")
            execution_datetime = datetime.now().isoformat() + "Z"

            if "common" in trade_dict:
                trade_dict["common"]["tradeDate"] = today
                trade_dict["common"]["inputDate"] = today

            if "general" in trade_dict and "executionDetails" in trade_dict["general"]:
                trade_dict["general"]["executionDetails"]["executionDateTime"] = execution_datetime

            # Step 5: Create Trade object
            trade = Trade(trade_dict)

            # Step 6: Generate UUIDs
            document_id = self._generate_document_id()
            correlation_id = self._generate_correlation_id()

            # Step 7: Build metadata
            metadata = {
                "documentId": document_id,
                "correlationId": correlation_id,
                "trade_id": trade_id,
                "trade_type": trade_type,
                "template_schema_version": "v1"
            }

            return TradeCreationResult(
                success=True,
                trade_data=trade.data,
                metadata=metadata,
                errors=[]
            )

        except ValueError as e:
            return TradeCreationResult(
                success=False,
                trade_data=None,
                metadata={},
                errors=[f"Invalid configuration: {str(e)}"]
            )
        except Exception as e:
            return TradeCreationResult(
                success=False,
                trade_data=None,
                metadata={},
                errors=[f"Error creating template: {str(e)}"]
            )

    def validate_trade(
        self,
        trade_data: Dict[str, Any],
        metadata: Dict[str, Any] = None
    ) -> TradeValidationResult:
        """Validate trade data using the validation pipeline.

        This method orchestrates the following steps:
        1. Extract and handle incoming metadata (documentId, correlationId)
        2. Create Trade instance from the trade data
        3. Convert to read-only Trade for validation (immutability + performance)
        4. Create validation pipeline for the trade type
        5. Execute validation pipeline
        6. Return validation results with metadata

        Args:
            trade_data: Dictionary containing the trade data to validate
            metadata: Optional metadata containing documentId and correlationId

        Returns:
            TradeValidationResult containing success status, errors, warnings, and metadata
        """
        try:
            # Step 1: Extract incoming metadata
            document_id = None
            correlation_id = None

            if metadata:
                document_id = metadata.get("documentId")
                correlation_id = metadata.get("correlationId")

            # Generate documentId if not provided
            if not document_id:
                document_id = self._generate_document_id()

            # Correlation ID should always be provided by caller,
            # but generate if missing (for backward compatibility)
            if not correlation_id:
                correlation_id = self._generate_correlation_id()

            # Step 2: Create Trade instance from request
            trade = Trade(trade_data)

            # Step 3: Convert to read-only for validation (immutability + performance)
            readonly_trade = trade.to_readonly()

            # Step 4: Create pipeline (validators instantiated from registry)
            pipeline = self.validation_factory.create_pipeline(readonly_trade)

            # Step 5: Execute validation (collects all errors)
            result = pipeline.validate(readonly_trade)

            # Step 6: Build result metadata
            result_metadata = {
                "documentId": document_id,
                "correlationId": correlation_id,
                "trade_type": result.trade_type,
                "validation_timestamp": datetime.now().isoformat()
            }

            return TradeValidationResult(
                success=result.success,
                errors=result.errors,
                warnings=result.warnings,
                metadata=result_metadata
            )

        except ValueError as e:
            # Trade type detection or validator registration failed
            return TradeValidationResult(
                success=False,
                errors=[str(e)],
                warnings=[],
                metadata={}
            )
        except Exception as e:
            # Unexpected error
            return TradeValidationResult(
                success=False,
                errors=[f"Validation error: {str(e)}"],
                warnings=[],
                metadata={}
            )

    def save_trade(self, trade_data: Dict[str, Any]) -> TradeSaveResult:
        """Save a trade (placeholder implementation).

        Args:
            trade_data: Dictionary containing the trade data to save

        Returns:
            TradeSaveResult containing success status and any warnings
        """
        # TODO: Implement actual save logic
        # This would typically:
        # 1. Validate the trade data
        # 2. Save to database/storage
        # 3. Return confirmation with any warnings

        return TradeSaveResult(
            success=True,
            trade_data={"message": "Placeholder"},
            warnings=["Placeholder"]
        )

<File--- tcs-poc/tcs-api/src/trade_api/services/results.py --->
"""Result DTOs for service layer operations."""

from dataclasses import dataclass, field
from typing import Dict, Any, Optional, List


@dataclass
class TradeCreationResult:
    """Result of creating a new trade from a template."""
    success: bool
    trade_data: Optional[Dict[str, Any]]
    metadata: Dict[str, Any]
    errors: List[str] = field(default_factory=list)


@dataclass
class TradeValidationResult:
    """Result of validating a trade."""
    success: bool
    errors: List[str]
    warnings: List[str]
    metadata: Dict[str, Any]


@dataclass
class TradeSaveResult:
    """Result of saving a trade."""
    success: bool
    trade_data: Optional[Dict[str, Any]]
    warnings: List[str]

<File--- tcs-poc/tcs-api/src/trade_api/services/__init__.py --->
"""Service layer for trade operations."""

from trade_api.services.results import (
    TradeCreationResult,
    TradeValidationResult,
    TradeSaveResult
)
from trade_api.services.trade_service import TradeService

__all__ = [
    "TradeCreationResult",
    "TradeValidationResult",
    "TradeSaveResult",
    "TradeService"
]

<File--- tcs-poc/tcs-api/src/trade_api/validation/pipeline.py --->
"""ValidationPipeline for executing validation stages in compositional order."""

from typing import List

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from trade_api.validation.validators import Validator


class ValidationPipeline:
    """Pipeline for executing validation stages in compositional order."""

    def __init__(self, core_validators: List[Validator], trade_validators: List[Validator], trade_type: str):
        self.core_validators = core_validators      # Validate general.*, common.*
        self.trade_validators = trade_validators    # Validate trade-specific fields
        self.trade_type = trade_type

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        """Execute validators in composition order: core first, then trade-specific."""
        errors = []
        warnings = []

        # Stage 1: Core validation (applies to ALL trades)
        for validator in self.core_validators:
            result = validator.validate(trade)
            errors.extend(result.errors)
            warnings.extend(result.warnings)

        # Stage 2: Trade-specific validation (applies to this trade type)
        for validator in self.trade_validators:
            result = validator.validate(trade)
            errors.extend(result.errors)
            warnings.extend(result.warnings)

        return ValidationResult(
            success=len(errors) == 0,
            errors=errors,
            warnings=warnings,
            trade_type=self.trade_type
        )

<File--- tcs-poc/tcs-api/src/trade_api/validation/result.py --->
"""ValidationResult dataclass for validation results."""

from dataclasses import dataclass, field
from typing import List, Optional


@dataclass
class ValidationResult:
    """Result of validation execution."""
    success: bool
    errors: List[str] = field(default_factory=list)
    warnings: List[str] = field(default_factory=list)
    trade_type: Optional[str] = None

<File--- tcs-poc/tcs-api/src/trade_api/validation/__init__.py --->
"""Validation package for trade validation."""

from trade_api.validation.factory import ValidationFactory
from trade_api.validation.pipeline import ValidationPipeline
from trade_api.validation.result import ValidationResult
from trade_api.validation.validators import Validator

__all__ = [
    "ValidationFactory",
    "ValidationPipeline",
    "ValidationResult",
    "Validator",
]

<File--- tcs-poc/tcs-api/src/trade_api/validation/factory.py --->
"""ValidationFactory for creating validation pipelines using registry pattern."""

from typing import Dict, List, Optional, Type

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.pipeline import ValidationPipeline
from trade_api.validation.validators import (
    Validator,
    CoreStructuralValidator,
    CoreBusinessRuleValidator,
    IRSwapStructuralValidator,
    IRSwapBusinessRuleValidator,
    CommodityOptionStructuralValidator,
    CommodityOptionBusinessRuleValidator,
    IndexSwapStructuralValidator,
    IndexSwapBusinessRuleValidator,
)


class ValidationFactory:
    """Factory for creating validation pipelines using registry pattern."""

    def __init__(self):
        """Initialize factory and build validator registry."""
        self._validator_registry: Optional[Dict[str, List[Type[Validator]]]] = None
        self._core_validator_classes: Optional[List[Type[Validator]]] = None

    def _ensure_registry_initialized(self) -> None:
        """Build validator registry on first call (lazy initialization)."""
        if self._validator_registry is not None:
            return  # Already initialized

        # Build CORE validator registry (applies to ALL trades)
        self._core_validator_classes = [
            CoreStructuralValidator,
            CoreBusinessRuleValidator
        ]

        # Build TRADE-SPECIFIC validator registry
        self._validator_registry = {
            "ir-swap": [
                IRSwapStructuralValidator,
                IRSwapBusinessRuleValidator
            ],
            "commodity-option": [
                CommodityOptionStructuralValidator,
                CommodityOptionBusinessRuleValidator
            ],
            "index-swap": [
                IndexSwapStructuralValidator,
                IndexSwapBusinessRuleValidator
            ]
        }

    def create_pipeline(self, trade: ReadOnlyTrade) -> ValidationPipeline:
        """Create validation pipeline with core + trade-specific validators."""
        # Ensure registry is initialized
        self._ensure_registry_initialized()

        # Detect trade type from structure
        trade_type = self._detect_trade_type(trade)

        # Create CORE validators (apply to ALL trades)
        core_validators = self._create_core_validators()

        # Create TRADE-SPECIFIC validators from registry
        trade_validators = self._create_trade_validators(trade_type)

        # Return pipeline with compositional order
        return ValidationPipeline(core_validators, trade_validators, trade_type)

    def _create_core_validators(self) -> List[Validator]:
        """Instantiate core validators from registry."""
        return [validator_cls() for validator_cls in self._core_validator_classes]

    def _create_trade_validators(self, trade_type: str) -> List[Validator]:
        """Instantiate trade-specific validators from registry."""
        validator_classes = self._validator_registry.get(trade_type, [])
        if not validator_classes:
            raise ValueError(f"No validators registered for trade type: {trade_type}")
        return [validator_cls() for validator_cls in validator_classes]

    def _detect_trade_type(self, trade: ReadOnlyTrade) -> str:
        """Detect trade type using jmesget queries."""
        # Check for distinctive fields using jmesget
        if trade.jmesget("swapDetails") or trade.jmesget("swapLegs"):
            return "ir-swap"
        elif trade.jmesget("commodityDetails") or trade.jmesget("premium"):
            return "commodity-option"
        elif trade.jmesget("leg"):
            return "index-swap"
        raise ValueError("Unable to detect trade type")

    def get_supported_trade_types(self) -> List[str]:
        """Get list of supported trade types from registry."""
        self._ensure_registry_initialized()
        return list(self._validator_registry.keys())

<File--- tcs-poc/tcs-api/src/trade_api/pipeline/__init__.py --->
"""Pipeline engine and stage management."""

<File--- tcs-poc/tcs-api/src/trade_api/models/assembler.py --->
"""Trade assembler for composing trade dictionaries from components."""

from typing import Any, Dict, List, Callable, Optional, Literal
from copy import deepcopy


class TradeAssembler:
    """Compositional factory for assembling trade dictionaries from components.
    
    This class implements the Builder pattern for trade construction, allowing
    flexible composition of trade data from multiple component dictionaries.
    
    Design principles:
    - Immutable assembly (returns new dict, doesn't modify inputs)
    - Configurable merge strategies for lists
    - Optional validation hooks
    - Type-safe with proper hints
    
    Use cases:
    - Template generation from reusable components
    - Pipeline-based trade construction
    - Trade type variations with shared components
    
    Example:
        base = {"tradeType": "InterestRateSwap", "assetClass": "Rates"}
        legs = {"legs": [{"legId": "FIXED"}, {"legId": "FLOAT"}]}
        specific = {"specific": {"rateFamily": "VanillaIRS"}}
        
        assembler = TradeAssembler(base, legs, specific)
        trade = assembler.assemble()
    """
    
    def __init__(
        self,
        *components: Dict[str, Any],
        list_strategy: Literal["replace", "append", "extend"] = "replace",
        validator: Optional[Callable[[Dict[str, Any]], None]] = None
    ):
        """Initialize assembler with components and merge configuration.
        
        Args:
            *components: Variable number of component dictionaries to merge.
                        Later components override earlier ones for conflicting keys.
            list_strategy: How to handle list merging:
                - "replace": Later list replaces earlier (default)
                - "append": Later list appended as single item to earlier
                - "extend": Later list items extended into earlier list
            validator: Optional validation function called after assembly.
                      Should raise exception if validation fails.
        
        Example:
            # Replace strategy (default)
            assembler = TradeAssembler(
                {"legs": [{"id": 1}]},
                {"legs": [{"id": 2}]}
            )
            # Result: {"legs": [{"id": 2}]}
            
            # Extend strategy
            assembler = TradeAssembler(
                {"legs": [{"id": 1}]},
                {"legs": [{"id": 2}]},
                list_strategy="extend"
            )
            # Result: {"legs": [{"id": 1}, {"id": 2}]}
        """
        self._components = components
        self._list_strategy = list_strategy
        self._validator = validator
    
    def assemble(self) -> Dict[str, Any]:
        """Assemble all components into a single trade dictionary.
        
        Creates a new dictionary by deep-merging all components in order.
        Does not modify input components (immutable operation).
        
        Returns:
            New dictionary containing merged trade data
            
        Raises:
            Exception: If validator is provided and validation fails
        """
        # Start with empty dict (immutable - don't modify inputs)
        trade: Dict[str, Any] = {}
        
        # Deep merge each component in order
        for component in self._components:
            self._deep_merge(trade, component)
        
        # Run optional validation
        if self._validator:
            self._validator(trade)
        
        return trade
    
    def _deep_merge(self, target: Dict[str, Any], source: Dict[str, Any]) -> None:
        """Recursively merge source dictionary into target.
        
        Handles nested dictionaries and lists according to configured strategy.
        Modifies target in place.
        
        Args:
            target: Dictionary to merge into (modified in place)
            source: Dictionary to merge from (not modified)
        """
        for key, source_value in source.items():
            # Key doesn't exist in target - simple assignment
            if key not in target:
                # Deep copy to avoid shared references
                target[key] = deepcopy(source_value)
                continue
            
            target_value = target[key]
            
            # Both are dicts - recursive merge
            if isinstance(target_value, dict) and isinstance(source_value, dict):
                self._deep_merge(target_value, source_value)
            
            # Both are lists - apply list strategy
            elif isinstance(target_value, list) and isinstance(source_value, list):
                target[key] = self._merge_lists(target_value, source_value)
            
            # Different types or non-mergeable - source overwrites target
            else:
                target[key] = deepcopy(source_value)
    
    def _merge_lists(self, target_list: List[Any], source_list: List[Any]) -> List[Any]:
        """Merge two lists according to configured strategy.
        
        Args:
            target_list: Existing list
            source_list: New list to merge
            
        Returns:
            Merged list according to strategy
        """
        if self._list_strategy == "replace":
            # Source replaces target completely
            return deepcopy(source_list)
        
        elif self._list_strategy == "append":
            # Source list appended as single item
            result = deepcopy(target_list)
            result.append(deepcopy(source_list))
            return result
        
        elif self._list_strategy == "extend":
            # Source list items extended into target
            result = deepcopy(target_list)
            result.extend(deepcopy(source_list))
            return result
        
        else:
            # Fallback to replace
            return deepcopy(source_list)
    
    def with_validator(self, validator: Callable[[Dict[str, Any]], None]) -> 'TradeAssembler':
        """Create new assembler with validation function.
        
        Allows fluent API for adding validation:
            assembler.with_validator(my_validator).assemble()
        
        Args:
            validator: Validation function to call after assembly
            
        Returns:
            New TradeAssembler instance with validator
        """
        return TradeAssembler(
            *self._components,
            list_strategy=self._list_strategy,
            validator=validator
        )
    
    def with_list_strategy(
        self,
        strategy: Literal["replace", "append", "extend"]
    ) -> 'TradeAssembler':
        """Create new assembler with different list merge strategy.
        
        Allows fluent API for changing strategy:
            assembler.with_list_strategy("extend").assemble()
        
        Args:
            strategy: New list merge strategy
            
        Returns:
            New TradeAssembler instance with new strategy
        """
        return TradeAssembler(
            *self._components,
            list_strategy=strategy,
            validator=self._validator
        )
    
    def add_components(self, *components: Dict[str, Any]) -> 'TradeAssembler':
        """Create new assembler with additional components.
        
        Allows fluent API for adding components:
            assembler.add_components(extra1, extra2).assemble()
        
        Args:
            *components: Additional component dictionaries
            
        Returns:
            New TradeAssembler instance with all components
        """
        return TradeAssembler(
            *self._components,
            *components,
            list_strategy=self._list_strategy,
            validator=self._validator
        )
    
    def __repr__(self) -> str:
        """String representation showing component count and strategy.
        
        Returns:
            String describing the assembler configuration
        """
        return (
            f"TradeAssembler("
            f"components={len(self._components)}, "
            f"strategy={self._list_strategy!r}, "
            f"validator={'set' if self._validator else 'none'})"
        )

<File--- tcs-poc/tcs-api/src/trade_api/models/trade.py --->
"""Trade class with JSON composition pattern using high-performance libraries."""

import orjson
import jmespath
from glom import assign
from functools import lru_cache, cached_property
from typing import Any, Dict, Union
from types import MappingProxyType


@lru_cache(maxsize=1024)
def _compile_jmes(path: str):
    """Cache compiled JMESPath expressions for performance.
    
    JMESPath compilation is expensive, so we cache up to 1024 unique paths.
    This dramatically improves performance for repeated queries.
    
    Args:
        path: JMESPath expression string
        
    Returns:
        Compiled JMESPath expression
    """
    return jmespath.compile(path)


class Trade:
    """Lightweight composition-based wrapper for trade JSON data.
    
    This class combines the best tools for JSON operations:
    - orjson: Fast JSON parsing/serialization (2-3x faster than stdlib json)
    - jmespath: Powerful query language for complex reads (filters, projections)
    - glom: Robust path-based writes with automatic structure creation
    
    Design philosophy:
    - Minimal object overhead (just wraps a dict)
    - Direct data access via .data property
    - Specialized methods for different access patterns
    
    Requirements:
    - 5.3: Preserve direct access to underlying JSON properties
    - 5.5: Handle varying JSON schemas through composition
    """
    
    def __init__(self, data: Union[Dict[str, Any], str, bytes]):
        """Initialize Trade with JSON data.
        
        Accepts multiple input formats for flexibility:
        - Dict: Direct dictionary (zero-copy, fastest)
        - str/bytes: JSON string/bytes (parsed with fast orjson)
        
        Args:
            data: Dictionary, JSON string, or JSON bytes containing trade data
        """
        if isinstance(data, (str, bytes)):
            # Use orjson for fast parsing (2-3x faster than json.loads)
            self._data = orjson.loads(data)
        else:
            # Direct dict assignment (zero overhead)
            self._data = data

    @property
    def data(self) -> Dict[str, Any]:
        """Direct access to underlying JSON data.
        
        Provides zero-overhead access to the raw dictionary for cases where
        you need maximum performance or want to use standard dict operations.
        
        Returns:
            The complete trade data dictionary
        """
        return self._data

    def jmesget(self, path: str, default: Any = None) -> Any:
        """Get data using JMESPath query language (for complex queries).
        
        JMESPath provides powerful query capabilities:
        - Simple paths: "tradeId", "specific.rateFamily"
        - Array access: "legs[0].rate"
        - Filters: "legs[?legType=='Fixed'].rate"
        - Projections: "legs[*].legId"
        - Slicing: "legs[:2]"
        
        Uses cached compilation for performance on repeated queries.
        
        Use this when you need:
        - Filtering/projections
        - Complex queries
        - Array operations
        
        Args:
            path: JMESPath expression
            default: Default value if path doesn't exist or returns None
            
        Returns:
            Query result or default value
            
        Examples:
            trade.jmesget("legs[?rate > `0`].id")
            trade.jmesget("legs[0].rate.currency")
            trade.jmesget("legs[*].legType")
        """
        # Use cached compiled expression for performance
        result = _compile_jmes(path).search(self._data)
        return result if result is not None else default

    def glomset(self, path: str, value: Any) -> None:
        """Set nested property using glom path notation (for writes).
        
        Glom provides robust path-based assignment:
        - Automatically creates intermediate structures
        - Handles nested dicts and lists
        - Clear error messages on invalid paths
        
        Path syntax:
        - Nested dicts: "specific.rateFamily"
        - List access: "legs.0.rate" or "legs[0].rate"
        - Deep nesting: "counterparties.0.contact.email"
        
        Use this for all write operations to nested structures.
        
        Args:
            path: Glom path expression (dot notation with numeric indices)
            value: Value to set at the path
            
        Examples:
            trade.glomset("legs.0.rate", 0.05)
            trade.glomset("specific.rateFamily", "VanillaIRS")
            trade.glomset("counterparties.0.name", "Bank A")
        """
        # Glom handles structure creation and validation
        assign(self._data, path, value)

    def to_json(self) -> bytes:
        """Serialize trade data to JSON bytes using orjson.
        
        Uses orjson for fast serialization (2-3x faster than json.dumps).
        Returns bytes for maximum performance and compatibility with
        HTTP responses, file I/O, etc.
        
        Returns:
            JSON bytes representation of the trade data
        """
        return orjson.dumps(self._data)
    
    def to_readonly(self) -> 'ReadOnlyTrade':
        """Convert to read-only trade with cached properties.
        
        Creates a ReadOnlyTrade instance that:
        - Prevents modifications to the underlying data
        - Caches expensive property lookups
        - Provides the same read interface (jmesget, data access)
        
        Use this when:
        - Passing trades to read-only contexts
        - Want to cache computed properties without invalidation concerns
        - Need to ensure data immutability
        
        Returns:
            ReadOnlyTrade instance wrapping this trade's data
        """
        return ReadOnlyTrade(self._data)


class ReadOnlyTrade:
    """Immutable, read-only view of trade data with cached properties.
    
    This class provides:
    - Immutable data access (via MappingProxyType)
    - Cached properties for expensive lookups (no invalidation needed)
    - Same read interface as Trade (jmesget)
    - No write methods (glomset removed)
    
    Use cases:
    - Validation pipelines (read-only access)
    - API responses (prevent accidental modification)
    - Caching expensive computed values
    - Multi-threaded read access
    
    Design:
    - Data is wrapped in MappingProxyType (truly immutable)
    - @cached_property for common lookups (trade_id, trade_type, etc.)
    - Zero cache invalidation concerns (data can't change)
    """
    
    def __init__(self, data: Union[Dict[str, Any], Trade]):
        """Initialize ReadOnlyTrade with immutable data.
        
        Args:
            data: Dictionary or Trade instance to make read-only
        """
        if isinstance(data, Trade):
            # Extract data from Trade instance
            source_data = data._data
        else:
            source_data = data
        
        # Wrap in MappingProxyType for true immutability
        # This prevents any modifications to the underlying dict
        self._data = MappingProxyType(source_data)
    
    @property
    def data(self) -> MappingProxyType:
        """Immutable view of underlying JSON data.
        
        Returns MappingProxyType which provides read-only dict interface.
        Any attempt to modify will raise TypeError.
        
        Returns:
            Immutable mapping of trade data
        """
        return self._data
    
    def jmesget(self, path: str, default: Any = None) -> Any:
        """Get data using JMESPath query language (for complex queries).

        Identical to Trade.jmesget() but operates on immutable data.
        See Trade.jmesget() for full documentation.

        Args:
            path: JMESPath expression
            default: Default value if path doesn't exist or returns None

        Returns:
            Query result or default value
        """
        # Use cached compiled expression for performance
        # Note: self._data is MappingProxyType but jmespath handles it fine
        result = _compile_jmes(path).search(self._data)
        return result if result is not None else default
    
    @cached_property
    def trade_id(self) -> str:
        """Cached trade ID lookup.

        Computed once and cached for the lifetime of this instance.
        Safe because data is immutable.

        Returns:
            Trade ID string from general.tradeId
        """
        return self._data["general"]["tradeId"]

    @cached_property
    def trade_type(self) -> str:
        """Cached trade type detection.

        Detects trade type from structure by checking for distinctive fields.
        Computed once and cached for the lifetime of this instance.
        Safe because data is immutable.

        Returns:
            Trade type string: "ir-swap", "commodity-option", "index-swap", or "unknown"
        """
        # Use jmesget to detect trade type from structure
        if self.jmesget("swapDetails") or self.jmesget("swapLegs"):
            return "ir-swap"
        elif self.jmesget("commodityDetails") or self.jmesget("premium"):
            return "commodity-option"
        elif self.jmesget("leg"):
            return "index-swap"
        return "unknown"
    
    @cached_property
    def version(self) -> int:
        """Cached version number lookup.
        
        Computed once and cached for the lifetime of this instance.
        Safe because data is immutable.
        
        Returns:
            Version number, or 1 if not set
        """
        return self._data.get("version", 1)
    
    @cached_property
    def asset_class(self) -> str:
        """Cached asset class lookup.
        
        Computed once and cached for the lifetime of this instance.
        Safe because data is immutable.
        
        Returns:
            Asset class string, or empty string if not set
        """
        return self._data.get("assetClass", "")
    
    def to_json(self) -> bytes:
        """Serialize trade data to JSON bytes using orjson.
        
        Returns:
            JSON bytes representation of the trade data
        """
        # MappingProxyType needs to be converted to dict for orjson
        return orjson.dumps(dict(self._data))
    
    def __repr__(self) -> str:
        """String representation showing read-only status.
        
        Returns:
            String showing this is a read-only trade with ID and type
        """
        return f"ReadOnlyTrade(id={self.trade_id!r}, type={self.trade_type!r})"

<File--- tcs-poc/tcs-api/src/trade_api/models/__init__.py --->
"""Data models and trade class definitions."""

from trade_api.models.trade import Trade, ReadOnlyTrade
from trade_api.models.assembler import TradeAssembler
from trade_api.models.factory import TradeTemplateFactory

__all__ = ["Trade", "ReadOnlyTrade", "TradeAssembler", "TradeTemplateFactory"]

<File--- tcs-poc/tcs-api/src/trade_api/models/factory.py --->
"""Trade template factory with simple composition."""

import orjson
from pathlib import Path
from functools import lru_cache
from typing import Any, Dict, List, Optional
from trade_api.models.assembler import TradeAssembler


class TradeTemplateFactory:
    """Factory for creating TradeAssemblers with simple template composition.
    
    This factory implements a simple component-based template system where trade
    structures are assembled by merging JSON files in a specific order:
    
    1. Base layer: core/general.json + core/common.json (shared by ALL trades)
    2. Trade-specific overrides: trade-types/{type}/general.json + trade-types/{type}/common.json
    3. Trade-specific blocks: trade-types/{type}/*.json (economic blocks)
    
    All template files start from root {} and show the full path to where their
    content belongs. The assembler simply merges them together using deep merge.
    
    Key features:
    - Simple composition (no complex inheritance)
    - Schema versioning (v1, v2, etc.)
    - Component caching for performance
    - Extensible (add new types by adding JSON files)
    - No code changes needed for new trade types
    
    Directory structure:
        templates/
         v1/                          # Schema version
             core/                    # Base layer (shared by ALL trades)
                general.json         # { "general": {...} }
                common.json          # { "common": {...} }
             trade-types/             # Trade-specific layers
                 ir-swap/
                    general.json     # { "general": {...} } - IR-specific additions
                    swap-details.json # { "swapDetails": {...} }
                    swap-leg-fixed.json # { "swapLegs": [{...}] }
                    swap-leg-floating-ois.json # { "swapLegs": [{...}] }
                 commodity-option/
                    general.json
                    commodity-details.json
                    ...
                 index-swap/
                     general.json
                     leg.json
    
    Example usage:
        factory = TradeTemplateFactory(template_dir="templates", schema_version="v1")
        
        # Create IR Swap
        assembler = factory.create_assembler(trade_type="ir-swap")
        trade_dict = assembler.assemble()
        
        # Create Commodity Option
        assembler = factory.create_assembler(trade_type="commodity-option")
        trade_dict = assembler.assemble()
    """
    
    def __init__(self, template_dir: str = "templates", schema_version: str = "v1"):
        """Initialize factory with template directory and schema version.
        
        Args:
            template_dir: Root directory containing template files
            schema_version: Template schema version to use (v1, v2, etc.)
        """
        self.template_dir = Path(template_dir)
        self.schema_version = schema_version
        self.schema_path = self.template_dir / schema_version
        
        if not self.schema_path.exists():
            raise ValueError(
                f"Template schema version '{schema_version}' not found at {self.schema_path}"
            )
    
    def create_assembler(
        self,
        trade_type: str,
        **kwargs
    ) -> TradeAssembler:
        """Create TradeAssembler for specified trade type.
        
        Loads template files in composition order:
        1. core/general.json
        2. core/common.json
        3. trade-types/{type}/general.json (if exists)
        4. trade-types/{type}/common.json (if exists)
        5. trade-types/{type}/*.json (all other files in trade type directory)
        
        Args:
            trade_type: Trade type identifier ("ir-swap", "commodity-option", "index-swap")
            **kwargs: Reserved for future use
            
        Returns:
            Configured TradeAssembler ready to assemble()
            
        Example:
            assembler = factory.create_assembler(trade_type="ir-swap")
            trade_dict = assembler.assemble()
        """
        components = []
        
        # 1. Load base core components (shared by ALL trades)
        components.extend(self._load_core_components())
        
        # 2. Load trade-specific components in order
        components.extend(self._load_trade_components(trade_type))
        
        # Return assembler with extend strategy for arrays
        return TradeAssembler(*components, list_strategy="extend")
    
    def _load_core_components(self) -> List[Dict[str, Any]]:
        """Load base core components shared by all trades.
        
        Returns:
            List containing general and common base components
        """
        core_files = [
            "core/general.json",
            "core/common.json",
        ]
        
        components = []
        for file_path in core_files:
            component = self._load_component(file_path)
            if component:
                components.append(component)
            else:
                raise ValueError(f"Required core component not found: {file_path}")
        
        return components
    
    def _load_trade_components(self, trade_type: str) -> List[Dict[str, Any]]:
        """Load trade-specific components in composition order.
        
        Order:
        1. trade-types/{type}/general.json (if exists) - trade-specific general additions
        2. trade-types/{type}/common.json (if exists) - trade-specific common additions
        3. All other .json files in trade-types/{type}/ directory (sorted alphabetically)
        
        Args:
            trade_type: Trade type identifier
            
        Returns:
            List of trade-specific components
        """
        components = []
        trade_dir = self.schema_path / "trade-types" / trade_type
        
        if not trade_dir.exists():
            raise ValueError(f"Trade type '{trade_type}' not found at {trade_dir}")
        
        # 1. Load trade-specific general.json (if exists)
        general_override = self._load_component(f"trade-types/{trade_type}/general.json")
        if general_override:
            components.append(general_override)
        
        # 2. Load trade-specific common.json (if exists)
        common_override = self._load_component(f"trade-types/{trade_type}/common.json")
        if common_override:
            components.append(common_override)
        
        # 3. Load all other JSON files (excluding general.json and common.json)
        other_files = sorted([
            f for f in trade_dir.glob("*.json")
            if f.name not in ["general.json", "common.json"]
        ])
        
        for file_path in other_files:
            relative_path = file_path.relative_to(self.schema_path)
            component = self._load_component(str(relative_path))
            if component:
                components.append(component)
        
        return components
    
    @lru_cache(maxsize=256)
    def _load_component(self, relative_path: str) -> Optional[Dict[str, Any]]:
        """Load and cache a component file.
        
        Uses LRU cache to avoid repeated file I/O for the same components.
        Cache size of 256 should handle most template sets.
        
        Args:
            relative_path: Path relative to schema directory
            
        Returns:
            Component dictionary or None if file doesn't exist
        """
        file_path = self.schema_path / relative_path
        
        if not file_path.exists():
            return None
        
        try:
            with open(file_path, 'rb') as f:
                return orjson.loads(f.read())
        except Exception as e:
            raise ValueError(f"Error loading component {relative_path}: {e}")
    
    def clear_cache(self):
        """Clear the component cache.
        
        Useful for testing or when templates are modified at runtime.
        """
        self._load_component.cache_clear()
    
    def get_available_types(self) -> List[str]:
        """Get list of available trade types.
        
        Returns:
            List of trade type identifiers
        """
        trade_types_dir = self.schema_path / "trade-types"
        if not trade_types_dir.exists():
            return []
        
        return [d.name for d in trade_types_dir.iterdir() if d.is_dir()]
    
    def __repr__(self) -> str:
        """String representation showing configuration.
        
        Returns:
            String describing the factory configuration
        """
        return (
            f"TradeTemplateFactory("
            f"schema_version={self.schema_version!r}, "
            f"template_dir={str(self.template_dir)!r})"
        )

<File--- tcs-poc/tcs-api/src/trade_api/store/__init__.py --->
"""Trade storage and persistence layer."""

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/__init__.py --->
"""Validator classes for trade validation."""

from .base import Validator
from .core import CoreStructuralValidator, CoreBusinessRuleValidator
from .irswap import IRSwapStructuralValidator, IRSwapBusinessRuleValidator
from .commodity_option import CommodityOptionStructuralValidator, CommodityOptionBusinessRuleValidator
from .index_swap import IndexSwapStructuralValidator, IndexSwapBusinessRuleValidator

__all__ = [
    "Validator",
    "CoreStructuralValidator",
    "CoreBusinessRuleValidator",
    "IRSwapStructuralValidator",
    "IRSwapBusinessRuleValidator",
    "CommodityOptionStructuralValidator",
    "CommodityOptionBusinessRuleValidator",
    "IndexSwapStructuralValidator",
    "IndexSwapBusinessRuleValidator",
]

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/base.py --->
"""Abstract base validator class."""

from abc import ABC, abstractmethod

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult


class Validator(ABC):
    """Abstract base validator."""

    @abstractmethod
    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        """Validate trade and return result."""
        pass

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/commodity_option/business_rules.py --->
"""Commodity Option business rules validator."""

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class CommodityOptionBusinessRuleValidator(Validator):
    """Validates Commodity Option business rules.

    MINIMAL - placeholder for now.
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        errors = []
        warnings = []
        # MINIMAL: No business rules yet
        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/commodity_option/structural.py --->
"""Commodity Option structural validator."""

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class CommodityOptionStructuralValidator(Validator):
    """Validates Commodity Option structure.

    MINIMAL - just check commodityDetails exists.
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        errors = []
        warnings = []

        # MINIMAL: Just check commodityDetails exists
        if not trade.jmesget("commodityDetails"):
            errors.append("Commodity Option missing required field: commodityDetails")

        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/commodity_option/__init__.py --->
"""Commodity Option validators."""

from .structural import CommodityOptionStructuralValidator
from .business_rules import CommodityOptionBusinessRuleValidator

__all__ = ["CommodityOptionStructuralValidator", "CommodityOptionBusinessRuleValidator"]

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/core/business_rules.py --->
# AUTO-GENERATED from specs/validators/core/business_rules.md
# To update this validator, edit the markdown specification and regenerate

"""Core business rules validator for all trades."""

from datetime import datetime

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class CoreBusinessRuleValidator(Validator):
    """Validates universal business rules that apply to ALL trade types.

    These are fundamental business logic checks that ensure data quality and
    consistency across the entire trading system.

    Current Scope: Minimal validation - only critical date format validation.

    Applies to: All trade types (ir-swap, commodity-option, index-swap, etc.)
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        """Check universal business rules (minimal).

        Currently validates:
        - Trade date format (YYYY-MM-DD ISO 8601 format)

        Returns ValidationResult with errors for any business rule violations.
        """
        errors = []
        warnings = []

        # Validate tradeDate format (YYYY-MM-DD)
        trade_date_str = trade.jmesget("common.tradeDate")
        if trade_date_str:
            # Only validate if field exists (structural validator handles missing fields)
            try:
                datetime.strptime(trade_date_str, "%Y-%m-%d")
            except ValueError:
                errors.append(f"Invalid tradeDate format: {trade_date_str}. Expected YYYY-MM-DD")

        # That's it for now - keep minimal
        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/core/structural.py --->
# AUTO-GENERATED from specs/validators/core/structural.md
# To update this validator, edit the markdown specification and regenerate

"""Core structural validator for all trades."""

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class CoreStructuralValidator(Validator):
    """Validates that core fields required for ALL trade types are present and valid.

    These are the minimal essential fields that every trade must have, regardless
    of trade type (ir-swap, commodity-option, index-swap, etc.).

    Applies to: All trade types
    """

    # Minimal core required fields
    REQUIRED_FIELDS = [
        "general.tradeId",
        "common.book",
        "common.tradeDate",
        "common.counterparty",
        "common.inputDate"
    ]

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        """Check core required fields exist and are non-empty.

        Special case: general.tradeId can be empty string for presave payloads
        (backend generates the ID).

        Returns ValidationResult with errors for any missing or empty required fields.
        """
        errors = []
        warnings = []

        for field_path in self.REQUIRED_FIELDS:
            # Use jmesget to check field existence
            value = trade.jmesget(field_path)

            if value is None:
                # Field doesn't exist in the trade data
                errors.append(f"Required field missing: {field_path}")
            elif isinstance(value, str) and value == "":
                # Field exists but is empty string
                # Special case: tradeId can be empty (backend generates it)
                if field_path == "general.tradeId":
                    continue  # Allow empty tradeId for presave payloads
                errors.append(f"Required field empty: {field_path}")

        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/core/__init__.py --->
"""Core validators for all trades."""

from .structural import CoreStructuralValidator
from .business_rules import CoreBusinessRuleValidator

__all__ = ["CoreStructuralValidator", "CoreBusinessRuleValidator"]

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/index_swap/business_rules.py --->
"""Index Swap business rules validator."""

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class IndexSwapBusinessRuleValidator(Validator):
    """Validates Index Swap business rules.

    MINIMAL - placeholder for now.
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        errors = []
        warnings = []
        # MINIMAL: No business rules yet
        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/index_swap/structural.py --->
"""Index Swap structural validator."""

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class IndexSwapStructuralValidator(Validator):
    """Validates Index Swap structure.

    MINIMAL - just check leg exists.
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        errors = []
        warnings = []

        # MINIMAL: Just check leg field exists
        if not trade.jmesget("leg"):
            errors.append("Index Swap missing required field: leg")

        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/index_swap/__init__.py --->
"""Index Swap validators."""

from .structural import IndexSwapStructuralValidator
from .business_rules import IndexSwapBusinessRuleValidator

__all__ = ["IndexSwapStructuralValidator", "IndexSwapBusinessRuleValidator"]

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/irswap/business_rules.py --->
"""IR Swap business rules validator."""

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class IRSwapBusinessRuleValidator(Validator):
    """Validates IR Swap specific business rules.

    MINIMAL - no business rules for now, just placeholder.
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        errors = []
        warnings = []

        # MINIMAL: No business rules yet - just structural checks for now
        # Will add date ordering, notional validation, etc. later

        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/irswap/structural.py --->
"""IR Swap structural validator."""

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class IRSwapStructuralValidator(Validator):
    """Validates IR Swap specific structure (swapDetails, swapLegs).

    MINIMAL CHECKS - based on ir-swap-presave-flattened.txt reference.
    Reference: /projects/trade-capture-service/tcs-poc/json-examples/polar/ir-swap-presave-flattened.txt
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        errors = []
        warnings = []

        # MINIMAL: Check swapDetails exists
        if not trade.jmesget("swapDetails"):
            errors.append("IR Swap missing required field: swapDetails")

        # MINIMAL: Check swapLegs exists and has at least one leg
        legs = trade.jmesget("swapLegs")
        if not legs or len(legs) == 0:
            errors.append("IR Swap must have at least one leg in swapLegs array")
        else:
            # MINIMAL: Each leg must have direction and currency
            for idx, leg in enumerate(legs):
                direction = trade.jmesget(f"swapLegs[{idx}].direction")
                currency = trade.jmesget(f"swapLegs[{idx}].currency")

                if not direction:
                    errors.append(f"swapLegs[{idx}] missing required field: direction")
                if not currency:
                    errors.append(f"swapLegs[{idx}] missing required field: currency")

        return ValidationResult(success=len(errors) == 0, errors=errors, warnings=warnings)

<File--- tcs-poc/tcs-api/src/trade_api/validation/validators/irswap/__init__.py --->
"""IR Swap validators."""

from .structural import IRSwapStructuralValidator
from .business_rules import IRSwapBusinessRuleValidator

__all__ = ["IRSwapStructuralValidator", "IRSwapBusinessRuleValidator"]

<File--- tcs-poc/tcs-api/templates/v1/core/common.json --->
{
  "common": {
    "book": "",
    "accountReference": null,
    "tradeDate": "",
    "counterparty": "",
    "novatedToCounterparty": null,
    "counterpartyAccountReference": null,
    "inputDate": "",
    "orderTime": null,
    "comment": null,
    "initialMargin": null,
    "backoutBook": null,
    "tradingStrategy": null,
    "ddeEligible": "No",
    "backoutTradingStrategy": null,
    "externalReference": null,
    "internalReference": null,
    "initialMarginDeliveryDate": null,
    "initialMarginDescription": null,
    "structureDetails": null,
    "backoutEntity": null,
    "salesGroup": null,
    "includeFeeEngine": {
      "allLegs": false,
      "nearLeg": false,
      "farLeg": false,
      "none": true
    },
    "acsLinkType": null,
    "regionOrAccount": null,
    "originatingSystem": null,
    "stp": "No",
    "sourceSystem": null,
    "cashflowHedgeNotification": false,
    "IRDAdvisory": false,
    "isCustomBasket": null,
    "events": [],
    "fees": [],
    "cvr": null,
    "rightToBreakDetails": null,
    "capitalSharing": [],
    "tagMap": [],
    "tradeIdentifiers": [],
    "ISDADefinition": "ISDA2021"
  }
}

<File--- tcs-poc/tcs-api/templates/v1/core/general.json --->
{
  "general": {
    "tradeId": "",
    "label": "",
    "transactionRoles": {
      "marketer": null,
      "transactionOriginator": null,
      "priceMaker": "",
      "transactionAcceptor": null,
      "parameterGrantor": null
    },
    "executionDetails": {
      "executionDateTime": "",
      "bestExecutionApplicable": null,
      "clearingVenue": null,
      "reportTrackingNumber": null,
      "omsOrderID": null,
      "isOffMarketPrice": false,
      "clientInstructionTime": null
    },
    "packageTradeDetails": {
      "isPackageTrade": false,
      "packageIdentifier": null,
      "packagePriceOrSpread": null,
      "packageType": null,
      "packagePrice": null,
      "packagePriceCcy": null,
      "priceNotation": null,
      "useTradeIdAsPackageId": true
    },
    "blockAllocationDetails": null
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/ir-swap/swap-leg-floating-ois.json --->
{
  "swapLegs": [
    {
      "legIndex": 1,
      "direction": "receive",
      "currency": "USD",
      "rateType": "floating",
      "notional": null,
      "scheduleType": "constant",
      "interestRate": null,
      "ratesetRef": "SOFR",
      "referenceTenor": "1D",
      "margin": 0,
      "ratesetOffset": null,
      "paymentOffset": null,
      "ratesetCalendars": ["US"],
      "formula": "OIS",
      "dayCountBasis": "ACT/360",
      "observationMethod": "plain",
      "averagingMethod": "compound",
      "startDate": "",
      "endDate": "",
      "isAdjusted": true,
      "stubDate": null,
      "stubDayCountBasis": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "floating-average-daily",
      "rollConvention": null,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "fxSettlement": null,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "nonStandard": null
    }
  ]
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/ir-swap/swap-details.json --->
{
  "swapDetails": {
    "underlying": "USD",
    "settlementType": "physical",
    "swapType": "irsOis",
    "isCleared": false,
    "markitSingleSided": false,
    "principalExchange": "firstLastLegs",
    "isIsdaFallback": false
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/ir-swap/general.json --->
{
  "general": {
    "executionDetails": {
      "executionVenue": null,
      "venueTransactionID": null,
      "executionBroker": null,
      "executionBrokeragePayer": "wePay",
      "executionVenueMIC": null,
      "executionVenueType": "OffFacility"
    }
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/ir-swap/swap-leg-fixed.json --->
{
  "swapLegs": [
    {
      "legIndex": 0,
      "direction": "pay",
      "currency": "USD",
      "rateType": "fixed",
      "notional": null,
      "scheduleType": "constant",
      "interestRate": null,
      "ratesetRef": null,
      "referenceTenor": null,
      "margin": "marginNone",
      "ratesetOffset": null,
      "paymentOffset": null,
      "ratesetCalendars": [],
      "formula": "ARR",
      "dayCountBasis": "ACT/360",
      "observationMethod": "notApplicable",
      "averagingMethod": "notApplicable",
      "startDate": "",
      "endDate": "",
      "isAdjusted": true,
      "stubDate": null,
      "stubDayCountBasis": null,
      "stubType": "none",
      "alignAtEom": "notEom",
      "style": "notApplicable",
      "rollConvention": null,
      "settlementCurrency": "USD",
      "settlementOffset": 2,
      "fxSettlement": null,
      "paymentCalendars": ["NY"],
      "rollDateConvention": "MFBD",
      "nonStandard": null
    }
  ]
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/index-swap/general.json --->
{
  "general": {
    "executionDetails": {
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      }
    }
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/index-swap/leg.json --->
{
  "leg": {
    "underlyingAsset": {
      "indexCode": "",
      "ISIN": null
    },
    "volume": {
      "volumeType": "notional",
      "rounding": "2dp"
    },
    "fixedFeeLeg": {
      "dayCountBasis": "ACT/365",
      "combineFeesTbills": "No",
      "feeStartDate": "",
      "settlement": null
    },
    "floatingIndexLeg": {
      "periods": {
        "singleOrMultiRatesets": "single",
        "ratesetOn": "commodityBusinessDays",
        "startDate": "",
        "endDate": "",
        "rollDateConvention": "MFBD"
      },
      "price": {
        "priceType": "close",
        "referenceDate": "",
        "margin": 0,
        "rounding": "4dp"
      },
      "indexTradeDetails": {
        "hedgeDisruption": "Yes",
        "ateTrigger": "No",
        "reinvesting": "No",
        "stopLoss": "noStopLoss",
        "indexFloatingPerformance": "noFloatingPerformance",
        "linkedTradeableId": null,
        "exitCost": "noExitCost",
        "unilateralUnwindRights": "No",
        "standardIcoh": "Yes",
        "isBreakable": false
      }
    },
    "payment": {
      "paymentCcy": "USD",
      "assetCcy": "USD",
      "paymentDate": null,
      "paymentDaysOffset": 2,
      "dayType": "Business",
      "calendar": ["NY"],
      "rounding": "2dp"
    }
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/commodity-option/commodity-details.json --->
{
  "commodityDetails": {
    "optionExerciseType": "europeanExercise",
    "settlementMethod": "CashOrEfrp",
    "accumulation": "None",
    "automaticExercise": false,
    "notionalVolume": {
      "volumeUnit": "LB",
      "volumeFrequency": "Total",
      "volumeFuturesContracts": 0
    },
    "strikeCurrency": "EUR",
    "strikeUnit": "LB",
    "strikePayout": "ITM",
    "pricingStyle": "AVG_CMD_AVG_FX",
    "priceCalculation": {
      "spread": 0,
      "roundingMethod": "halfUp",
      "precision": "3dp",
      "commonPricing": true
    },
    "assetPricing": {
      "ratesetRuleCode": "DuringPeriod",
      "ratesetExprCode": "LIFFE_AG",
      "assetWeight": 1,
      "assetUnit": "LB",
      "commodityCode": "EGT",
      "commodityRateset": "EGT",
      "fixingStyle": "bullet",
      "fixingRounding": "halfUp"
    },
    "fxFixing": {
      "commonPricing": false,
      "averagingCalcMethod": "avgAssetFx",
      "spread": 0,
      "conversionFactor": 0,
      "style": "average",
      "roundingMethod": "halfUp",
      "roundingPrecision": "3dp"
    }
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/commodity-option/premium.json --->
{
  "premium": {
    "priceUnits": "LB",
    "deferredFlag": false,
    "paymentStyle": "singlePayment",
    "premiumValueDate": "",
    "premiumFxRatesetDate": ""
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/commodity-option/schedule-details.json --->
{
  "scheduleDetails": {
    "singleOrMultiPeriod": "SinglePeriod",
    "rollDirection": "PBD",
    "rollDirectionEnum": "forward",
    "periodAlignOn": "SwapEnd",
    "frequency": {
      "period": "D",
      "multiplier": 0
    },
    "pricingSchedule": [
      {
        "scheduleIndex": 0,
        "periodStartDate": "",
        "periodEndDate": "",
        "quantity": 0
      }
    ]
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/commodity-option/general.json --->
{
  "general": {
    "executionDetails": {
      "executionVenue": {
        "executionVenue": null,
        "venueTransactionID": null,
        "executionBroker": null,
        "executionBrokeragePayer": "wePay",
        "executionVenueMIC": null,
        "executionVenueType": "OffFacility"
      }
    }
  }
}

<File--- tcs-poc/tcs-api/templates/v1/trade-types/commodity-option/exercise-payment.json --->
{
  "exercisePayment": {
    "paymentCurrency": "EUR",
    "businessCenters": ["TARGET"],
    "payRelativeTo": "LastFixingDate",
    "paymentDaysOffset": {
      "multiplier": 5,
      "dateAdjustments": "Business",
      "businessDayConvention": "MFBD"
    }
  }
}

<File--- tcs-poc/tcs-api/specs/validators/core/CoreBusinessRuleValidator.java --->
// AUTO-GENERATED from specs/validators/core/business_rules.md
// To update this validator, edit the markdown specification and regenerate

package com.macquarie.tcs.validation.validators.core;

import com.macquarie.tcs.models.ReadOnlyTrade;
import com.macquarie.tcs.validation.ValidationResult;
import com.macquarie.tcs.validation.validators.Validator;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;
import java.util.ArrayList;
import java.util.List;

/**
 * Core Business Rules Validator
 *
 * Validates universal business rules that apply to ALL trade types.
 * These are fundamental business logic checks that ensure data quality and
 * consistency across the entire trading system.
 *
 * Current Scope: Minimal validation - only critical date format validation for now.
 *
 * Applies to: All trade types (ir-swap, commodity-option, index-swap, etc.)
 */
public class CoreBusinessRuleValidator extends Validator {

    /**
     * ISO 8601 date format pattern (YYYY-MM-DD)
     */
    private static final DateTimeFormatter ISO_DATE_FORMATTER = DateTimeFormatter.ISO_LOCAL_DATE;

    /**
     * Validates universal business rules for all trade types.
     *
     * Currently validates:
     * - Trade date format (YYYY-MM-DD ISO 8601 format)
     *
     * @param trade The read-only trade object to validate
     * @return ValidationResult with success=true if no errors found, false otherwise.
     *         Includes list of errors and warnings.
     */
    @Override
    public ValidationResult validate(ReadOnlyTrade trade) {
        List<String> errors = new ArrayList<>();
        List<String> warnings = new ArrayList<>();

        // Validate Trade Date Format
        // Per spec: common.tradeDate must follow ISO 8601 format (YYYY-MM-DD)
        String tradeDateValue = trade.jmesGet("common.tradeDate");

        // Per spec: Skip validation if field is null or missing
        // (structural validator handles missing fields)
        if (tradeDateValue != null) {
            // Attempt to parse using ISO 8601 date format
            try {
                LocalDate.parse(tradeDateValue, ISO_DATE_FORMATTER);
                // If parsing succeeds, validation passes (no error)
            } catch (DateTimeParseException e) {
                // If parsing fails, record error with actual invalid value
                errors.add(String.format(
                    "Invalid tradeDate format: %s. Expected YYYY-MM-DD",
                    tradeDateValue
                ));
            }
        }

        // Return validation result
        // Per spec: Success only if no errors found
        return new ValidationResult(
            errors.isEmpty(),  // success
            errors,            // errors list
            warnings           // warnings list
        );
    }
}

<File--- tcs-poc/tcs-api/specs/validators/core/business_rules_generated.py --->
# AUTO-GENERATED from specs/validators/core/business_rules.md
# To update this validator, edit the markdown specification and regenerate

"""Core business rules validator for all trades."""

from datetime import datetime

from trade_api.models.trade import ReadOnlyTrade
from trade_api.validation.result import ValidationResult
from ..base import Validator


class CoreBusinessRuleValidator(Validator):
    """Validates universal business rules that apply to ALL trade types.

    These are fundamental business logic checks that ensure data quality and
    consistency across the entire trading system.

    Current Scope: Minimal validation - only critical date format validation for now.

    Applies to: All trade types (ir-swap, commodity-option, index-swap, etc.)
    """

    def validate(self, trade: ReadOnlyTrade) -> ValidationResult:
        """Validate universal business rules for all trade types.

        Currently validates:
        - Trade date format (YYYY-MM-DD ISO 8601 format)

        Returns:
            ValidationResult with success=True if no errors found, False otherwise.
            Includes list of errors and warnings.
        """
        errors = []
        warnings = []

        # Validate Trade Date Format
        # Per spec: common.tradeDate must follow ISO 8601 format (YYYY-MM-DD)
        trade_date_value = trade.jmesget("common.tradeDate")

        # Per spec: Skip validation if field is None or missing
        # (structural validator handles missing fields)
        if trade_date_value is not None:
            # Attempt to parse using ISO 8601 date format
            try:
                datetime.strptime(trade_date_value, "%Y-%m-%d")
                # If parsing succeeds, validation passes (no error)
            except ValueError:
                # If parsing fails, record error with actual invalid value
                errors.append(
                    f"Invalid tradeDate format: {trade_date_value}. Expected YYYY-MM-DD"
                )

        # Return validation result
        # Per spec: Success only if no errors found
        return ValidationResult(
            success=len(errors) == 0,
            errors=errors,
            warnings=warnings
        )

